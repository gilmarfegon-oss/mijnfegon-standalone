(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function x0(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Km={exports:{}},au={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DE;function cR(){if(DE)return au;DE=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var c=null;if(u!==void 0&&(c=""+u),o.key!==void 0&&(c=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:i,type:s,key:c,ref:o!==void 0?o:null,props:u}}return au.Fragment=e,au.jsx=n,au.jsxs=n,au}var NE;function hR(){return NE||(NE=1,Km.exports=cR()),Km.exports}var E=hR(),Qm={exports:{}},we={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OE;function fR(){if(OE)return we;OE=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),A=Symbol.iterator;function C(P){return P===null||typeof P!="object"?null:(P=A&&P[A]||P["@@iterator"],typeof P=="function"?P:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,M={};function Y(P,te,le){this.props=P,this.context=te,this.refs=M,this.updater=le||D}Y.prototype.isReactComponent={},Y.prototype.setState=function(P,te){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,te,"setState")},Y.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function $(){}$.prototype=Y.prototype;function ie(P,te,le){this.props=P,this.context=te,this.refs=M,this.updater=le||D}var he=ie.prototype=new $;he.constructor=ie,B(he,Y.prototype),he.isPureReactComponent=!0;var Ee=Array.isArray;function ae(){}var I={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function x(P,te,le){var ce=le.ref;return{$$typeof:i,type:P,key:te,ref:ce!==void 0?ce:null,props:le}}function U(P,te){return x(P.type,te,P.props)}function V(P){return typeof P=="object"&&P!==null&&P.$$typeof===i}function j(P){var te={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(le){return te[le]})}var N=/\/+/g;function Ke(P,te){return typeof P=="object"&&P!==null&&P.key!=null?j(""+P.key):te.toString(36)}function Lt(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(ae,ae):(P.status="pending",P.then(function(te){P.status==="pending"&&(P.status="fulfilled",P.value=te)},function(te){P.status==="pending"&&(P.status="rejected",P.reason=te)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function J(P,te,le,ce,Se){var Ie=typeof P;(Ie==="undefined"||Ie==="boolean")&&(P=null);var je=!1;if(P===null)je=!0;else switch(Ie){case"bigint":case"string":case"number":je=!0;break;case"object":switch(P.$$typeof){case i:case e:je=!0;break;case v:return je=P._init,J(je(P._payload),te,le,ce,Se)}}if(je)return Se=Se(P),je=ce===""?"."+Ke(P,0):ce,Ee(Se)?(le="",je!=null&&(le=je.replace(N,"$&/")+"/"),J(Se,te,le,"",function(qs){return qs})):Se!=null&&(V(Se)&&(Se=U(Se,le+(Se.key==null||P&&P.key===Se.key?"":(""+Se.key).replace(N,"$&/")+"/")+je)),te.push(Se)),1;je=0;var Ut=ce===""?".":ce+":";if(Ee(P))for(var ut=0;ut<P.length;ut++)ce=P[ut],Ie=Ut+Ke(ce,ut),je+=J(ce,te,le,Ie,Se);else if(ut=C(P),typeof ut=="function")for(P=ut.call(P),ut=0;!(ce=P.next()).done;)ce=ce.value,Ie=Ut+Ke(ce,ut++),je+=J(ce,te,le,Ie,Se);else if(Ie==="object"){if(typeof P.then=="function")return J(Lt(P),te,le,ce,Se);throw te=String(P),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return je}function oe(P,te,le){if(P==null)return P;var ce=[],Se=0;return J(P,ce,"","",function(Ie){return te.call(le,Ie,Se++)}),ce}function ge(P){if(P._status===-1){var te=P._result;te=te(),te.then(function(le){(P._status===0||P._status===-1)&&(P._status=1,P._result=le)},function(le){(P._status===0||P._status===-1)&&(P._status=2,P._result=le)}),P._status===-1&&(P._status=0,P._result=te)}if(P._status===1)return P._result.default;throw P._result}var Be=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},Qe={map:oe,forEach:function(P,te,le){oe(P,function(){te.apply(this,arguments)},le)},count:function(P){var te=0;return oe(P,function(){te++}),te},toArray:function(P){return oe(P,function(te){return te})||[]},only:function(P){if(!V(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return we.Activity=b,we.Children=Qe,we.Component=Y,we.Fragment=n,we.Profiler=o,we.PureComponent=ie,we.StrictMode=s,we.Suspense=p,we.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,we.__COMPILER_RUNTIME={__proto__:null,c:function(P){return I.H.useMemoCache(P)}},we.cache=function(P){return function(){return P.apply(null,arguments)}},we.cacheSignal=function(){return null},we.cloneElement=function(P,te,le){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var ce=B({},P.props),Se=P.key;if(te!=null)for(Ie in te.key!==void 0&&(Se=""+te.key),te)!R.call(te,Ie)||Ie==="key"||Ie==="__self"||Ie==="__source"||Ie==="ref"&&te.ref===void 0||(ce[Ie]=te[Ie]);var Ie=arguments.length-2;if(Ie===1)ce.children=le;else if(1<Ie){for(var je=Array(Ie),Ut=0;Ut<Ie;Ut++)je[Ut]=arguments[Ut+2];ce.children=je}return x(P.type,Se,ce)},we.createContext=function(P){return P={$$typeof:c,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:u,_context:P},P},we.createElement=function(P,te,le){var ce,Se={},Ie=null;if(te!=null)for(ce in te.key!==void 0&&(Ie=""+te.key),te)R.call(te,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(Se[ce]=te[ce]);var je=arguments.length-2;if(je===1)Se.children=le;else if(1<je){for(var Ut=Array(je),ut=0;ut<je;ut++)Ut[ut]=arguments[ut+2];Se.children=Ut}if(P&&P.defaultProps)for(ce in je=P.defaultProps,je)Se[ce]===void 0&&(Se[ce]=je[ce]);return x(P,Ie,Se)},we.createRef=function(){return{current:null}},we.forwardRef=function(P){return{$$typeof:m,render:P}},we.isValidElement=V,we.lazy=function(P){return{$$typeof:v,_payload:{_status:-1,_result:P},_init:ge}},we.memo=function(P,te){return{$$typeof:g,type:P,compare:te===void 0?null:te}},we.startTransition=function(P){var te=I.T,le={};I.T=le;try{var ce=P(),Se=I.S;Se!==null&&Se(le,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(ae,Be)}catch(Ie){Be(Ie)}finally{te!==null&&le.types!==null&&(te.types=le.types),I.T=te}},we.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},we.use=function(P){return I.H.use(P)},we.useActionState=function(P,te,le){return I.H.useActionState(P,te,le)},we.useCallback=function(P,te){return I.H.useCallback(P,te)},we.useContext=function(P){return I.H.useContext(P)},we.useDebugValue=function(){},we.useDeferredValue=function(P,te){return I.H.useDeferredValue(P,te)},we.useEffect=function(P,te){return I.H.useEffect(P,te)},we.useEffectEvent=function(P){return I.H.useEffectEvent(P)},we.useId=function(){return I.H.useId()},we.useImperativeHandle=function(P,te,le){return I.H.useImperativeHandle(P,te,le)},we.useInsertionEffect=function(P,te){return I.H.useInsertionEffect(P,te)},we.useLayoutEffect=function(P,te){return I.H.useLayoutEffect(P,te)},we.useMemo=function(P,te){return I.H.useMemo(P,te)},we.useOptimistic=function(P,te){return I.H.useOptimistic(P,te)},we.useReducer=function(P,te,le){return I.H.useReducer(P,te,le)},we.useRef=function(P){return I.H.useRef(P)},we.useState=function(P){return I.H.useState(P)},we.useSyncExternalStore=function(P,te,le){return I.H.useSyncExternalStore(P,te,le)},we.useTransition=function(){return I.H.useTransition()},we.version="19.2.0",we}var ME;function Gp(){return ME||(ME=1,Qm.exports=fR()),Qm.exports}var L=Gp();const dR=x0(L);var Ym={exports:{}},ou={},$m={exports:{}},Xm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VE;function mR(){return VE||(VE=1,(function(i){function e(J,oe){var ge=J.length;J.push(oe);e:for(;0<ge;){var Be=ge-1>>>1,Qe=J[Be];if(0<o(Qe,oe))J[Be]=oe,J[ge]=Qe,ge=Be;else break e}}function n(J){return J.length===0?null:J[0]}function s(J){if(J.length===0)return null;var oe=J[0],ge=J.pop();if(ge!==oe){J[0]=ge;e:for(var Be=0,Qe=J.length,P=Qe>>>1;Be<P;){var te=2*(Be+1)-1,le=J[te],ce=te+1,Se=J[ce];if(0>o(le,ge))ce<Qe&&0>o(Se,le)?(J[Be]=Se,J[ce]=ge,Be=ce):(J[Be]=le,J[te]=ge,Be=te);else if(ce<Qe&&0>o(Se,ge))J[Be]=Se,J[ce]=ge,Be=ce;else break e}}return oe}function o(J,oe){var ge=J.sortIndex-oe.sortIndex;return ge!==0?ge:J.id-oe.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var c=Date,m=c.now();i.unstable_now=function(){return c.now()-m}}var p=[],g=[],v=1,b=null,A=3,C=!1,D=!1,B=!1,M=!1,Y=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,ie=typeof setImmediate<"u"?setImmediate:null;function he(J){for(var oe=n(g);oe!==null;){if(oe.callback===null)s(g);else if(oe.startTime<=J)s(g),oe.sortIndex=oe.expirationTime,e(p,oe);else break;oe=n(g)}}function Ee(J){if(B=!1,he(J),!D)if(n(p)!==null)D=!0,ae||(ae=!0,j());else{var oe=n(g);oe!==null&&Lt(Ee,oe.startTime-J)}}var ae=!1,I=-1,R=5,x=-1;function U(){return M?!0:!(i.unstable_now()-x<R)}function V(){if(M=!1,ae){var J=i.unstable_now();x=J;var oe=!0;try{e:{D=!1,B&&(B=!1,$(I),I=-1),C=!0;var ge=A;try{t:{for(he(J),b=n(p);b!==null&&!(b.expirationTime>J&&U());){var Be=b.callback;if(typeof Be=="function"){b.callback=null,A=b.priorityLevel;var Qe=Be(b.expirationTime<=J);if(J=i.unstable_now(),typeof Qe=="function"){b.callback=Qe,he(J),oe=!0;break t}b===n(p)&&s(p),he(J)}else s(p);b=n(p)}if(b!==null)oe=!0;else{var P=n(g);P!==null&&Lt(Ee,P.startTime-J),oe=!1}}break e}finally{b=null,A=ge,C=!1}oe=void 0}}finally{oe?j():ae=!1}}}var j;if(typeof ie=="function")j=function(){ie(V)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,Ke=N.port2;N.port1.onmessage=V,j=function(){Ke.postMessage(null)}}else j=function(){Y(V,0)};function Lt(J,oe){I=Y(function(){J(i.unstable_now())},oe)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(J){J.callback=null},i.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<J?Math.floor(1e3/J):5},i.unstable_getCurrentPriorityLevel=function(){return A},i.unstable_next=function(J){switch(A){case 1:case 2:case 3:var oe=3;break;default:oe=A}var ge=A;A=oe;try{return J()}finally{A=ge}},i.unstable_requestPaint=function(){M=!0},i.unstable_runWithPriority=function(J,oe){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ge=A;A=J;try{return oe()}finally{A=ge}},i.unstable_scheduleCallback=function(J,oe,ge){var Be=i.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?Be+ge:Be):ge=Be,J){case 1:var Qe=-1;break;case 2:Qe=250;break;case 5:Qe=1073741823;break;case 4:Qe=1e4;break;default:Qe=5e3}return Qe=ge+Qe,J={id:v++,callback:oe,priorityLevel:J,startTime:ge,expirationTime:Qe,sortIndex:-1},ge>Be?(J.sortIndex=ge,e(g,J),n(p)===null&&J===n(g)&&(B?($(I),I=-1):B=!0,Lt(Ee,ge-Be))):(J.sortIndex=Qe,e(p,J),D||C||(D=!0,ae||(ae=!0,j()))),J},i.unstable_shouldYield=U,i.unstable_wrapCallback=function(J){var oe=A;return function(){var ge=A;A=oe;try{return J.apply(this,arguments)}finally{A=ge}}}})(Xm)),Xm}var kE;function pR(){return kE||(kE=1,$m.exports=mR()),$m.exports}var Wm={exports:{}},on={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PE;function gR(){if(PE)return on;PE=1;var i=Gp();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,g,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:p,containerInfo:g,implementation:v}}var c=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return on.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,on.createPortal=function(p,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return u(p,g,null,v)},on.flushSync=function(p){var g=c.T,v=s.p;try{if(c.T=null,s.p=2,p)return p()}finally{c.T=g,s.p=v,s.d.f()}},on.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(p,g))},on.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},on.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var v=g.as,b=m(v,g.crossOrigin),A=typeof g.integrity=="string"?g.integrity:void 0,C=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?s.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:b,integrity:A,fetchPriority:C}):v==="script"&&s.d.X(p,{crossOrigin:b,integrity:A,fetchPriority:C,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},on.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=m(g.as,g.crossOrigin);s.d.M(p,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(p)},on.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,b=m(v,g.crossOrigin);s.d.L(p,v,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},on.preloadModule=function(p,g){if(typeof p=="string")if(g){var v=m(g.as,g.crossOrigin);s.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(p)},on.requestFormReset=function(p){s.d.r(p)},on.unstable_batchedUpdates=function(p,g){return p(g)},on.useFormState=function(p,g,v){return c.H.useFormState(p,g,v)},on.useFormStatus=function(){return c.H.useHostTransitionStatus()},on.version="19.2.0",on}var LE;function yR(){if(LE)return Wm.exports;LE=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Wm.exports=gR(),Wm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UE;function _R(){if(UE)return ou;UE=1;var i=pR(),e=Gp(),n=yR();function s(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function c(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function m(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function p(t){if(u(t)!==t)throw Error(s(188))}function g(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(s(188));return r!==t?null:t}for(var a=t,l=r;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return p(f),t;if(d===l)return p(f),r;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=f,l=d;else{for(var _=!1,S=f.child;S;){if(S===a){_=!0,a=f,l=d;break}if(S===l){_=!0,l=f,a=d;break}S=S.sibling}if(!_){for(S=d.child;S;){if(S===a){_=!0,a=d,l=f;break}if(S===l){_=!0,l=d,a=f;break}S=S.sibling}if(!_)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:r}function v(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=v(t),r!==null)return r;t=t.sibling}return null}var b=Object.assign,A=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),ie=Symbol.for("react.context"),he=Symbol.for("react.forward_ref"),Ee=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function j(t){return t===null||typeof t!="object"?null:(t=V&&t[V]||t["@@iterator"],typeof t=="function"?t:null)}var N=Symbol.for("react.client.reference");function Ke(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===N?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case B:return"Fragment";case Y:return"Profiler";case M:return"StrictMode";case Ee:return"Suspense";case ae:return"SuspenseList";case x:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case D:return"Portal";case ie:return t.displayName||"Context";case $:return(t._context.displayName||"Context")+".Consumer";case he:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I:return r=t.displayName||null,r!==null?r:Ke(t.type)||"Memo";case R:r=t._payload,t=t._init;try{return Ke(t(r))}catch{}}return null}var Lt=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},Be=[],Qe=-1;function P(t){return{current:t}}function te(t){0>Qe||(t.current=Be[Qe],Be[Qe]=null,Qe--)}function le(t,r){Qe++,Be[Qe]=t.current,t.current=r}var ce=P(null),Se=P(null),Ie=P(null),je=P(null);function Ut(t,r){switch(le(Ie,r),le(Se,t),le(ce,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?Zv(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=Zv(r),t=eE(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}te(ce),le(ce,t)}function ut(){te(ce),te(Se),te(Ie)}function qs(t){t.memoizedState!==null&&le(je,t);var r=ce.current,a=eE(r,t.type);r!==a&&(le(Se,t),le(ce,a))}function La(t){Se.current===t&&(te(ce),te(Se)),je.current===t&&(te(je),nu._currentValue=ge)}var Ua,ja;function Ti(t){if(Ua===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Ua=r&&r[1]||"",ja=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ua+t+ja}var nl=!1;function Hs(t,r){if(!t||nl)return"";nl=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(Q){var G=Q}Reflect.construct(t,[],ee)}else{try{ee.call()}catch(Q){G=Q}t.call(ee.prototype)}}else{try{throw Error()}catch(Q){G=Q}(ee=t())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(Q){if(Q&&G&&typeof Q.stack=="string")return[Q.stack,G.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),_=d[0],S=d[1];if(_&&S){var O=_.split(`
`),F=S.split(`
`);for(f=l=0;l<O.length&&!O[l].includes("DetermineComponentFrameRoot");)l++;for(;f<F.length&&!F[f].includes("DetermineComponentFrameRoot");)f++;if(l===O.length||f===F.length)for(l=O.length-1,f=F.length-1;1<=l&&0<=f&&O[l]!==F[f];)f--;for(;1<=l&&0<=f;l--,f--)if(O[l]!==F[f]){if(l!==1||f!==1)do if(l--,f--,0>f||O[l]!==F[f]){var W=`
`+O[l].replace(" at new "," at ");return t.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",t.displayName)),W}while(1<=l&&0<=f);break}}}finally{nl=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Ti(a):""}function il(t,r){switch(t.tag){case 26:case 27:case 5:return Ti(t.type);case 16:return Ti("Lazy");case 13:return t.child!==r&&r!==null?Ti("Suspense Fallback"):Ti("Suspense");case 19:return Ti("SuspenseList");case 0:case 15:return Hs(t.type,!1);case 11:return Hs(t.type.render,!1);case 1:return Hs(t.type,!0);case 31:return Ti("Activity");default:return""}}function rl(t){try{var r="",a=null;do r+=il(t,a),a=t,t=t.return;while(t);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var St=Object.prototype.hasOwnProperty,jt=i.unstable_scheduleCallback,jr=i.unstable_cancelCallback,Yf=i.unstable_shouldYield,Zu=i.unstable_requestPaint,fn=i.unstable_now,Fs=i.unstable_getCurrentPriorityLevel,sl=i.unstable_ImmediatePriority,al=i.unstable_UserBlockingPriority,zr=i.unstable_NormalPriority,$f=i.unstable_LowPriority,ec=i.unstable_IdlePriority,tc=i.log,nc=i.unstable_setDisableYieldValue,ei=null,Yt=null;function zn(t){if(typeof tc=="function"&&nc(t),Yt&&typeof Yt.setStrictMode=="function")try{Yt.setStrictMode(ei,t)}catch{}}var vt=Math.clz32?Math.clz32:rc,ic=Math.log,za=Math.LN2;function rc(t){return t>>>=0,t===0?32:31-(ic(t)/za|0)|0}var bi=256,Gs=262144,wt=4194304;function Ai(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Si(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var f=0,d=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var S=l&134217727;return S!==0?(l=S&~d,l!==0?f=Ai(l):(_&=S,_!==0?f=Ai(_):a||(a=S&~t,a!==0&&(f=Ai(a))))):(S=l&~d,S!==0?f=Ai(S):_!==0?f=Ai(_):a||(a=l&~t,a!==0&&(f=Ai(a)))),f===0?0:r!==0&&r!==f&&(r&d)===0&&(d=f&-f,a=r&-r,d>=a||d===32&&(a&4194048)!==0)?r:f}function ti(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function Xf(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sc(){var t=wt;return wt<<=1,(wt&62914560)===0&&(wt=4194304),t}function wi(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function Ks(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Wf(t,r,a,l,f,d){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var S=t.entanglements,O=t.expirationTimes,F=t.hiddenUpdates;for(a=_&~a;0<a;){var W=31-vt(a),ee=1<<W;S[W]=0,O[W]=-1;var G=F[W];if(G!==null)for(F[W]=null,W=0;W<G.length;W++){var Q=G[W];Q!==null&&(Q.lane&=-536870913)}a&=~ee}l!==0&&Qs(t,l,0),d!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=d&~(_&~r))}function Qs(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-vt(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function ol(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-vt(a),f=1<<l;f&r|t[l]&r&&(t[l]|=r),a&=~f}}function ll(t,r){var a=r&-r;return a=(a&42)!==0?1:Ys(a),(a&(t.suspendedLanes|r))!==0?0:a}function Ys(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function rr(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function ac(){var t=oe.p;return t!==0?t:(t=window.event,t===void 0?32:AE(t.type))}function ni(t,r){var a=oe.p;try{return oe.p=t,r()}finally{oe.p=a}}var ii=Math.random().toString(36).slice(2),Rt="__reactFiber$"+ii,qt="__reactProps$"+ii,Ri="__reactContainer$"+ii,Ba="__reactEvents$"+ii,Jf="__reactListeners$"+ii,oc="__reactHandles$"+ii,lc="__reactResources$"+ii,Ci="__reactMarker$"+ii;function qa(t){delete t[Rt],delete t[qt],delete t[Ba],delete t[Jf],delete t[oc]}function Ii(t){var r=t[Rt];if(r)return r;for(var a=t.parentNode;a;){if(r=a[Ri]||a[Rt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=oE(t);t!==null;){if(a=t[Rt])return a;t=oE(t)}return r}t=a,a=t.parentNode}return null}function Bn(t){if(t=t[Rt]||t[Ri]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function Cn(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(s(33))}function xi(t){var r=t[lc];return r||(r=t[lc]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Ct(t){t[Ci]=!0}var ul=new Set,cl={};function Di(t,r){Ni(t,r),Ni(t+"Capture",r)}function Ni(t,r){for(cl[t]=r,t=0;t<r.length;t++)ul.add(r[t])}var hl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),fl={},dl={};function uc(t){return St.call(dl,t)?!0:St.call(fl,t)?!1:hl.test(t)?dl[t]=!0:(fl[t]=!0,!1)}function Ha(t,r,a){if(uc(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function In(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function It(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}function Ht(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Br(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function ml(t,r,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,d=l.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return f.call(this)},set:function(_){a=""+_,d.call(this,_)}}),Object.defineProperty(t,r,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Ye(t){if(!t._valueTracker){var r=Br(t)?"checked":"value";t._valueTracker=ml(t,r,""+t[r])}}function $s(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=Br(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function Oi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Xs=/[\n"\\]/g;function _n(t){return t.replace(Xs,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Fa(t,r,a,l,f,d,_,S){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),r!=null?_==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+Ht(r)):t.value!==""+Ht(r)&&(t.value=""+Ht(r)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),r!=null?pl(t,_,Ht(r)):a!=null?pl(t,_,Ht(a)):l!=null&&t.removeAttribute("value"),f==null&&d!=null&&(t.defaultChecked=!!d),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.name=""+Ht(S):t.removeAttribute("name")}function cc(t,r,a,l,f,d,_,S){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),r!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||r!=null)){Ye(t);return}a=a!=null?""+Ht(a):"",r=r!=null?""+Ht(r):a,S||r===t.value||(t.value=r),t.defaultValue=r}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=S?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),Ye(t)}function pl(t,r,a){r==="number"&&Oi(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function qr(t,r,a,l){if(t=t.options,r){r={};for(var f=0;f<a.length;f++)r["$"+a[f]]=!0;for(a=0;a<t.length;a++)f=r.hasOwnProperty("$"+t[a].value),t[a].selected!==f&&(t[a].selected=f),f&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Ht(a),r=null,f=0;f<t.length;f++){if(t[f].value===a){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}r!==null||t[f].disabled||(r=t[f])}r!==null&&(r.selected=!0)}}function hc(t,r,a){if(r!=null&&(r=""+Ht(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+Ht(a):""}function Hr(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(Lt(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=Ht(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),Ye(t)}function vn(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var fc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gl(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||fc.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function yl(t,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var f in r)l=r[f],r.hasOwnProperty(f)&&a[f]!==l&&gl(t,f,l)}else for(var d in r)r.hasOwnProperty(d)&&gl(t,d,r[d])}function Ga(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Fr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ka(t){return Fr.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ri(){}var _l=null;function qn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Gr=null,Mi=null;function Ws(t){var r=Bn(t);if(r&&(t=r.stateNode)){var a=t[qt]||null;e:switch(t=r.stateNode,r.type){case"input":if(Fa(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+_n(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var f=l[qt]||null;if(!f)throw Error(s(90));Fa(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&$s(l)}break e;case"textarea":hc(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&qr(t,!!a.multiple,r,!1)}}}var Qa=!1;function Kr(t,r,a){if(Qa)return t(r,a);Qa=!0;try{var l=t(r);return l}finally{if(Qa=!1,(Gr!==null||Mi!==null)&&(ah(),Gr&&(r=Gr,t=Mi,Mi=Gr=null,Ws(r),t)))for(r=0;r<t.length;r++)Ws(t[r])}}function si(t,r){var a=t.stateNode;if(a===null)return null;var l=a[qt]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var Hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Js=!1;if(Hn)try{var Je={};Object.defineProperty(Je,"passive",{get:function(){Js=!0}}),window.addEventListener("test",Je,Je),window.removeEventListener("test",Je,Je)}catch{Js=!1}var Vi=null,vl=null,Zs=null;function El(){if(Zs)return Zs;var t,r=vl,a=r.length,l,f="value"in Vi?Vi.value:Vi.textContent,d=f.length;for(t=0;t<a&&r[t]===f[t];t++);var _=a-t;for(l=1;l<=_&&r[a-l]===f[d-l];l++);return Zs=f.slice(t,1<l?1-l:void 0)}function ea(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function sr(){return!0}function ai(){return!1}function $t(t){function r(a,l,f,d,_){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var S in t)t.hasOwnProperty(S)&&(a=t[S],this[S]=a?a(d):d[S]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?sr:ai,this.isPropagationStopped=ai,this}return b(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=sr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=sr)},persist:function(){},isPersistent:sr}),r}var ar={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ki=$t(ar),Qr=b({},ar,{view:0,detail:0}),Tl=$t(Qr),Yr,Ya,Pi,$a=b({},Qr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$r,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Pi&&(Pi&&t.type==="mousemove"?(Yr=t.screenX-Pi.screenX,Ya=t.screenY-Pi.screenY):Ya=Yr=0,Pi=t),Yr)},movementY:function(t){return"movementY"in t?t.movementY:Ya}}),bl=$t($a),ta=b({},$a,{dataTransfer:0}),mc=$t(ta),pc=b({},Qr,{relatedTarget:0}),na=$t(pc),Al=b({},ar,{animationName:0,elapsedTime:0,pseudoElement:0}),gc=$t(Al),Xa=b({},ar,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),yc=$t(Xa),_c=b({},ar,{data:0}),Li=$t(_c),vc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ec={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bc(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Tc[t])?!!r[t]:!1}function $r(){return bc}var dn=b({},Qr,{key:function(t){if(t.key){var r=vc[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=ea(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ec[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$r,charCode:function(t){return t.type==="keypress"?ea(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ea(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ac=$t(dn),Sc=b({},$a,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),or=$t(Sc),h=b({},Qr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$r}),y=$t(h),T=b({},ar,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=$t(T),q=b({},$a,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),K=$t(q),se=b({},ar,{newState:0,oldState:0}),Re=$t(se),Et=[9,13,27,32],Fe=Hn&&"CompositionEvent"in window,ct=null;Hn&&"documentMode"in document&&(ct=document.documentMode);var Fn=Hn&&"TextEvent"in window&&!ct,Ui=Hn&&(!Fe||ct&&8<ct&&11>=ct),oi=" ",li=!1;function ia(t,r){switch(t){case"keyup":return Et.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wa(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ja=!1;function VS(t,r){switch(t){case"compositionend":return Wa(r);case"keypress":return r.which!==32?null:(li=!0,oi);case"textInput":return t=r.data,t===oi&&li?null:t;default:return null}}function kS(t,r){if(Ja)return t==="compositionend"||!Fe&&ia(t,r)?(t=El(),Zs=vl=Vi=null,Ja=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Ui&&r.locale!=="ko"?null:r.data;default:return null}}var PS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cy(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!PS[t.type]:r==="textarea"}function hy(t,r,a,l){Gr?Mi?Mi.push(l):Mi=[l]:Gr=l,r=dh(r,"onChange"),0<r.length&&(a=new ki("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var Sl=null,wl=null;function LS(t){Qv(t,0)}function wc(t){var r=Cn(t);if($s(r))return t}function fy(t,r){if(t==="change")return r}var dy=!1;if(Hn){var Zf;if(Hn){var ed="oninput"in document;if(!ed){var my=document.createElement("div");my.setAttribute("oninput","return;"),ed=typeof my.oninput=="function"}Zf=ed}else Zf=!1;dy=Zf&&(!document.documentMode||9<document.documentMode)}function py(){Sl&&(Sl.detachEvent("onpropertychange",gy),wl=Sl=null)}function gy(t){if(t.propertyName==="value"&&wc(wl)){var r=[];hy(r,wl,t,qn(t)),Kr(LS,r)}}function US(t,r,a){t==="focusin"?(py(),Sl=r,wl=a,Sl.attachEvent("onpropertychange",gy)):t==="focusout"&&py()}function jS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return wc(wl)}function zS(t,r){if(t==="click")return wc(r)}function BS(t,r){if(t==="input"||t==="change")return wc(r)}function qS(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var xn=typeof Object.is=="function"?Object.is:qS;function Rl(t,r){if(xn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!St.call(r,f)||!xn(t[f],r[f]))return!1}return!0}function yy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function _y(t,r){var a=yy(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=yy(a)}}function vy(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?vy(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Ey(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Oi(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=Oi(t.document)}return r}function td(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var HS=Hn&&"documentMode"in document&&11>=document.documentMode,Za=null,nd=null,Cl=null,id=!1;function Ty(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;id||Za==null||Za!==Oi(l)||(l=Za,"selectionStart"in l&&td(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Cl&&Rl(Cl,l)||(Cl=l,l=dh(nd,"onSelect"),0<l.length&&(r=new ki("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=Za)))}function ra(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var eo={animationend:ra("Animation","AnimationEnd"),animationiteration:ra("Animation","AnimationIteration"),animationstart:ra("Animation","AnimationStart"),transitionrun:ra("Transition","TransitionRun"),transitionstart:ra("Transition","TransitionStart"),transitioncancel:ra("Transition","TransitionCancel"),transitionend:ra("Transition","TransitionEnd")},rd={},by={};Hn&&(by=document.createElement("div").style,"AnimationEvent"in window||(delete eo.animationend.animation,delete eo.animationiteration.animation,delete eo.animationstart.animation),"TransitionEvent"in window||delete eo.transitionend.transition);function sa(t){if(rd[t])return rd[t];if(!eo[t])return t;var r=eo[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in by)return rd[t]=r[a];return t}var Ay=sa("animationend"),Sy=sa("animationiteration"),wy=sa("animationstart"),FS=sa("transitionrun"),GS=sa("transitionstart"),KS=sa("transitioncancel"),Ry=sa("transitionend"),Cy=new Map,sd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");sd.push("scrollEnd");function ui(t,r){Cy.set(t,r),Di(r,[t])}var Rc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Gn=[],to=0,ad=0;function Cc(){for(var t=to,r=ad=to=0;r<t;){var a=Gn[r];Gn[r++]=null;var l=Gn[r];Gn[r++]=null;var f=Gn[r];Gn[r++]=null;var d=Gn[r];if(Gn[r++]=null,l!==null&&f!==null){var _=l.pending;_===null?f.next=f:(f.next=_.next,_.next=f),l.pending=f}d!==0&&Iy(a,f,d)}}function Ic(t,r,a,l){Gn[to++]=t,Gn[to++]=r,Gn[to++]=a,Gn[to++]=l,ad|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function od(t,r,a,l){return Ic(t,r,a,l),xc(t)}function aa(t,r){return Ic(t,null,null,r),xc(t)}function Iy(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(f=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,f&&r!==null&&(f=31-vt(a),t=d.hiddenUpdates,l=t[f],l===null?t[f]=[r]:l.push(r),r.lane=a|536870912),d):null}function xc(t){if(50<$l)throw $l=0,gm=null,Error(s(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var no={};function QS(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(t,r,a,l){return new QS(t,r,a,l)}function ld(t){return t=t.prototype,!(!t||!t.isReactComponent)}function lr(t,r){var a=t.alternate;return a===null?(a=Dn(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function xy(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function Dc(t,r,a,l,f,d){var _=0;if(l=t,typeof t=="function")ld(t)&&(_=1);else if(typeof t=="string")_=Jw(t,a,ce.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case x:return t=Dn(31,a,r,f),t.elementType=x,t.lanes=d,t;case B:return oa(a.children,f,d,r);case M:_=8,f|=24;break;case Y:return t=Dn(12,a,r,f|2),t.elementType=Y,t.lanes=d,t;case Ee:return t=Dn(13,a,r,f),t.elementType=Ee,t.lanes=d,t;case ae:return t=Dn(19,a,r,f),t.elementType=ae,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ie:_=10;break e;case $:_=9;break e;case he:_=11;break e;case I:_=14;break e;case R:_=16,l=null;break e}_=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return r=Dn(_,a,r,f),r.elementType=t,r.type=l,r.lanes=d,r}function oa(t,r,a,l){return t=Dn(7,t,l,r),t.lanes=a,t}function ud(t,r,a){return t=Dn(6,t,null,r),t.lanes=a,t}function Dy(t){var r=Dn(18,null,null,0);return r.stateNode=t,r}function cd(t,r,a){return r=Dn(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var Ny=new WeakMap;function Kn(t,r){if(typeof t=="object"&&t!==null){var a=Ny.get(t);return a!==void 0?a:(r={value:t,source:r,stack:rl(r)},Ny.set(t,r),r)}return{value:t,source:r,stack:rl(r)}}var io=[],ro=0,Nc=null,Il=0,Qn=[],Yn=0,Xr=null,ji=1,zi="";function ur(t,r){io[ro++]=Il,io[ro++]=Nc,Nc=t,Il=r}function Oy(t,r,a){Qn[Yn++]=ji,Qn[Yn++]=zi,Qn[Yn++]=Xr,Xr=t;var l=ji;t=zi;var f=32-vt(l)-1;l&=~(1<<f),a+=1;var d=32-vt(r)+f;if(30<d){var _=f-f%5;d=(l&(1<<_)-1).toString(32),l>>=_,f-=_,ji=1<<32-vt(r)+f|a<<f|l,zi=d+t}else ji=1<<d|a<<f|l,zi=t}function hd(t){t.return!==null&&(ur(t,1),Oy(t,1,0))}function fd(t){for(;t===Nc;)Nc=io[--ro],io[ro]=null,Il=io[--ro],io[ro]=null;for(;t===Xr;)Xr=Qn[--Yn],Qn[Yn]=null,zi=Qn[--Yn],Qn[Yn]=null,ji=Qn[--Yn],Qn[Yn]=null}function My(t,r){Qn[Yn++]=ji,Qn[Yn++]=zi,Qn[Yn++]=Xr,ji=r.id,zi=r.overflow,Xr=t}var Xt=null,at=null,Le=!1,Wr=null,$n=!1,dd=Error(s(519));function Jr(t){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw xl(Kn(r,t)),dd}function Vy(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[Rt]=t,r[qt]=l,a){case"dialog":Ne("cancel",r),Ne("close",r);break;case"iframe":case"object":case"embed":Ne("load",r);break;case"video":case"audio":for(a=0;a<Wl.length;a++)Ne(Wl[a],r);break;case"source":Ne("error",r);break;case"img":case"image":case"link":Ne("error",r),Ne("load",r);break;case"details":Ne("toggle",r);break;case"input":Ne("invalid",r),cc(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Ne("invalid",r);break;case"textarea":Ne("invalid",r),Hr(r,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||Wv(r.textContent,a)?(l.popover!=null&&(Ne("beforetoggle",r),Ne("toggle",r)),l.onScroll!=null&&Ne("scroll",r),l.onScrollEnd!=null&&Ne("scrollend",r),l.onClick!=null&&(r.onclick=ri),r=!0):r=!1,r||Jr(t,!0)}function ky(t){for(Xt=t.return;Xt;)switch(Xt.tag){case 5:case 31:case 13:$n=!1;return;case 27:case 3:$n=!0;return;default:Xt=Xt.return}}function so(t){if(t!==Xt)return!1;if(!Le)return ky(t),Le=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Nm(t.type,t.memoizedProps)),a=!a),a&&at&&Jr(t),ky(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));at=aE(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));at=aE(t)}else r===27?(r=at,fs(t.type)?(t=Pm,Pm=null,at=t):at=r):at=Xt?Wn(t.stateNode.nextSibling):null;return!0}function la(){at=Xt=null,Le=!1}function md(){var t=Wr;return t!==null&&(An===null?An=t:An.push.apply(An,t),Wr=null),t}function xl(t){Wr===null?Wr=[t]:Wr.push(t)}var pd=P(null),ua=null,cr=null;function Zr(t,r,a){le(pd,r._currentValue),r._currentValue=a}function hr(t){t._currentValue=pd.current,te(pd)}function gd(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function yd(t,r,a,l){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var d=f.dependencies;if(d!==null){var _=f.child;d=d.firstContext;e:for(;d!==null;){var S=d;d=f;for(var O=0;O<r.length;O++)if(S.context===r[O]){d.lanes|=a,S=d.alternate,S!==null&&(S.lanes|=a),gd(d.return,a,t),l||(_=null);break e}d=S.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(s(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),gd(_,a,t),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===t){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function ao(t,r,a,l){t=null;for(var f=r,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var S=f.type;xn(f.pendingProps.value,_.value)||(t!==null?t.push(S):t=[S])}}else if(f===je.current){if(_=f.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(nu):t=[nu])}f=f.return}t!==null&&yd(r,t,a,l),r.flags|=262144}function Oc(t){for(t=t.firstContext;t!==null;){if(!xn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ca(t){ua=t,cr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Wt(t){return Py(ua,t)}function Mc(t,r){return ua===null&&ca(t),Py(t,r)}function Py(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},cr===null){if(t===null)throw Error(s(308));cr=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else cr=cr.next=r;return a}var YS=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},$S=i.unstable_scheduleCallback,XS=i.unstable_NormalPriority,xt={$$typeof:ie,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _d(){return{controller:new YS,data:new Map,refCount:0}}function Dl(t){t.refCount--,t.refCount===0&&$S(XS,function(){t.controller.abort()})}var Nl=null,vd=0,oo=0,lo=null;function WS(t,r){if(Nl===null){var a=Nl=[];vd=0,oo=bm(),lo={status:"pending",value:void 0,then:function(l){a.push(l)}}}return vd++,r.then(Ly,Ly),r}function Ly(){if(--vd===0&&Nl!==null){lo!==null&&(lo.status="fulfilled");var t=Nl;Nl=null,oo=0,lo=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function JS(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var f=0;f<a.length;f++)(0,a[f])(r)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var Uy=J.S;J.S=function(t,r){Tv=fn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&WS(t,r),Uy!==null&&Uy(t,r)};var ha=P(null);function Ed(){var t=ha.current;return t!==null?t:nt.pooledCache}function Vc(t,r){r===null?le(ha,ha.current):le(ha,r.pool)}function jy(){var t=Ed();return t===null?null:{parent:xt._currentValue,pool:t}}var uo=Error(s(460)),Td=Error(s(474)),kc=Error(s(542)),Pc={then:function(){}};function zy(t){return t=t.status,t==="fulfilled"||t==="rejected"}function By(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(ri,ri),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Hy(t),t;default:if(typeof r.status=="string")r.then(ri,ri);else{if(t=nt,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=l}},function(l){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Hy(t),t}throw da=r,uo}}function fa(t){try{var r=t._init;return r(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(da=a,uo):a}}var da=null;function qy(){if(da===null)throw Error(s(459));var t=da;return da=null,t}function Hy(t){if(t===uo||t===kc)throw Error(s(483))}var co=null,Ol=0;function Lc(t){var r=Ol;return Ol+=1,co===null&&(co=[]),By(co,t,r)}function Ml(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function Uc(t,r){throw r.$$typeof===A?Error(s(525)):(t=Object.prototype.toString.call(r),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function Fy(t){function r(z,k){if(t){var H=z.deletions;H===null?(z.deletions=[k],z.flags|=16):H.push(k)}}function a(z,k){if(!t)return null;for(;k!==null;)r(z,k),k=k.sibling;return null}function l(z){for(var k=new Map;z!==null;)z.key!==null?k.set(z.key,z):k.set(z.index,z),z=z.sibling;return k}function f(z,k){return z=lr(z,k),z.index=0,z.sibling=null,z}function d(z,k,H){return z.index=H,t?(H=z.alternate,H!==null?(H=H.index,H<k?(z.flags|=67108866,k):H):(z.flags|=67108866,k)):(z.flags|=1048576,k)}function _(z){return t&&z.alternate===null&&(z.flags|=67108866),z}function S(z,k,H,Z){return k===null||k.tag!==6?(k=ud(H,z.mode,Z),k.return=z,k):(k=f(k,H),k.return=z,k)}function O(z,k,H,Z){var pe=H.type;return pe===B?W(z,k,H.props.children,Z,H.key):k!==null&&(k.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===R&&fa(pe)===k.type)?(k=f(k,H.props),Ml(k,H),k.return=z,k):(k=Dc(H.type,H.key,H.props,null,z.mode,Z),Ml(k,H),k.return=z,k)}function F(z,k,H,Z){return k===null||k.tag!==4||k.stateNode.containerInfo!==H.containerInfo||k.stateNode.implementation!==H.implementation?(k=cd(H,z.mode,Z),k.return=z,k):(k=f(k,H.children||[]),k.return=z,k)}function W(z,k,H,Z,pe){return k===null||k.tag!==7?(k=oa(H,z.mode,Z,pe),k.return=z,k):(k=f(k,H),k.return=z,k)}function ee(z,k,H){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=ud(""+k,z.mode,H),k.return=z,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case C:return H=Dc(k.type,k.key,k.props,null,z.mode,H),Ml(H,k),H.return=z,H;case D:return k=cd(k,z.mode,H),k.return=z,k;case R:return k=fa(k),ee(z,k,H)}if(Lt(k)||j(k))return k=oa(k,z.mode,H,null),k.return=z,k;if(typeof k.then=="function")return ee(z,Lc(k),H);if(k.$$typeof===ie)return ee(z,Mc(z,k),H);Uc(z,k)}return null}function G(z,k,H,Z){var pe=k!==null?k.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return pe!==null?null:S(z,k,""+H,Z);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case C:return H.key===pe?O(z,k,H,Z):null;case D:return H.key===pe?F(z,k,H,Z):null;case R:return H=fa(H),G(z,k,H,Z)}if(Lt(H)||j(H))return pe!==null?null:W(z,k,H,Z,null);if(typeof H.then=="function")return G(z,k,Lc(H),Z);if(H.$$typeof===ie)return G(z,k,Mc(z,H),Z);Uc(z,H)}return null}function Q(z,k,H,Z,pe){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return z=z.get(H)||null,S(k,z,""+Z,pe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case C:return z=z.get(Z.key===null?H:Z.key)||null,O(k,z,Z,pe);case D:return z=z.get(Z.key===null?H:Z.key)||null,F(k,z,Z,pe);case R:return Z=fa(Z),Q(z,k,H,Z,pe)}if(Lt(Z)||j(Z))return z=z.get(H)||null,W(k,z,Z,pe,null);if(typeof Z.then=="function")return Q(z,k,H,Lc(Z),pe);if(Z.$$typeof===ie)return Q(z,k,H,Mc(k,Z),pe);Uc(k,Z)}return null}function fe(z,k,H,Z){for(var pe=null,qe=null,de=k,xe=k=0,Me=null;de!==null&&xe<H.length;xe++){de.index>xe?(Me=de,de=null):Me=de.sibling;var He=G(z,de,H[xe],Z);if(He===null){de===null&&(de=Me);break}t&&de&&He.alternate===null&&r(z,de),k=d(He,k,xe),qe===null?pe=He:qe.sibling=He,qe=He,de=Me}if(xe===H.length)return a(z,de),Le&&ur(z,xe),pe;if(de===null){for(;xe<H.length;xe++)de=ee(z,H[xe],Z),de!==null&&(k=d(de,k,xe),qe===null?pe=de:qe.sibling=de,qe=de);return Le&&ur(z,xe),pe}for(de=l(de);xe<H.length;xe++)Me=Q(de,z,xe,H[xe],Z),Me!==null&&(t&&Me.alternate!==null&&de.delete(Me.key===null?xe:Me.key),k=d(Me,k,xe),qe===null?pe=Me:qe.sibling=Me,qe=Me);return t&&de.forEach(function(ys){return r(z,ys)}),Le&&ur(z,xe),pe}function ve(z,k,H,Z){if(H==null)throw Error(s(151));for(var pe=null,qe=null,de=k,xe=k=0,Me=null,He=H.next();de!==null&&!He.done;xe++,He=H.next()){de.index>xe?(Me=de,de=null):Me=de.sibling;var ys=G(z,de,He.value,Z);if(ys===null){de===null&&(de=Me);break}t&&de&&ys.alternate===null&&r(z,de),k=d(ys,k,xe),qe===null?pe=ys:qe.sibling=ys,qe=ys,de=Me}if(He.done)return a(z,de),Le&&ur(z,xe),pe;if(de===null){for(;!He.done;xe++,He=H.next())He=ee(z,He.value,Z),He!==null&&(k=d(He,k,xe),qe===null?pe=He:qe.sibling=He,qe=He);return Le&&ur(z,xe),pe}for(de=l(de);!He.done;xe++,He=H.next())He=Q(de,z,xe,He.value,Z),He!==null&&(t&&He.alternate!==null&&de.delete(He.key===null?xe:He.key),k=d(He,k,xe),qe===null?pe=He:qe.sibling=He,qe=He);return t&&de.forEach(function(uR){return r(z,uR)}),Le&&ur(z,xe),pe}function tt(z,k,H,Z){if(typeof H=="object"&&H!==null&&H.type===B&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case C:e:{for(var pe=H.key;k!==null;){if(k.key===pe){if(pe=H.type,pe===B){if(k.tag===7){a(z,k.sibling),Z=f(k,H.props.children),Z.return=z,z=Z;break e}}else if(k.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===R&&fa(pe)===k.type){a(z,k.sibling),Z=f(k,H.props),Ml(Z,H),Z.return=z,z=Z;break e}a(z,k);break}else r(z,k);k=k.sibling}H.type===B?(Z=oa(H.props.children,z.mode,Z,H.key),Z.return=z,z=Z):(Z=Dc(H.type,H.key,H.props,null,z.mode,Z),Ml(Z,H),Z.return=z,z=Z)}return _(z);case D:e:{for(pe=H.key;k!==null;){if(k.key===pe)if(k.tag===4&&k.stateNode.containerInfo===H.containerInfo&&k.stateNode.implementation===H.implementation){a(z,k.sibling),Z=f(k,H.children||[]),Z.return=z,z=Z;break e}else{a(z,k);break}else r(z,k);k=k.sibling}Z=cd(H,z.mode,Z),Z.return=z,z=Z}return _(z);case R:return H=fa(H),tt(z,k,H,Z)}if(Lt(H))return fe(z,k,H,Z);if(j(H)){if(pe=j(H),typeof pe!="function")throw Error(s(150));return H=pe.call(H),ve(z,k,H,Z)}if(typeof H.then=="function")return tt(z,k,Lc(H),Z);if(H.$$typeof===ie)return tt(z,k,Mc(z,H),Z);Uc(z,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,k!==null&&k.tag===6?(a(z,k.sibling),Z=f(k,H),Z.return=z,z=Z):(a(z,k),Z=ud(H,z.mode,Z),Z.return=z,z=Z),_(z)):a(z,k)}return function(z,k,H,Z){try{Ol=0;var pe=tt(z,k,H,Z);return co=null,pe}catch(de){if(de===uo||de===kc)throw de;var qe=Dn(29,de,null,z.mode);return qe.lanes=Z,qe.return=z,qe}finally{}}}var ma=Fy(!0),Gy=Fy(!1),es=!1;function bd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ad(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ts(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ns(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Ge&2)!==0){var f=l.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),l.pending=r,r=xc(t),Iy(t,null,a),r}return Ic(t,l,r,a),xc(t)}function Vl(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,ol(t,a)}}function Sd(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?f=d=r:d=d.next=r}else f=d=r;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var wd=!1;function kl(){if(wd){var t=lo;if(t!==null)throw t}}function Pl(t,r,a,l){wd=!1;var f=t.updateQueue;es=!1;var d=f.firstBaseUpdate,_=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var O=S,F=O.next;O.next=null,_===null?d=F:_.next=F,_=O;var W=t.alternate;W!==null&&(W=W.updateQueue,S=W.lastBaseUpdate,S!==_&&(S===null?W.firstBaseUpdate=F:S.next=F,W.lastBaseUpdate=O))}if(d!==null){var ee=f.baseState;_=0,W=F=O=null,S=d;do{var G=S.lane&-536870913,Q=G!==S.lane;if(Q?(Oe&G)===G:(l&G)===G){G!==0&&G===oo&&(wd=!0),W!==null&&(W=W.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var fe=t,ve=S;G=r;var tt=a;switch(ve.tag){case 1:if(fe=ve.payload,typeof fe=="function"){ee=fe.call(tt,ee,G);break e}ee=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=ve.payload,G=typeof fe=="function"?fe.call(tt,ee,G):fe,G==null)break e;ee=b({},ee,G);break e;case 2:es=!0}}G=S.callback,G!==null&&(t.flags|=64,Q&&(t.flags|=8192),Q=f.callbacks,Q===null?f.callbacks=[G]:Q.push(G))}else Q={lane:G,tag:S.tag,payload:S.payload,callback:S.callback,next:null},W===null?(F=W=Q,O=ee):W=W.next=Q,_|=G;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;Q=S,S=Q.next,Q.next=null,f.lastBaseUpdate=Q,f.shared.pending=null}}while(!0);W===null&&(O=ee),f.baseState=O,f.firstBaseUpdate=F,f.lastBaseUpdate=W,d===null&&(f.shared.lanes=0),os|=_,t.lanes=_,t.memoizedState=ee}}function Ky(t,r){if(typeof t!="function")throw Error(s(191,t));t.call(r)}function Qy(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Ky(a[t],r)}var ho=P(null),jc=P(0);function Yy(t,r){t=Er,le(jc,t),le(ho,r),Er=t|r.baseLanes}function Rd(){le(jc,Er),le(ho,ho.current)}function Cd(){Er=jc.current,te(ho),te(jc)}var Nn=P(null),Xn=null;function is(t){var r=t.alternate;le(Tt,Tt.current&1),le(Nn,t),Xn===null&&(r===null||ho.current!==null||r.memoizedState!==null)&&(Xn=t)}function Id(t){le(Tt,Tt.current),le(Nn,t),Xn===null&&(Xn=t)}function $y(t){t.tag===22?(le(Tt,Tt.current),le(Nn,t),Xn===null&&(Xn=t)):rs()}function rs(){le(Tt,Tt.current),le(Nn,Nn.current)}function On(t){te(Nn),Xn===t&&(Xn=null),te(Tt)}var Tt=P(0);function zc(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Vm(a)||km(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var fr=0,Ce=null,Ze=null,Dt=null,Bc=!1,fo=!1,pa=!1,qc=0,Ll=0,mo=null,ZS=0;function pt(){throw Error(s(321))}function xd(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!xn(t[a],r[a]))return!1;return!0}function Dd(t,r,a,l,f,d){return fr=d,Ce=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,J.H=t===null||t.memoizedState===null?O_:Gd,pa=!1,d=a(l,f),pa=!1,fo&&(d=Wy(r,a,l,f)),Xy(t),d}function Xy(t){J.H=zl;var r=Ze!==null&&Ze.next!==null;if(fr=0,Dt=Ze=Ce=null,Bc=!1,Ll=0,mo=null,r)throw Error(s(300));t===null||Nt||(t=t.dependencies,t!==null&&Oc(t)&&(Nt=!0))}function Wy(t,r,a,l){Ce=t;var f=0;do{if(fo&&(mo=null),Ll=0,fo=!1,25<=f)throw Error(s(301));if(f+=1,Dt=Ze=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}J.H=M_,d=r(a,l)}while(fo);return d}function ew(){var t=J.H,r=t.useState()[0];return r=typeof r.then=="function"?Ul(r):r,t=t.useState()[0],(Ze!==null?Ze.memoizedState:null)!==t&&(Ce.flags|=1024),r}function Nd(){var t=qc!==0;return qc=0,t}function Od(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function Md(t){if(Bc){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}Bc=!1}fr=0,Dt=Ze=Ce=null,fo=!1,Ll=qc=0,mo=null}function mn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?Ce.memoizedState=Dt=t:Dt=Dt.next=t,Dt}function bt(){if(Ze===null){var t=Ce.alternate;t=t!==null?t.memoizedState:null}else t=Ze.next;var r=Dt===null?Ce.memoizedState:Dt.next;if(r!==null)Dt=r,Ze=t;else{if(t===null)throw Ce.alternate===null?Error(s(467)):Error(s(310));Ze=t,t={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},Dt===null?Ce.memoizedState=Dt=t:Dt=Dt.next=t}return Dt}function Hc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ul(t){var r=Ll;return Ll+=1,mo===null&&(mo=[]),t=By(mo,t,r),r=Ce,(Dt===null?r.memoizedState:Dt.next)===null&&(r=r.alternate,J.H=r===null||r.memoizedState===null?O_:Gd),t}function Fc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Ul(t);if(t.$$typeof===ie)return Wt(t)}throw Error(s(438,String(t)))}function Vd(t){var r=null,a=Ce.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=Ce.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Hc(),Ce.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=U;return r.index++,a}function dr(t,r){return typeof r=="function"?r(t):r}function Gc(t){var r=bt();return kd(r,Ze,t)}function kd(t,r,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var f=t.baseQueue,d=l.pending;if(d!==null){if(f!==null){var _=f.next;f.next=d.next,d.next=_}r.baseQueue=f=d,l.pending=null}if(d=t.baseState,f===null)t.memoizedState=d;else{r=f.next;var S=_=null,O=null,F=r,W=!1;do{var ee=F.lane&-536870913;if(ee!==F.lane?(Oe&ee)===ee:(fr&ee)===ee){var G=F.revertLane;if(G===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),ee===oo&&(W=!0);else if((fr&G)===G){F=F.next,G===oo&&(W=!0);continue}else ee={lane:0,revertLane:F.revertLane,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},O===null?(S=O=ee,_=d):O=O.next=ee,Ce.lanes|=G,os|=G;ee=F.action,pa&&a(d,ee),d=F.hasEagerState?F.eagerState:a(d,ee)}else G={lane:ee,revertLane:F.revertLane,gesture:F.gesture,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},O===null?(S=O=G,_=d):O=O.next=G,Ce.lanes|=ee,os|=ee;F=F.next}while(F!==null&&F!==r);if(O===null?_=d:O.next=S,!xn(d,t.memoizedState)&&(Nt=!0,W&&(a=lo,a!==null)))throw a;t.memoizedState=d,t.baseState=_,t.baseQueue=O,l.lastRenderedState=d}return f===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Pd(t){var r=bt(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,f=a.pending,d=r.memoizedState;if(f!==null){a.pending=null;var _=f=f.next;do d=t(d,_.action),_=_.next;while(_!==f);xn(d,r.memoizedState)||(Nt=!0),r.memoizedState=d,r.baseQueue===null&&(r.baseState=d),a.lastRenderedState=d}return[d,l]}function Jy(t,r,a){var l=Ce,f=bt(),d=Le;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=r();var _=!xn((Ze||f).memoizedState,a);if(_&&(f.memoizedState=a,Nt=!0),f=f.queue,jd(t_.bind(null,l,f,t),[t]),f.getSnapshot!==r||_||Dt!==null&&Dt.memoizedState.tag&1){if(l.flags|=2048,po(9,{destroy:void 0},e_.bind(null,l,f,a,r),null),nt===null)throw Error(s(349));d||(fr&127)!==0||Zy(l,r,a)}return a}function Zy(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=Ce.updateQueue,r===null?(r=Hc(),Ce.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function e_(t,r,a,l){r.value=a,r.getSnapshot=l,n_(r)&&i_(t)}function t_(t,r,a){return a(function(){n_(r)&&i_(t)})}function n_(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!xn(t,a)}catch{return!0}}function i_(t){var r=aa(t,2);r!==null&&Sn(r,t,2)}function Ld(t){var r=mn();if(typeof t=="function"){var a=t;if(t=a(),pa){zn(!0);try{a()}finally{zn(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dr,lastRenderedState:t},r}function r_(t,r,a,l){return t.baseState=a,kd(t,Ze,typeof l=="function"?l:dr)}function tw(t,r,a,l,f){if(Yc(t))throw Error(s(485));if(t=r.action,t!==null){var d={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};J.T!==null?a(!0):d.isTransition=!1,l(d),a=r.pending,a===null?(d.next=r.pending=d,s_(r,d)):(d.next=a.next,r.pending=a.next=d)}}function s_(t,r){var a=r.action,l=r.payload,f=t.state;if(r.isTransition){var d=J.T,_={};J.T=_;try{var S=a(f,l),O=J.S;O!==null&&O(_,S),a_(t,r,S)}catch(F){Ud(t,r,F)}finally{d!==null&&_.types!==null&&(d.types=_.types),J.T=d}}else try{d=a(f,l),a_(t,r,d)}catch(F){Ud(t,r,F)}}function a_(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){o_(t,r,l)},function(l){return Ud(t,r,l)}):o_(t,r,a)}function o_(t,r,a){r.status="fulfilled",r.value=a,l_(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,s_(t,a)))}function Ud(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,l_(r),r=r.next;while(r!==l)}t.action=null}function l_(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function u_(t,r){return r}function c_(t,r){if(Le){var a=nt.formState;if(a!==null){e:{var l=Ce;if(Le){if(at){t:{for(var f=at,d=$n;f.nodeType!==8;){if(!d){f=null;break t}if(f=Wn(f.nextSibling),f===null){f=null;break t}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){at=Wn(f.nextSibling),l=f.data==="F!";break e}}Jr(l)}l=!1}l&&(r=a[0])}}return a=mn(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u_,lastRenderedState:r},a.queue=l,a=x_.bind(null,Ce,l),l.dispatch=a,l=Ld(!1),d=Fd.bind(null,Ce,!1,l.queue),l=mn(),f={state:r,dispatch:null,action:t,pending:null},l.queue=f,a=tw.bind(null,Ce,f,d,a),f.dispatch=a,l.memoizedState=t,[r,a,!1]}function h_(t){var r=bt();return f_(r,Ze,t)}function f_(t,r,a){if(r=kd(t,r,u_)[0],t=Gc(dr)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=Ul(r)}catch(_){throw _===uo?kc:_}else l=r;r=bt();var f=r.queue,d=f.dispatch;return a!==r.memoizedState&&(Ce.flags|=2048,po(9,{destroy:void 0},nw.bind(null,f,a),null)),[l,d,t]}function nw(t,r){t.action=r}function d_(t){var r=bt(),a=Ze;if(a!==null)return f_(r,a,t);bt(),r=r.memoizedState,a=bt();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function po(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=Ce.updateQueue,r===null&&(r=Hc(),Ce.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function m_(){return bt().memoizedState}function Kc(t,r,a,l){var f=mn();Ce.flags|=t,f.memoizedState=po(1|r,{destroy:void 0},a,l===void 0?null:l)}function Qc(t,r,a,l){var f=bt();l=l===void 0?null:l;var d=f.memoizedState.inst;Ze!==null&&l!==null&&xd(l,Ze.memoizedState.deps)?f.memoizedState=po(r,d,a,l):(Ce.flags|=t,f.memoizedState=po(1|r,d,a,l))}function p_(t,r){Kc(8390656,8,t,r)}function jd(t,r){Qc(2048,8,t,r)}function iw(t){Ce.flags|=4;var r=Ce.updateQueue;if(r===null)r=Hc(),Ce.updateQueue=r,r.events=[t];else{var a=r.events;a===null?r.events=[t]:a.push(t)}}function g_(t){var r=bt().memoizedState;return iw({ref:r,nextImpl:t}),function(){if((Ge&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function y_(t,r){return Qc(4,2,t,r)}function __(t,r){return Qc(4,4,t,r)}function v_(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function E_(t,r,a){a=a!=null?a.concat([t]):null,Qc(4,4,v_.bind(null,r,t),a)}function zd(){}function T_(t,r){var a=bt();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&xd(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function b_(t,r){var a=bt();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&xd(r,l[1]))return l[0];if(l=t(),pa){zn(!0);try{t()}finally{zn(!1)}}return a.memoizedState=[l,r],l}function Bd(t,r,a){return a===void 0||(fr&1073741824)!==0&&(Oe&261930)===0?t.memoizedState=r:(t.memoizedState=a,t=Av(),Ce.lanes|=t,os|=t,a)}function A_(t,r,a,l){return xn(a,r)?a:ho.current!==null?(t=Bd(t,a,l),xn(t,r)||(Nt=!0),t):(fr&42)===0||(fr&1073741824)!==0&&(Oe&261930)===0?(Nt=!0,t.memoizedState=a):(t=Av(),Ce.lanes|=t,os|=t,r)}function S_(t,r,a,l,f){var d=oe.p;oe.p=d!==0&&8>d?d:8;var _=J.T,S={};J.T=S,Fd(t,!1,r,a);try{var O=f(),F=J.S;if(F!==null&&F(S,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var W=JS(O,l);jl(t,r,W,kn(t))}else jl(t,r,l,kn(t))}catch(ee){jl(t,r,{then:function(){},status:"rejected",reason:ee},kn())}finally{oe.p=d,_!==null&&S.types!==null&&(_.types=S.types),J.T=_}}function rw(){}function qd(t,r,a,l){if(t.tag!==5)throw Error(s(476));var f=w_(t).queue;S_(t,f,r,ge,a===null?rw:function(){return R_(t),a(l)})}function w_(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:dr,lastRenderedState:ge},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:dr,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function R_(t){var r=w_(t);r.next===null&&(r=t.alternate.memoizedState),jl(t,r.next.queue,{},kn())}function Hd(){return Wt(nu)}function C_(){return bt().memoizedState}function I_(){return bt().memoizedState}function sw(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=kn();t=ts(a);var l=ns(r,t,a);l!==null&&(Sn(l,r,a),Vl(l,r,a)),r={cache:_d()},t.payload=r;return}r=r.return}}function aw(t,r,a){var l=kn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Yc(t)?D_(r,a):(a=od(t,r,a,l),a!==null&&(Sn(a,t,l),N_(a,r,l)))}function x_(t,r,a){var l=kn();jl(t,r,a,l)}function jl(t,r,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Yc(t))D_(r,f);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=r.lastRenderedReducer,d!==null))try{var _=r.lastRenderedState,S=d(_,a);if(f.hasEagerState=!0,f.eagerState=S,xn(S,_))return Ic(t,r,f,0),nt===null&&Cc(),!1}catch{}finally{}if(a=od(t,r,f,l),a!==null)return Sn(a,t,l),N_(a,r,l),!0}return!1}function Fd(t,r,a,l){if(l={lane:2,revertLane:bm(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Yc(t)){if(r)throw Error(s(479))}else r=od(t,a,l,2),r!==null&&Sn(r,t,2)}function Yc(t){var r=t.alternate;return t===Ce||r!==null&&r===Ce}function D_(t,r){fo=Bc=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function N_(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,ol(t,a)}}var zl={readContext:Wt,use:Fc,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useLayoutEffect:pt,useInsertionEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useSyncExternalStore:pt,useId:pt,useHostTransitionStatus:pt,useFormState:pt,useActionState:pt,useOptimistic:pt,useMemoCache:pt,useCacheRefresh:pt};zl.useEffectEvent=pt;var O_={readContext:Wt,use:Fc,useCallback:function(t,r){return mn().memoizedState=[t,r===void 0?null:r],t},useContext:Wt,useEffect:p_,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,Kc(4194308,4,v_.bind(null,r,t),a)},useLayoutEffect:function(t,r){return Kc(4194308,4,t,r)},useInsertionEffect:function(t,r){Kc(4,2,t,r)},useMemo:function(t,r){var a=mn();r=r===void 0?null:r;var l=t();if(pa){zn(!0);try{t()}finally{zn(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=mn();if(a!==void 0){var f=a(r);if(pa){zn(!0);try{a(r)}finally{zn(!1)}}}else f=r;return l.memoizedState=l.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},l.queue=t,t=t.dispatch=aw.bind(null,Ce,t),[l.memoizedState,t]},useRef:function(t){var r=mn();return t={current:t},r.memoizedState=t},useState:function(t){t=Ld(t);var r=t.queue,a=x_.bind(null,Ce,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:zd,useDeferredValue:function(t,r){var a=mn();return Bd(a,t,r)},useTransition:function(){var t=Ld(!1);return t=S_.bind(null,Ce,t.queue,!0,!1),mn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=Ce,f=mn();if(Le){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),nt===null)throw Error(s(349));(Oe&127)!==0||Zy(l,r,a)}f.memoizedState=a;var d={value:a,getSnapshot:r};return f.queue=d,p_(t_.bind(null,l,d,t),[t]),l.flags|=2048,po(9,{destroy:void 0},e_.bind(null,l,d,a,r),null),a},useId:function(){var t=mn(),r=nt.identifierPrefix;if(Le){var a=zi,l=ji;a=(l&~(1<<32-vt(l)-1)).toString(32)+a,r="_"+r+"R_"+a,a=qc++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=ZS++,r="_"+r+"r_"+a.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:Hd,useFormState:c_,useActionState:c_,useOptimistic:function(t){var r=mn();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=Fd.bind(null,Ce,!0,a),a.dispatch=r,[t,r]},useMemoCache:Vd,useCacheRefresh:function(){return mn().memoizedState=sw.bind(null,Ce)},useEffectEvent:function(t){var r=mn(),a={impl:t};return r.memoizedState=a,function(){if((Ge&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},Gd={readContext:Wt,use:Fc,useCallback:T_,useContext:Wt,useEffect:jd,useImperativeHandle:E_,useInsertionEffect:y_,useLayoutEffect:__,useMemo:b_,useReducer:Gc,useRef:m_,useState:function(){return Gc(dr)},useDebugValue:zd,useDeferredValue:function(t,r){var a=bt();return A_(a,Ze.memoizedState,t,r)},useTransition:function(){var t=Gc(dr)[0],r=bt().memoizedState;return[typeof t=="boolean"?t:Ul(t),r]},useSyncExternalStore:Jy,useId:C_,useHostTransitionStatus:Hd,useFormState:h_,useActionState:h_,useOptimistic:function(t,r){var a=bt();return r_(a,Ze,t,r)},useMemoCache:Vd,useCacheRefresh:I_};Gd.useEffectEvent=g_;var M_={readContext:Wt,use:Fc,useCallback:T_,useContext:Wt,useEffect:jd,useImperativeHandle:E_,useInsertionEffect:y_,useLayoutEffect:__,useMemo:b_,useReducer:Pd,useRef:m_,useState:function(){return Pd(dr)},useDebugValue:zd,useDeferredValue:function(t,r){var a=bt();return Ze===null?Bd(a,t,r):A_(a,Ze.memoizedState,t,r)},useTransition:function(){var t=Pd(dr)[0],r=bt().memoizedState;return[typeof t=="boolean"?t:Ul(t),r]},useSyncExternalStore:Jy,useId:C_,useHostTransitionStatus:Hd,useFormState:d_,useActionState:d_,useOptimistic:function(t,r){var a=bt();return Ze!==null?r_(a,Ze,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Vd,useCacheRefresh:I_};M_.useEffectEvent=g_;function Kd(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:b({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Qd={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=kn(),f=ts(l);f.payload=r,a!=null&&(f.callback=a),r=ns(t,f,l),r!==null&&(Sn(r,t,l),Vl(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=kn(),f=ts(l);f.tag=1,f.payload=r,a!=null&&(f.callback=a),r=ns(t,f,l),r!==null&&(Sn(r,t,l),Vl(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=kn(),l=ts(a);l.tag=2,r!=null&&(l.callback=r),r=ns(t,l,a),r!==null&&(Sn(r,t,a),Vl(r,t,a))}};function V_(t,r,a,l,f,d,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,_):r.prototype&&r.prototype.isPureReactComponent?!Rl(a,l)||!Rl(f,d):!0}function k_(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&Qd.enqueueReplaceState(r,r.state,null)}function ga(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=b({},a));for(var f in t)a[f]===void 0&&(a[f]=t[f])}return a}function P_(t){Rc(t)}function L_(t){console.error(t)}function U_(t){Rc(t)}function $c(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function j_(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Yd(t,r,a){return a=ts(a),a.tag=3,a.payload={element:null},a.callback=function(){$c(t,r)},a}function z_(t){return t=ts(t),t.tag=3,t}function B_(t,r,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;t.payload=function(){return f(d)},t.callback=function(){j_(r,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){j_(r,a,l),typeof f!="function"&&(ls===null?ls=new Set([this]):ls.add(this));var S=l.stack;this.componentDidCatch(l.value,{componentStack:S!==null?S:""})})}function ow(t,r,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&ao(r,a,f,!0),a=Nn.current,a!==null){switch(a.tag){case 31:case 13:return Xn===null?oh():a.alternate===null&&gt===0&&(gt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===Pc?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),vm(t,l,f)),!1;case 22:return a.flags|=65536,l===Pc?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),vm(t,l,f)),!1}throw Error(s(435,a.tag))}return vm(t,l,f),oh(),!1}if(Le)return r=Nn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,l!==dd&&(t=Error(s(422),{cause:l}),xl(Kn(t,a)))):(l!==dd&&(r=Error(s(423),{cause:l}),xl(Kn(r,a))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,l=Kn(l,a),f=Yd(t.stateNode,l,f),Sd(t,f),gt!==4&&(gt=2)),!1;var d=Error(s(520),{cause:l});if(d=Kn(d,a),Yl===null?Yl=[d]:Yl.push(d),gt!==4&&(gt=2),r===null)return!0;l=Kn(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=f&-f,a.lanes|=t,t=Yd(a.stateNode,l,t),Sd(a,t),!1;case 1:if(r=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(ls===null||!ls.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=z_(f),B_(f,t,a,l),Sd(a,f),!1}a=a.return}while(a!==null);return!1}var $d=Error(s(461)),Nt=!1;function Jt(t,r,a,l){r.child=t===null?Gy(r,null,a,l):ma(r,t.child,a,l)}function q_(t,r,a,l,f){a=a.render;var d=r.ref;if("ref"in l){var _={};for(var S in l)S!=="ref"&&(_[S]=l[S])}else _=l;return ca(r),l=Dd(t,r,a,_,d,f),S=Nd(),t!==null&&!Nt?(Od(t,r,f),mr(t,r,f)):(Le&&S&&hd(r),r.flags|=1,Jt(t,r,l,f),r.child)}function H_(t,r,a,l,f){if(t===null){var d=a.type;return typeof d=="function"&&!ld(d)&&d.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=d,F_(t,r,d,l,f)):(t=Dc(a.type,null,l,r,r.mode,f),t.ref=r.ref,t.return=r,r.child=t)}if(d=t.child,!im(t,f)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:Rl,a(_,l)&&t.ref===r.ref)return mr(t,r,f)}return r.flags|=1,t=lr(d,l),t.ref=r.ref,t.return=r,r.child=t}function F_(t,r,a,l,f){if(t!==null){var d=t.memoizedProps;if(Rl(d,l)&&t.ref===r.ref)if(Nt=!1,r.pendingProps=l=d,im(t,f))(t.flags&131072)!==0&&(Nt=!0);else return r.lanes=t.lanes,mr(t,r,f)}return Xd(t,r,a,l,f)}function G_(t,r,a,l){var f=l.children,d=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((r.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,t!==null){for(l=r.child=t.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~d}else l=0,r.child=null;return K_(t,r,d,a,l)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&Vc(r,d!==null?d.cachePool:null),d!==null?Yy(r,d):Rd(),$y(r);else return l=r.lanes=536870912,K_(t,r,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(Vc(r,d.cachePool),Yy(r,d),rs(),r.memoizedState=null):(t!==null&&Vc(r,null),Rd(),rs());return Jt(t,r,f,a),r.child}function Bl(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function K_(t,r,a,l,f){var d=Ed();return d=d===null?null:{parent:xt._currentValue,pool:d},r.memoizedState={baseLanes:a,cachePool:d},t!==null&&Vc(r,null),Rd(),$y(r),t!==null&&ao(t,r,l,!0),r.childLanes=f,null}function Xc(t,r){return r=Jc({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function Q_(t,r,a){return ma(r,t.child,null,a),t=Xc(r,r.pendingProps),t.flags|=2,On(r),r.memoizedState=null,t}function lw(t,r,a){var l=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(Le){if(l.mode==="hidden")return t=Xc(r,l),r.lanes=536870912,Bl(null,t);if(Id(r),(t=at)?(t=sE(t,$n),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Xr!==null?{id:ji,overflow:zi}:null,retryLane:536870912,hydrationErrors:null},a=Dy(t),a.return=r,r.child=a,Xt=r,at=null)):t=null,t===null)throw Jr(r);return r.lanes=536870912,null}return Xc(r,l)}var d=t.memoizedState;if(d!==null){var _=d.dehydrated;if(Id(r),f)if(r.flags&256)r.flags&=-257,r=Q_(t,r,a);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(s(558));else if(Nt||ao(t,r,a,!1),f=(a&t.childLanes)!==0,Nt||f){if(l=nt,l!==null&&(_=ll(l,a),_!==0&&_!==d.retryLane))throw d.retryLane=_,aa(t,_),Sn(l,t,_),$d;oh(),r=Q_(t,r,a)}else t=d.treeContext,at=Wn(_.nextSibling),Xt=r,Le=!0,Wr=null,$n=!1,t!==null&&My(r,t),r=Xc(r,l),r.flags|=4096;return r}return t=lr(t.child,{mode:l.mode,children:l.children}),t.ref=r.ref,r.child=t,t.return=r,t}function Wc(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function Xd(t,r,a,l,f){return ca(r),a=Dd(t,r,a,l,void 0,f),l=Nd(),t!==null&&!Nt?(Od(t,r,f),mr(t,r,f)):(Le&&l&&hd(r),r.flags|=1,Jt(t,r,a,f),r.child)}function Y_(t,r,a,l,f,d){return ca(r),r.updateQueue=null,a=Wy(r,l,a,f),Xy(t),l=Nd(),t!==null&&!Nt?(Od(t,r,d),mr(t,r,d)):(Le&&l&&hd(r),r.flags|=1,Jt(t,r,a,d),r.child)}function $_(t,r,a,l,f){if(ca(r),r.stateNode===null){var d=no,_=a.contextType;typeof _=="object"&&_!==null&&(d=Wt(_)),d=new a(l,d),r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Qd,r.stateNode=d,d._reactInternals=r,d=r.stateNode,d.props=l,d.state=r.memoizedState,d.refs={},bd(r),_=a.contextType,d.context=typeof _=="object"&&_!==null?Wt(_):no,d.state=r.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Kd(r,a,_,l),d.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&Qd.enqueueReplaceState(d,d.state,null),Pl(r,l,d,f),kl(),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){d=r.stateNode;var S=r.memoizedProps,O=ga(a,S);d.props=O;var F=d.context,W=a.contextType;_=no,typeof W=="object"&&W!==null&&(_=Wt(W));var ee=a.getDerivedStateFromProps;W=typeof ee=="function"||typeof d.getSnapshotBeforeUpdate=="function",S=r.pendingProps!==S,W||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(S||F!==_)&&k_(r,d,l,_),es=!1;var G=r.memoizedState;d.state=G,Pl(r,l,d,f),kl(),F=r.memoizedState,S||G!==F||es?(typeof ee=="function"&&(Kd(r,a,ee,l),F=r.memoizedState),(O=es||V_(r,a,O,l,G,F,_))?(W||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(r.flags|=4194308)):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=F),d.props=l,d.state=F,d.context=_,l=O):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{d=r.stateNode,Ad(t,r),_=r.memoizedProps,W=ga(a,_),d.props=W,ee=r.pendingProps,G=d.context,F=a.contextType,O=no,typeof F=="object"&&F!==null&&(O=Wt(F)),S=a.getDerivedStateFromProps,(F=typeof S=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==ee||G!==O)&&k_(r,d,l,O),es=!1,G=r.memoizedState,d.state=G,Pl(r,l,d,f),kl();var Q=r.memoizedState;_!==ee||G!==Q||es||t!==null&&t.dependencies!==null&&Oc(t.dependencies)?(typeof S=="function"&&(Kd(r,a,S,l),Q=r.memoizedState),(W=es||V_(r,a,W,l,G,Q,O)||t!==null&&t.dependencies!==null&&Oc(t.dependencies))?(F||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,Q,O),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,Q,O)),typeof d.componentDidUpdate=="function"&&(r.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&G===t.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&G===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=Q),d.props=l,d.state=Q,d.context=O,l=W):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&G===t.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&G===t.memoizedState||(r.flags|=1024),l=!1)}return d=l,Wc(t,r),l=(r.flags&128)!==0,d||l?(d=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),r.flags|=1,t!==null&&l?(r.child=ma(r,t.child,null,f),r.child=ma(r,null,a,f)):Jt(t,r,a,f),r.memoizedState=d.state,t=r.child):t=mr(t,r,f),t}function X_(t,r,a,l){return la(),r.flags|=256,Jt(t,r,a,l),r.child}var Wd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Jd(t){return{baseLanes:t,cachePool:jy()}}function Zd(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=Vn),t}function W_(t,r,a){var l=r.pendingProps,f=!1,d=(r.flags&128)!==0,_;if((_=d)||(_=t!==null&&t.memoizedState===null?!1:(Tt.current&2)!==0),_&&(f=!0,r.flags&=-129),_=(r.flags&32)!==0,r.flags&=-33,t===null){if(Le){if(f?is(r):rs(),(t=at)?(t=sE(t,$n),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Xr!==null?{id:ji,overflow:zi}:null,retryLane:536870912,hydrationErrors:null},a=Dy(t),a.return=r,r.child=a,Xt=r,at=null)):t=null,t===null)throw Jr(r);return km(t)?r.lanes=32:r.lanes=536870912,null}var S=l.children;return l=l.fallback,f?(rs(),f=r.mode,S=Jc({mode:"hidden",children:S},f),l=oa(l,f,a,null),S.return=r,l.return=r,S.sibling=l,r.child=S,l=r.child,l.memoizedState=Jd(a),l.childLanes=Zd(t,_,a),r.memoizedState=Wd,Bl(null,l)):(is(r),em(r,S))}var O=t.memoizedState;if(O!==null&&(S=O.dehydrated,S!==null)){if(d)r.flags&256?(is(r),r.flags&=-257,r=tm(t,r,a)):r.memoizedState!==null?(rs(),r.child=t.child,r.flags|=128,r=null):(rs(),S=l.fallback,f=r.mode,l=Jc({mode:"visible",children:l.children},f),S=oa(S,f,a,null),S.flags|=2,l.return=r,S.return=r,l.sibling=S,r.child=l,ma(r,t.child,null,a),l=r.child,l.memoizedState=Jd(a),l.childLanes=Zd(t,_,a),r.memoizedState=Wd,r=Bl(null,l));else if(is(r),km(S)){if(_=S.nextSibling&&S.nextSibling.dataset,_)var F=_.dgst;_=F,l=Error(s(419)),l.stack="",l.digest=_,xl({value:l,source:null,stack:null}),r=tm(t,r,a)}else if(Nt||ao(t,r,a,!1),_=(a&t.childLanes)!==0,Nt||_){if(_=nt,_!==null&&(l=ll(_,a),l!==0&&l!==O.retryLane))throw O.retryLane=l,aa(t,l),Sn(_,t,l),$d;Vm(S)||oh(),r=tm(t,r,a)}else Vm(S)?(r.flags|=192,r.child=t.child,r=null):(t=O.treeContext,at=Wn(S.nextSibling),Xt=r,Le=!0,Wr=null,$n=!1,t!==null&&My(r,t),r=em(r,l.children),r.flags|=4096);return r}return f?(rs(),S=l.fallback,f=r.mode,O=t.child,F=O.sibling,l=lr(O,{mode:"hidden",children:l.children}),l.subtreeFlags=O.subtreeFlags&65011712,F!==null?S=lr(F,S):(S=oa(S,f,a,null),S.flags|=2),S.return=r,l.return=r,l.sibling=S,r.child=l,Bl(null,l),l=r.child,S=t.child.memoizedState,S===null?S=Jd(a):(f=S.cachePool,f!==null?(O=xt._currentValue,f=f.parent!==O?{parent:O,pool:O}:f):f=jy(),S={baseLanes:S.baseLanes|a,cachePool:f}),l.memoizedState=S,l.childLanes=Zd(t,_,a),r.memoizedState=Wd,Bl(t.child,l)):(is(r),a=t.child,t=a.sibling,a=lr(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(_=r.deletions,_===null?(r.deletions=[t],r.flags|=16):_.push(t)),r.child=a,r.memoizedState=null,a)}function em(t,r){return r=Jc({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function Jc(t,r){return t=Dn(22,t,null,r),t.lanes=0,t}function tm(t,r,a){return ma(r,t.child,null,a),t=em(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function J_(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),gd(t.return,r,a)}function nm(t,r,a,l,f,d){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:d}:(_.isBackwards=r,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=f,_.treeForkCount=d)}function Z_(t,r,a){var l=r.pendingProps,f=l.revealOrder,d=l.tail;l=l.children;var _=Tt.current,S=(_&2)!==0;if(S?(_=_&1|2,r.flags|=128):_&=1,le(Tt,_),Jt(t,r,l,a),l=Le?Il:0,!S&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&J_(t,a,r);else if(t.tag===19)J_(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(a=r.child,f=null;a!==null;)t=a.alternate,t!==null&&zc(t)===null&&(f=a),a=a.sibling;a=f,a===null?(f=r.child,r.child=null):(f=a.sibling,a.sibling=null),nm(r,!1,f,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=r.child,r.child=null;f!==null;){if(t=f.alternate,t!==null&&zc(t)===null){r.child=f;break}t=f.sibling,f.sibling=a,a=f,f=t}nm(r,!0,a,null,d,l);break;case"together":nm(r,!1,null,null,void 0,l);break;default:r.memoizedState=null}return r.child}function mr(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),os|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(ao(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(s(153));if(r.child!==null){for(t=r.child,a=lr(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=lr(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function im(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&Oc(t)))}function uw(t,r,a){switch(r.tag){case 3:Ut(r,r.stateNode.containerInfo),Zr(r,xt,t.memoizedState.cache),la();break;case 27:case 5:qs(r);break;case 4:Ut(r,r.stateNode.containerInfo);break;case 10:Zr(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Id(r),null;break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(is(r),r.flags|=128,null):(a&r.child.childLanes)!==0?W_(t,r,a):(is(r),t=mr(t,r,a),t!==null?t.sibling:null);is(r);break;case 19:var f=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(ao(t,r,a,!1),l=(a&r.childLanes)!==0),f){if(l)return Z_(t,r,a);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),le(Tt,Tt.current),l)break;return null;case 22:return r.lanes=0,G_(t,r,a,r.pendingProps);case 24:Zr(r,xt,t.memoizedState.cache)}return mr(t,r,a)}function ev(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)Nt=!0;else{if(!im(t,a)&&(r.flags&128)===0)return Nt=!1,uw(t,r,a);Nt=(t.flags&131072)!==0}else Nt=!1,Le&&(r.flags&1048576)!==0&&Oy(r,Il,r.index);switch(r.lanes=0,r.tag){case 16:e:{var l=r.pendingProps;if(t=fa(r.elementType),r.type=t,typeof t=="function")ld(t)?(l=ga(t,l),r.tag=1,r=$_(null,r,t,l,a)):(r.tag=0,r=Xd(null,r,t,l,a));else{if(t!=null){var f=t.$$typeof;if(f===he){r.tag=11,r=q_(null,r,t,l,a);break e}else if(f===I){r.tag=14,r=H_(null,r,t,l,a);break e}}throw r=Ke(t)||t,Error(s(306,r,""))}}return r;case 0:return Xd(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,f=ga(l,r.pendingProps),$_(t,r,l,f,a);case 3:e:{if(Ut(r,r.stateNode.containerInfo),t===null)throw Error(s(387));l=r.pendingProps;var d=r.memoizedState;f=d.element,Ad(t,r),Pl(r,l,null,a);var _=r.memoizedState;if(l=_.cache,Zr(r,xt,l),l!==d.cache&&yd(r,[xt],a,!0),kl(),l=_.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:_.cache},r.updateQueue.baseState=d,r.memoizedState=d,r.flags&256){r=X_(t,r,l,a);break e}else if(l!==f){f=Kn(Error(s(424)),r),xl(f),r=X_(t,r,l,a);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(at=Wn(t.firstChild),Xt=r,Le=!0,Wr=null,$n=!0,a=Gy(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(la(),l===f){r=mr(t,r,a);break e}Jt(t,r,l,a)}r=r.child}return r;case 26:return Wc(t,r),t===null?(a=hE(r.type,null,r.pendingProps,null))?r.memoizedState=a:Le||(a=r.type,t=r.pendingProps,l=mh(Ie.current).createElement(a),l[Rt]=r,l[qt]=t,Zt(l,a,t),Ct(l),r.stateNode=l):r.memoizedState=hE(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return qs(r),t===null&&Le&&(l=r.stateNode=lE(r.type,r.pendingProps,Ie.current),Xt=r,$n=!0,f=at,fs(r.type)?(Pm=f,at=Wn(l.firstChild)):at=f),Jt(t,r,r.pendingProps.children,a),Wc(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&Le&&((f=l=at)&&(l=jw(l,r.type,r.pendingProps,$n),l!==null?(r.stateNode=l,Xt=r,at=Wn(l.firstChild),$n=!1,f=!0):f=!1),f||Jr(r)),qs(r),f=r.type,d=r.pendingProps,_=t!==null?t.memoizedProps:null,l=d.children,Nm(f,d)?l=null:_!==null&&Nm(f,_)&&(r.flags|=32),r.memoizedState!==null&&(f=Dd(t,r,ew,null,null,a),nu._currentValue=f),Wc(t,r),Jt(t,r,l,a),r.child;case 6:return t===null&&Le&&((t=a=at)&&(a=zw(a,r.pendingProps,$n),a!==null?(r.stateNode=a,Xt=r,at=null,t=!0):t=!1),t||Jr(r)),null;case 13:return W_(t,r,a);case 4:return Ut(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=ma(r,null,l,a):Jt(t,r,l,a),r.child;case 11:return q_(t,r,r.type,r.pendingProps,a);case 7:return Jt(t,r,r.pendingProps,a),r.child;case 8:return Jt(t,r,r.pendingProps.children,a),r.child;case 12:return Jt(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Zr(r,r.type,l.value),Jt(t,r,l.children,a),r.child;case 9:return f=r.type._context,l=r.pendingProps.children,ca(r),f=Wt(f),l=l(f),r.flags|=1,Jt(t,r,l,a),r.child;case 14:return H_(t,r,r.type,r.pendingProps,a);case 15:return F_(t,r,r.type,r.pendingProps,a);case 19:return Z_(t,r,a);case 31:return lw(t,r,a);case 22:return G_(t,r,a,r.pendingProps);case 24:return ca(r),l=Wt(xt),t===null?(f=Ed(),f===null&&(f=nt,d=_d(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),r.memoizedState={parent:l,cache:f},bd(r),Zr(r,xt,f)):((t.lanes&a)!==0&&(Ad(t,r),Pl(r,null,null,a),kl()),f=t.memoizedState,d=r.memoizedState,f.parent!==l?(f={parent:l,cache:l},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),Zr(r,xt,l)):(l=d.cache,Zr(r,xt,l),l!==f.cache&&yd(r,[xt],a,!0))),Jt(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function pr(t){t.flags|=4}function rm(t,r,a,l,f){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(Cv())t.flags|=8192;else throw da=Pc,Td}else t.flags&=-16777217}function tv(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!gE(r))if(Cv())t.flags|=8192;else throw da=Pc,Td}function Zc(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?sc():536870912,t.lanes|=r,vo|=r)}function ql(t,r){if(!Le)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function ot(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function cw(t,r,a){var l=r.pendingProps;switch(fd(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(r),null;case 1:return ot(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),hr(xt),ut(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(so(r)?pr(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,md())),ot(r),null;case 26:var f=r.type,d=r.memoizedState;return t===null?(pr(r),d!==null?(ot(r),tv(r,d)):(ot(r),rm(r,f,null,l,a))):d?d!==t.memoizedState?(pr(r),ot(r),tv(r,d)):(ot(r),r.flags&=-16777217):(t=t.memoizedProps,t!==l&&pr(r),ot(r),rm(r,f,t,l,a)),null;case 27:if(La(r),a=Ie.current,f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&pr(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return ot(r),null}t=ce.current,so(r)?Vy(r):(t=lE(f,l,a),r.stateNode=t,pr(r))}return ot(r),null;case 5:if(La(r),f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&pr(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return ot(r),null}if(d=ce.current,so(r))Vy(r);else{var _=mh(Ie.current);switch(d){case 1:d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=_.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?_.createElement(f,{is:l.is}):_.createElement(f)}}d[Rt]=r,d[qt]=l;e:for(_=r.child;_!==null;){if(_.tag===5||_.tag===6)d.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===r)break e;for(;_.sibling===null;){if(_.return===null||_.return===r)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}r.stateNode=d;e:switch(Zt(d,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&pr(r)}}return ot(r),rm(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,a),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&pr(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(t=Ie.current,so(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,f=Xt,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}t[Rt]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Wv(t.nodeValue,a)),t||Jr(r,!0)}else t=mh(t).createTextNode(l),t[Rt]=r,r.stateNode=t}return ot(r),null;case 31:if(a=r.memoizedState,t===null||t.memoizedState!==null){if(l=so(r),a!==null){if(t===null){if(!l)throw Error(s(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[Rt]=r}else la(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ot(r),t=!1}else a=md(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return r.flags&256?(On(r),r):(On(r),null);if((r.flags&128)!==0)throw Error(s(558))}return ot(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=so(r),l!==null&&l.dehydrated!==null){if(t===null){if(!f)throw Error(s(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Rt]=r}else la(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ot(r),f=!1}else f=md(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(On(r),r):(On(r),null)}return On(r),(r.flags&128)!==0?(r.lanes=a,r):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=r.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)),a!==t&&a&&(r.child.flags|=8192),Zc(r,r.updateQueue),ot(r),null);case 4:return ut(),t===null&&Rm(r.stateNode.containerInfo),ot(r),null;case 10:return hr(r.type),ot(r),null;case 19:if(te(Tt),l=r.memoizedState,l===null)return ot(r),null;if(f=(r.flags&128)!==0,d=l.rendering,d===null)if(f)ql(l,!1);else{if(gt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(d=zc(t),d!==null){for(r.flags|=128,ql(l,!1),t=d.updateQueue,r.updateQueue=t,Zc(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)xy(a,t),a=a.sibling;return le(Tt,Tt.current&1|2),Le&&ur(r,l.treeForkCount),r.child}t=t.sibling}l.tail!==null&&fn()>rh&&(r.flags|=128,f=!0,ql(l,!1),r.lanes=4194304)}else{if(!f)if(t=zc(d),t!==null){if(r.flags|=128,f=!0,t=t.updateQueue,r.updateQueue=t,Zc(r,t),ql(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Le)return ot(r),null}else 2*fn()-l.renderingStartTime>rh&&a!==536870912&&(r.flags|=128,f=!0,ql(l,!1),r.lanes=4194304);l.isBackwards?(d.sibling=r.child,r.child=d):(t=l.last,t!==null?t.sibling=d:r.child=d,l.last=d)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=fn(),t.sibling=null,a=Tt.current,le(Tt,f?a&1|2:a&1),Le&&ur(r,l.treeForkCount),t):(ot(r),null);case 22:case 23:return On(r),Cd(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(ot(r),r.subtreeFlags&6&&(r.flags|=8192)):ot(r),a=r.updateQueue,a!==null&&Zc(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&te(ha),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),hr(xt),ot(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function hw(t,r){switch(fd(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return hr(xt),ut(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return La(r),null;case 31:if(r.memoizedState!==null){if(On(r),r.alternate===null)throw Error(s(340));la()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(On(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(s(340));la()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return te(Tt),null;case 4:return ut(),null;case 10:return hr(r.type),null;case 22:case 23:return On(r),Cd(),t!==null&&te(ha),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return hr(xt),null;case 25:return null;default:return null}}function nv(t,r){switch(fd(r),r.tag){case 3:hr(xt),ut();break;case 26:case 27:case 5:La(r);break;case 4:ut();break;case 31:r.memoizedState!==null&&On(r);break;case 13:On(r);break;case 19:te(Tt);break;case 10:hr(r.type);break;case 22:case 23:On(r),Cd(),t!==null&&te(ha);break;case 24:hr(xt)}}function Hl(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&t)===t){l=void 0;var d=a.create,_=a.inst;l=d(),_.destroy=l}a=a.next}while(a!==f)}}catch(S){Xe(r,r.return,S)}}function ss(t,r,a){try{var l=r.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&t)===t){var _=l.inst,S=_.destroy;if(S!==void 0){_.destroy=void 0,f=r;var O=a,F=S;try{F()}catch(W){Xe(f,O,W)}}}l=l.next}while(l!==d)}}catch(W){Xe(r,r.return,W)}}function iv(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{Qy(r,a)}catch(l){Xe(t,t.return,l)}}}function rv(t,r,a){a.props=ga(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){Xe(t,r,l)}}function Fl(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(f){Xe(t,r,f)}}function Bi(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){Xe(t,r,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){Xe(t,r,f)}else a.current=null}function sv(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){Xe(t,t.return,f)}}function sm(t,r,a){try{var l=t.stateNode;Mw(l,t.type,a,r),l[qt]=r}catch(f){Xe(t,t.return,f)}}function av(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&fs(t.type)||t.tag===4}function am(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||av(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&fs(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function om(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=ri));else if(l!==4&&(l===27&&fs(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(om(t,r,a),t=t.sibling;t!==null;)om(t,r,a),t=t.sibling}function eh(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&fs(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(eh(t,r,a),t=t.sibling;t!==null;)eh(t,r,a),t=t.sibling}function ov(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);Zt(r,l,a),r[Rt]=t,r[qt]=a}catch(d){Xe(t,t.return,d)}}var gr=!1,Ot=!1,lm=!1,lv=typeof WeakSet=="function"?WeakSet:Set,Ft=null;function fw(t,r){if(t=t.containerInfo,xm=Th,t=Ey(t),td(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var _=0,S=-1,O=-1,F=0,W=0,ee=t,G=null;t:for(;;){for(var Q;ee!==a||f!==0&&ee.nodeType!==3||(S=_+f),ee!==d||l!==0&&ee.nodeType!==3||(O=_+l),ee.nodeType===3&&(_+=ee.nodeValue.length),(Q=ee.firstChild)!==null;)G=ee,ee=Q;for(;;){if(ee===t)break t;if(G===a&&++F===f&&(S=_),G===d&&++W===l&&(O=_),(Q=ee.nextSibling)!==null)break;ee=G,G=ee.parentNode}ee=Q}a=S===-1||O===-1?null:{start:S,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(Dm={focusedElem:t,selectionRange:a},Th=!1,Ft=r;Ft!==null;)if(r=Ft,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,Ft=t;else for(;Ft!==null;){switch(r=Ft,d=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)f=t[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=r,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var fe=ga(a.type,f);t=l.getSnapshotBeforeUpdate(fe,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(ve){Xe(a,a.return,ve)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)Mm(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Mm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=r.sibling,t!==null){t.return=r.return,Ft=t;break}Ft=r.return}}function uv(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:_r(t,a),l&4&&Hl(5,a);break;case 1:if(_r(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(_){Xe(a,a.return,_)}else{var f=ga(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(f,r,t.__reactInternalSnapshotBeforeUpdate)}catch(_){Xe(a,a.return,_)}}l&64&&iv(a),l&512&&Fl(a,a.return);break;case 3:if(_r(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Qy(t,r)}catch(_){Xe(a,a.return,_)}}break;case 27:r===null&&l&4&&ov(a);case 26:case 5:_r(t,a),r===null&&l&4&&sv(a),l&512&&Fl(a,a.return);break;case 12:_r(t,a);break;case 31:_r(t,a),l&4&&fv(t,a);break;case 13:_r(t,a),l&4&&dv(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=Tw.bind(null,a),Bw(t,a))));break;case 22:if(l=a.memoizedState!==null||gr,!l){r=r!==null&&r.memoizedState!==null||Ot,f=gr;var d=Ot;gr=l,(Ot=r)&&!d?vr(t,a,(a.subtreeFlags&8772)!==0):_r(t,a),gr=f,Ot=d}break;case 30:break;default:_r(t,a)}}function cv(t){var r=t.alternate;r!==null&&(t.alternate=null,cv(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&qa(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ht=null,En=!1;function yr(t,r,a){for(a=a.child;a!==null;)hv(t,r,a),a=a.sibling}function hv(t,r,a){if(Yt&&typeof Yt.onCommitFiberUnmount=="function")try{Yt.onCommitFiberUnmount(ei,a)}catch{}switch(a.tag){case 26:Ot||Bi(a,r),yr(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ot||Bi(a,r);var l=ht,f=En;fs(a.type)&&(ht=a.stateNode,En=!1),yr(t,r,a),Zl(a.stateNode),ht=l,En=f;break;case 5:Ot||Bi(a,r);case 6:if(l=ht,f=En,ht=null,yr(t,r,a),ht=l,En=f,ht!==null)if(En)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(a.stateNode)}catch(d){Xe(a,r,d)}else try{ht.removeChild(a.stateNode)}catch(d){Xe(a,r,d)}break;case 18:ht!==null&&(En?(t=ht,iE(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Co(t)):iE(ht,a.stateNode));break;case 4:l=ht,f=En,ht=a.stateNode.containerInfo,En=!0,yr(t,r,a),ht=l,En=f;break;case 0:case 11:case 14:case 15:ss(2,a,r),Ot||ss(4,a,r),yr(t,r,a);break;case 1:Ot||(Bi(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&rv(a,r,l)),yr(t,r,a);break;case 21:yr(t,r,a);break;case 22:Ot=(l=Ot)||a.memoizedState!==null,yr(t,r,a),Ot=l;break;default:yr(t,r,a)}}function fv(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Co(t)}catch(a){Xe(r,r.return,a)}}}function dv(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Co(t)}catch(a){Xe(r,r.return,a)}}function dw(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new lv),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new lv),r;default:throw Error(s(435,t.tag))}}function th(t,r){var a=dw(t);r.forEach(function(l){if(!a.has(l)){a.add(l);var f=bw.bind(null,t,l);l.then(f,f)}})}function Tn(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=t,_=r,S=_;e:for(;S!==null;){switch(S.tag){case 27:if(fs(S.type)){ht=S.stateNode,En=!1;break e}break;case 5:ht=S.stateNode,En=!1;break e;case 3:case 4:ht=S.stateNode.containerInfo,En=!0;break e}S=S.return}if(ht===null)throw Error(s(160));hv(d,_,f),ht=null,En=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)mv(r,t),r=r.sibling}var ci=null;function mv(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Tn(r,t),bn(t),l&4&&(ss(3,t,t.return),Hl(3,t),ss(5,t,t.return));break;case 1:Tn(r,t),bn(t),l&512&&(Ot||a===null||Bi(a,a.return)),l&64&&gr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=ci;if(Tn(r,t),bn(t),l&512&&(Ot||a===null||Bi(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[Ci]||d[Rt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),Zt(d,l,a),d[Rt]=t,Ct(d),l=d;break e;case"link":var _=mE("link","href",f).get(l+(a.href||""));if(_){for(var S=0;S<_.length;S++)if(d=_[S],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(S,1);break t}}d=f.createElement(l),Zt(d,l,a),f.head.appendChild(d);break;case"meta":if(_=mE("meta","content",f).get(l+(a.content||""))){for(S=0;S<_.length;S++)if(d=_[S],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(S,1);break t}}d=f.createElement(l),Zt(d,l,a),f.head.appendChild(d);break;default:throw Error(s(468,l))}d[Rt]=t,Ct(d),l=d}t.stateNode=l}else pE(f,t.type,t.stateNode);else t.stateNode=dE(f,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?pE(f,t.type,t.stateNode):dE(f,l,t.memoizedProps)):l===null&&t.stateNode!==null&&sm(t,t.memoizedProps,a.memoizedProps)}break;case 27:Tn(r,t),bn(t),l&512&&(Ot||a===null||Bi(a,a.return)),a!==null&&l&4&&sm(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Tn(r,t),bn(t),l&512&&(Ot||a===null||Bi(a,a.return)),t.flags&32){f=t.stateNode;try{vn(f,"")}catch(fe){Xe(t,t.return,fe)}}l&4&&t.stateNode!=null&&(f=t.memoizedProps,sm(t,f,a!==null?a.memoizedProps:f)),l&1024&&(lm=!0);break;case 6:if(Tn(r,t),bn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(fe){Xe(t,t.return,fe)}}break;case 3:if(yh=null,f=ci,ci=ph(r.containerInfo),Tn(r,t),ci=f,bn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Co(r.containerInfo)}catch(fe){Xe(t,t.return,fe)}lm&&(lm=!1,pv(t));break;case 4:l=ci,ci=ph(t.stateNode.containerInfo),Tn(r,t),bn(t),ci=l;break;case 12:Tn(r,t),bn(t);break;case 31:Tn(r,t),bn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,th(t,l)));break;case 13:Tn(r,t),bn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(ih=fn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,th(t,l)));break;case 22:f=t.memoizedState!==null;var O=a!==null&&a.memoizedState!==null,F=gr,W=Ot;if(gr=F||f,Ot=W||O,Tn(r,t),Ot=W,gr=F,bn(t),l&8192)e:for(r=t.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(a===null||O||gr||Ot||ya(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){O=a=r;try{if(d=O.stateNode,f)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{S=O.stateNode;var ee=O.memoizedProps.style,G=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;S.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(fe){Xe(O,O.return,fe)}}}else if(r.tag===6){if(a===null){O=r;try{O.stateNode.nodeValue=f?"":O.memoizedProps}catch(fe){Xe(O,O.return,fe)}}}else if(r.tag===18){if(a===null){O=r;try{var Q=O.stateNode;f?rE(Q,!0):rE(O.stateNode,!1)}catch(fe){Xe(O,O.return,fe)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,th(t,a))));break;case 19:Tn(r,t),bn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,th(t,l)));break;case 30:break;case 21:break;default:Tn(r,t),bn(t)}}function bn(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(av(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var f=a.stateNode,d=am(t);eh(t,d,f);break;case 5:var _=a.stateNode;a.flags&32&&(vn(_,""),a.flags&=-33);var S=am(t);eh(t,S,_);break;case 3:case 4:var O=a.stateNode.containerInfo,F=am(t);om(t,F,O);break;default:throw Error(s(161))}}catch(W){Xe(t,t.return,W)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function pv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;pv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function _r(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)uv(t,r.alternate,r),r=r.sibling}function ya(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:ss(4,r,r.return),ya(r);break;case 1:Bi(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&rv(r,r.return,a),ya(r);break;case 27:Zl(r.stateNode);case 26:case 5:Bi(r,r.return),ya(r);break;case 22:r.memoizedState===null&&ya(r);break;case 30:ya(r);break;default:ya(r)}t=t.sibling}}function vr(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,f=t,d=r,_=d.flags;switch(d.tag){case 0:case 11:case 15:vr(f,d,a),Hl(4,d);break;case 1:if(vr(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(F){Xe(l,l.return,F)}if(l=d,f=l.updateQueue,f!==null){var S=l.stateNode;try{var O=f.shared.hiddenCallbacks;if(O!==null)for(f.shared.hiddenCallbacks=null,f=0;f<O.length;f++)Ky(O[f],S)}catch(F){Xe(l,l.return,F)}}a&&_&64&&iv(d),Fl(d,d.return);break;case 27:ov(d);case 26:case 5:vr(f,d,a),a&&l===null&&_&4&&sv(d),Fl(d,d.return);break;case 12:vr(f,d,a);break;case 31:vr(f,d,a),a&&_&4&&fv(f,d);break;case 13:vr(f,d,a),a&&_&4&&dv(f,d);break;case 22:d.memoizedState===null&&vr(f,d,a),Fl(d,d.return);break;case 30:break;default:vr(f,d,a)}r=r.sibling}}function um(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Dl(a))}function cm(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&Dl(t))}function hi(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)gv(t,r,a,l),r=r.sibling}function gv(t,r,a,l){var f=r.flags;switch(r.tag){case 0:case 11:case 15:hi(t,r,a,l),f&2048&&Hl(9,r);break;case 1:hi(t,r,a,l);break;case 3:hi(t,r,a,l),f&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&Dl(t)));break;case 12:if(f&2048){hi(t,r,a,l),t=r.stateNode;try{var d=r.memoizedProps,_=d.id,S=d.onPostCommit;typeof S=="function"&&S(_,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(O){Xe(r,r.return,O)}}else hi(t,r,a,l);break;case 31:hi(t,r,a,l);break;case 13:hi(t,r,a,l);break;case 23:break;case 22:d=r.stateNode,_=r.alternate,r.memoizedState!==null?d._visibility&2?hi(t,r,a,l):Gl(t,r):d._visibility&2?hi(t,r,a,l):(d._visibility|=2,go(t,r,a,l,(r.subtreeFlags&10256)!==0||!1)),f&2048&&um(_,r);break;case 24:hi(t,r,a,l),f&2048&&cm(r.alternate,r);break;default:hi(t,r,a,l)}}function go(t,r,a,l,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var d=t,_=r,S=a,O=l,F=_.flags;switch(_.tag){case 0:case 11:case 15:go(d,_,S,O,f),Hl(8,_);break;case 23:break;case 22:var W=_.stateNode;_.memoizedState!==null?W._visibility&2?go(d,_,S,O,f):Gl(d,_):(W._visibility|=2,go(d,_,S,O,f)),f&&F&2048&&um(_.alternate,_);break;case 24:go(d,_,S,O,f),f&&F&2048&&cm(_.alternate,_);break;default:go(d,_,S,O,f)}r=r.sibling}}function Gl(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,f=l.flags;switch(l.tag){case 22:Gl(a,l),f&2048&&um(l.alternate,l);break;case 24:Gl(a,l),f&2048&&cm(l.alternate,l);break;default:Gl(a,l)}r=r.sibling}}var Kl=8192;function yo(t,r,a){if(t.subtreeFlags&Kl)for(t=t.child;t!==null;)yv(t,r,a),t=t.sibling}function yv(t,r,a){switch(t.tag){case 26:yo(t,r,a),t.flags&Kl&&t.memoizedState!==null&&Zw(a,ci,t.memoizedState,t.memoizedProps);break;case 5:yo(t,r,a);break;case 3:case 4:var l=ci;ci=ph(t.stateNode.containerInfo),yo(t,r,a),ci=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Kl,Kl=16777216,yo(t,r,a),Kl=l):yo(t,r,a));break;default:yo(t,r,a)}}function _v(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Ql(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Ft=l,Ev(l,t)}_v(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)vv(t),t=t.sibling}function vv(t){switch(t.tag){case 0:case 11:case 15:Ql(t),t.flags&2048&&ss(9,t,t.return);break;case 3:Ql(t);break;case 12:Ql(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,nh(t)):Ql(t);break;default:Ql(t)}}function nh(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Ft=l,Ev(l,t)}_v(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:ss(8,r,r.return),nh(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,nh(r));break;default:nh(r)}t=t.sibling}}function Ev(t,r){for(;Ft!==null;){var a=Ft;switch(a.tag){case 0:case 11:case 15:ss(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Dl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Ft=l;else e:for(a=t;Ft!==null;){l=Ft;var f=l.sibling,d=l.return;if(cv(l),l===a){Ft=null;break e}if(f!==null){f.return=d,Ft=f;break e}Ft=d}}}var mw={getCacheForType:function(t){var r=Wt(xt),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a},cacheSignal:function(){return Wt(xt).controller.signal}},pw=typeof WeakMap=="function"?WeakMap:Map,Ge=0,nt=null,De=null,Oe=0,$e=0,Mn=null,as=!1,_o=!1,hm=!1,Er=0,gt=0,os=0,_a=0,fm=0,Vn=0,vo=0,Yl=null,An=null,dm=!1,ih=0,Tv=0,rh=1/0,sh=null,ls=null,zt=0,us=null,Eo=null,Tr=0,mm=0,pm=null,bv=null,$l=0,gm=null;function kn(){return(Ge&2)!==0&&Oe!==0?Oe&-Oe:J.T!==null?bm():ac()}function Av(){if(Vn===0)if((Oe&536870912)===0||Le){var t=Gs;Gs<<=1,(Gs&3932160)===0&&(Gs=262144),Vn=t}else Vn=536870912;return t=Nn.current,t!==null&&(t.flags|=32),Vn}function Sn(t,r,a){(t===nt&&($e===2||$e===9)||t.cancelPendingCommit!==null)&&(To(t,0),cs(t,Oe,Vn,!1)),Ks(t,a),((Ge&2)===0||t!==nt)&&(t===nt&&((Ge&2)===0&&(_a|=a),gt===4&&cs(t,Oe,Vn,!1)),qi(t))}function Sv(t,r,a){if((Ge&6)!==0)throw Error(s(327));var l=!a&&(r&127)===0&&(r&t.expiredLanes)===0||ti(t,r),f=l?_w(t,r):_m(t,r,!0),d=l;do{if(f===0){_o&&!l&&cs(t,r,0,!1);break}else{if(a=t.current.alternate,d&&!gw(a)){f=_m(t,r,!1),d=!1;continue}if(f===2){if(d=r,t.errorRecoveryDisabledLanes&d)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){r=_;e:{var S=t;f=Yl;var O=S.current.memoizedState.isDehydrated;if(O&&(To(S,_).flags|=256),_=_m(S,_,!1),_!==2){if(hm&&!O){S.errorRecoveryDisabledLanes|=d,_a|=d,f=4;break e}d=An,An=f,d!==null&&(An===null?An=d:An.push.apply(An,d))}f=_}if(d=!1,f!==2)continue}}if(f===1){To(t,0),cs(t,r,0,!0);break}e:{switch(l=t,d=f,d){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:cs(l,r,Vn,!as);break e;case 2:An=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(f=ih+300-fn(),10<f)){if(cs(l,r,Vn,!as),Si(l,0,!0)!==0)break e;Tr=r,l.timeoutHandle=tE(wv.bind(null,l,a,An,sh,dm,r,Vn,_a,vo,as,d,"Throttled",-0,0),f);break e}wv(l,a,An,sh,dm,r,Vn,_a,vo,as,d,null,-0,0)}}break}while(!0);qi(t)}function wv(t,r,a,l,f,d,_,S,O,F,W,ee,G,Q){if(t.timeoutHandle=-1,ee=r.subtreeFlags,ee&8192||(ee&16785408)===16785408){ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ri},yv(r,d,ee);var fe=(d&62914560)===d?ih-fn():(d&4194048)===d?Tv-fn():0;if(fe=eR(ee,fe),fe!==null){Tr=d,t.cancelPendingCommit=fe(Mv.bind(null,t,r,d,a,l,f,_,S,O,W,ee,null,G,Q)),cs(t,d,_,!F);return}}Mv(t,r,d,a,l,f,_,S,O)}function gw(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!xn(d(),f))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function cs(t,r,a,l){r&=~fm,r&=~_a,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var f=r;0<f;){var d=31-vt(f),_=1<<d;l[d]=-1,f&=~_}a!==0&&Qs(t,a,r)}function ah(){return(Ge&6)===0?(Xl(0),!1):!0}function ym(){if(De!==null){if($e===0)var t=De.return;else t=De,cr=ua=null,Md(t),co=null,Ol=0,t=De;for(;t!==null;)nv(t.alternate,t),t=t.return;De=null}}function To(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,Pw(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Tr=0,ym(),nt=t,De=a=lr(t.current,null),Oe=r,$e=0,Mn=null,as=!1,_o=ti(t,r),hm=!1,vo=Vn=fm=_a=os=gt=0,An=Yl=null,dm=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var f=31-vt(l),d=1<<f;r|=t[f],l&=~d}return Er=r,Cc(),a}function Rv(t,r){Ce=null,J.H=zl,r===uo||r===kc?(r=qy(),$e=3):r===Td?(r=qy(),$e=4):$e=r===$d?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Mn=r,De===null&&(gt=1,$c(t,Kn(r,t.current)))}function Cv(){var t=Nn.current;return t===null?!0:(Oe&4194048)===Oe?Xn===null:(Oe&62914560)===Oe||(Oe&536870912)!==0?t===Xn:!1}function Iv(){var t=J.H;return J.H=zl,t===null?zl:t}function xv(){var t=J.A;return J.A=mw,t}function oh(){gt=4,as||(Oe&4194048)!==Oe&&Nn.current!==null||(_o=!0),(os&134217727)===0&&(_a&134217727)===0||nt===null||cs(nt,Oe,Vn,!1)}function _m(t,r,a){var l=Ge;Ge|=2;var f=Iv(),d=xv();(nt!==t||Oe!==r)&&(sh=null,To(t,r)),r=!1;var _=gt;e:do try{if($e!==0&&De!==null){var S=De,O=Mn;switch($e){case 8:ym(),_=6;break e;case 3:case 2:case 9:case 6:Nn.current===null&&(r=!0);var F=$e;if($e=0,Mn=null,bo(t,S,O,F),a&&_o){_=0;break e}break;default:F=$e,$e=0,Mn=null,bo(t,S,O,F)}}yw(),_=gt;break}catch(W){Rv(t,W)}while(!0);return r&&t.shellSuspendCounter++,cr=ua=null,Ge=l,J.H=f,J.A=d,De===null&&(nt=null,Oe=0,Cc()),_}function yw(){for(;De!==null;)Dv(De)}function _w(t,r){var a=Ge;Ge|=2;var l=Iv(),f=xv();nt!==t||Oe!==r?(sh=null,rh=fn()+500,To(t,r)):_o=ti(t,r);e:do try{if($e!==0&&De!==null){r=De;var d=Mn;t:switch($e){case 1:$e=0,Mn=null,bo(t,r,d,1);break;case 2:case 9:if(zy(d)){$e=0,Mn=null,Nv(r);break}r=function(){$e!==2&&$e!==9||nt!==t||($e=7),qi(t)},d.then(r,r);break e;case 3:$e=7;break e;case 4:$e=5;break e;case 7:zy(d)?($e=0,Mn=null,Nv(r)):($e=0,Mn=null,bo(t,r,d,7));break;case 5:var _=null;switch(De.tag){case 26:_=De.memoizedState;case 5:case 27:var S=De;if(_?gE(_):S.stateNode.complete){$e=0,Mn=null;var O=S.sibling;if(O!==null)De=O;else{var F=S.return;F!==null?(De=F,lh(F)):De=null}break t}}$e=0,Mn=null,bo(t,r,d,5);break;case 6:$e=0,Mn=null,bo(t,r,d,6);break;case 8:ym(),gt=6;break e;default:throw Error(s(462))}}vw();break}catch(W){Rv(t,W)}while(!0);return cr=ua=null,J.H=l,J.A=f,Ge=a,De!==null?0:(nt=null,Oe=0,Cc(),gt)}function vw(){for(;De!==null&&!Yf();)Dv(De)}function Dv(t){var r=ev(t.alternate,t,Er);t.memoizedProps=t.pendingProps,r===null?lh(t):De=r}function Nv(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=Y_(a,r,r.pendingProps,r.type,void 0,Oe);break;case 11:r=Y_(a,r,r.pendingProps,r.type.render,r.ref,Oe);break;case 5:Md(r);default:nv(a,r),r=De=xy(r,Er),r=ev(a,r,Er)}t.memoizedProps=t.pendingProps,r===null?lh(t):De=r}function bo(t,r,a,l){cr=ua=null,Md(r),co=null,Ol=0;var f=r.return;try{if(ow(t,f,r,a,Oe)){gt=1,$c(t,Kn(a,t.current)),De=null;return}}catch(d){if(f!==null)throw De=f,d;gt=1,$c(t,Kn(a,t.current)),De=null;return}r.flags&32768?(Le||l===1?t=!0:_o||(Oe&536870912)!==0?t=!1:(as=t=!0,(l===2||l===9||l===3||l===6)&&(l=Nn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Ov(r,t)):lh(r)}function lh(t){var r=t;do{if((r.flags&32768)!==0){Ov(r,as);return}t=r.return;var a=cw(r.alternate,r,Er);if(a!==null){De=a;return}if(r=r.sibling,r!==null){De=r;return}De=r=t}while(r!==null);gt===0&&(gt=5)}function Ov(t,r){do{var a=hw(t.alternate,t);if(a!==null){a.flags&=32767,De=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){De=t;return}De=t=a}while(t!==null);gt=6,De=null}function Mv(t,r,a,l,f,d,_,S,O){t.cancelPendingCommit=null;do uh();while(zt!==0);if((Ge&6)!==0)throw Error(s(327));if(r!==null){if(r===t.current)throw Error(s(177));if(d=r.lanes|r.childLanes,d|=ad,Wf(t,a,d,_,S,O),t===nt&&(De=nt=null,Oe=0),Eo=r,us=t,Tr=a,mm=d,pm=f,bv=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Aw(zr,function(){return Uv(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=J.T,J.T=null,f=oe.p,oe.p=2,_=Ge,Ge|=4;try{fw(t,r,a)}finally{Ge=_,oe.p=f,J.T=l}}zt=1,Vv(),kv(),Pv()}}function Vv(){if(zt===1){zt=0;var t=us,r=Eo,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=J.T,J.T=null;var l=oe.p;oe.p=2;var f=Ge;Ge|=4;try{mv(r,t);var d=Dm,_=Ey(t.containerInfo),S=d.focusedElem,O=d.selectionRange;if(_!==S&&S&&S.ownerDocument&&vy(S.ownerDocument.documentElement,S)){if(O!==null&&td(S)){var F=O.start,W=O.end;if(W===void 0&&(W=F),"selectionStart"in S)S.selectionStart=F,S.selectionEnd=Math.min(W,S.value.length);else{var ee=S.ownerDocument||document,G=ee&&ee.defaultView||window;if(G.getSelection){var Q=G.getSelection(),fe=S.textContent.length,ve=Math.min(O.start,fe),tt=O.end===void 0?ve:Math.min(O.end,fe);!Q.extend&&ve>tt&&(_=tt,tt=ve,ve=_);var z=_y(S,ve),k=_y(S,tt);if(z&&k&&(Q.rangeCount!==1||Q.anchorNode!==z.node||Q.anchorOffset!==z.offset||Q.focusNode!==k.node||Q.focusOffset!==k.offset)){var H=ee.createRange();H.setStart(z.node,z.offset),Q.removeAllRanges(),ve>tt?(Q.addRange(H),Q.extend(k.node,k.offset)):(H.setEnd(k.node,k.offset),Q.addRange(H))}}}}for(ee=[],Q=S;Q=Q.parentNode;)Q.nodeType===1&&ee.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<ee.length;S++){var Z=ee[S];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}Th=!!xm,Dm=xm=null}finally{Ge=f,oe.p=l,J.T=a}}t.current=r,zt=2}}function kv(){if(zt===2){zt=0;var t=us,r=Eo,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=J.T,J.T=null;var l=oe.p;oe.p=2;var f=Ge;Ge|=4;try{uv(t,r.alternate,r)}finally{Ge=f,oe.p=l,J.T=a}}zt=3}}function Pv(){if(zt===4||zt===3){zt=0,Zu();var t=us,r=Eo,a=Tr,l=bv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?zt=5:(zt=0,Eo=us=null,Lv(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(ls=null),rr(a),r=r.stateNode,Yt&&typeof Yt.onCommitFiberRoot=="function")try{Yt.onCommitFiberRoot(ei,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=J.T,f=oe.p,oe.p=2,J.T=null;try{for(var d=t.onRecoverableError,_=0;_<l.length;_++){var S=l[_];d(S.value,{componentStack:S.stack})}}finally{J.T=r,oe.p=f}}(Tr&3)!==0&&uh(),qi(t),f=t.pendingLanes,(a&261930)!==0&&(f&42)!==0?t===gm?$l++:($l=0,gm=t):$l=0,Xl(0)}}function Lv(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,Dl(r)))}function uh(){return Vv(),kv(),Pv(),Uv()}function Uv(){if(zt!==5)return!1;var t=us,r=mm;mm=0;var a=rr(Tr),l=J.T,f=oe.p;try{oe.p=32>a?32:a,J.T=null,a=pm,pm=null;var d=us,_=Tr;if(zt=0,Eo=us=null,Tr=0,(Ge&6)!==0)throw Error(s(331));var S=Ge;if(Ge|=4,vv(d.current),gv(d,d.current,_,a),Ge=S,Xl(0,!1),Yt&&typeof Yt.onPostCommitFiberRoot=="function")try{Yt.onPostCommitFiberRoot(ei,d)}catch{}return!0}finally{oe.p=f,J.T=l,Lv(t,r)}}function jv(t,r,a){r=Kn(a,r),r=Yd(t.stateNode,r,2),t=ns(t,r,2),t!==null&&(Ks(t,2),qi(t))}function Xe(t,r,a){if(t.tag===3)jv(t,t,a);else for(;r!==null;){if(r.tag===3){jv(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ls===null||!ls.has(l))){t=Kn(a,t),a=z_(2),l=ns(r,a,2),l!==null&&(B_(a,l,r,t),Ks(l,2),qi(l));break}}r=r.return}}function vm(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new pw;var f=new Set;l.set(r,f)}else f=l.get(r),f===void 0&&(f=new Set,l.set(r,f));f.has(a)||(hm=!0,f.add(a),t=Ew.bind(null,t,r,a),r.then(t,t))}function Ew(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,nt===t&&(Oe&a)===a&&(gt===4||gt===3&&(Oe&62914560)===Oe&&300>fn()-ih?(Ge&2)===0&&To(t,0):fm|=a,vo===Oe&&(vo=0)),qi(t)}function zv(t,r){r===0&&(r=sc()),t=aa(t,r),t!==null&&(Ks(t,r),qi(t))}function Tw(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),zv(t,a)}function bw(t,r){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),zv(t,a)}function Aw(t,r){return jt(t,r)}var ch=null,Ao=null,Em=!1,hh=!1,Tm=!1,hs=0;function qi(t){t!==Ao&&t.next===null&&(Ao===null?ch=Ao=t:Ao=Ao.next=t),hh=!0,Em||(Em=!0,ww())}function Xl(t,r){if(!Tm&&hh){Tm=!0;do for(var a=!1,l=ch;l!==null;){if(t!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var _=l.suspendedLanes,S=l.pingedLanes;d=(1<<31-vt(42|t)+1)-1,d&=f&~(_&~S),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,Fv(l,d))}else d=Oe,d=Si(l,l===nt?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||ti(l,d)||(a=!0,Fv(l,d));l=l.next}while(a);Tm=!1}}function Sw(){Bv()}function Bv(){hh=Em=!1;var t=0;hs!==0&&kw()&&(t=hs);for(var r=fn(),a=null,l=ch;l!==null;){var f=l.next,d=qv(l,r);d===0?(l.next=null,a===null?ch=f:a.next=f,f===null&&(Ao=a)):(a=l,(t!==0||(d&3)!==0)&&(hh=!0)),l=f}zt!==0&&zt!==5||Xl(t),hs!==0&&(hs=0)}function qv(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var _=31-vt(d),S=1<<_,O=f[_];O===-1?((S&a)===0||(S&l)!==0)&&(f[_]=Xf(S,r)):O<=r&&(t.expiredLanes|=S),d&=~S}if(r=nt,a=Oe,a=Si(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&($e===2||$e===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&jr(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||ti(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&jr(l),rr(a)){case 2:case 8:a=al;break;case 32:a=zr;break;case 268435456:a=ec;break;default:a=zr}return l=Hv.bind(null,t),a=jt(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&jr(l),t.callbackPriority=2,t.callbackNode=null,2}function Hv(t,r){if(zt!==0&&zt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(uh()&&t.callbackNode!==a)return null;var l=Oe;return l=Si(t,t===nt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Sv(t,l,r),qv(t,fn()),t.callbackNode!=null&&t.callbackNode===a?Hv.bind(null,t):null)}function Fv(t,r){if(uh())return null;Sv(t,r,!0)}function ww(){Lw(function(){(Ge&6)!==0?jt(sl,Sw):Bv()})}function bm(){if(hs===0){var t=oo;t===0&&(t=bi,bi<<=1,(bi&261888)===0&&(bi=256)),hs=t}return hs}function Gv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ka(""+t)}function Kv(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function Rw(t,r,a,l,f){if(r==="submit"&&a&&a.stateNode===f){var d=Gv((f[qt]||null).action),_=l.submitter;_&&(r=(r=_[qt]||null)?Gv(r.formAction):_.getAttribute("formAction"),r!==null&&(d=r,_=null));var S=new ki("action","action",null,l,f);t.push({event:S,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(hs!==0){var O=_?Kv(f,_):new FormData(f);qd(a,{pending:!0,data:O,method:f.method,action:d},null,O)}}else typeof d=="function"&&(S.preventDefault(),O=_?Kv(f,_):new FormData(f),qd(a,{pending:!0,data:O,method:f.method,action:d},d,O))},currentTarget:f}]})}}for(var Am=0;Am<sd.length;Am++){var Sm=sd[Am],Cw=Sm.toLowerCase(),Iw=Sm[0].toUpperCase()+Sm.slice(1);ui(Cw,"on"+Iw)}ui(Ay,"onAnimationEnd"),ui(Sy,"onAnimationIteration"),ui(wy,"onAnimationStart"),ui("dblclick","onDoubleClick"),ui("focusin","onFocus"),ui("focusout","onBlur"),ui(FS,"onTransitionRun"),ui(GS,"onTransitionStart"),ui(KS,"onTransitionCancel"),ui(Ry,"onTransitionEnd"),Ni("onMouseEnter",["mouseout","mouseover"]),Ni("onMouseLeave",["mouseout","mouseover"]),Ni("onPointerEnter",["pointerout","pointerover"]),Ni("onPointerLeave",["pointerout","pointerover"]),Di("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Di("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Di("onBeforeInput",["compositionend","keypress","textInput","paste"]),Di("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Di("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Di("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wl));function Qv(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],f=l.event;l=l.listeners;e:{var d=void 0;if(r)for(var _=l.length-1;0<=_;_--){var S=l[_],O=S.instance,F=S.currentTarget;if(S=S.listener,O!==d&&f.isPropagationStopped())break e;d=S,f.currentTarget=F;try{d(f)}catch(W){Rc(W)}f.currentTarget=null,d=O}else for(_=0;_<l.length;_++){if(S=l[_],O=S.instance,F=S.currentTarget,S=S.listener,O!==d&&f.isPropagationStopped())break e;d=S,f.currentTarget=F;try{d(f)}catch(W){Rc(W)}f.currentTarget=null,d=O}}}}function Ne(t,r){var a=r[Ba];a===void 0&&(a=r[Ba]=new Set);var l=t+"__bubble";a.has(l)||(Yv(r,t,2,!1),a.add(l))}function wm(t,r,a){var l=0;r&&(l|=4),Yv(a,t,l,r)}var fh="_reactListening"+Math.random().toString(36).slice(2);function Rm(t){if(!t[fh]){t[fh]=!0,ul.forEach(function(a){a!=="selectionchange"&&(xw.has(a)||wm(a,!1,t),wm(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[fh]||(r[fh]=!0,wm("selectionchange",!1,r))}}function Yv(t,r,a,l){switch(AE(r)){case 2:var f=iR;break;case 8:f=rR;break;default:f=Bm}a=f.bind(null,r,a,t),f=void 0,!Js||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(r,a,{capture:!0,passive:f}):t.addEventListener(r,a,!0):f!==void 0?t.addEventListener(r,a,{passive:f}):t.addEventListener(r,a,!1)}function Cm(t,r,a,l,f){var d=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var S=l.stateNode.containerInfo;if(S===f)break;if(_===4)for(_=l.return;_!==null;){var O=_.tag;if((O===3||O===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;S!==null;){if(_=Ii(S),_===null)return;if(O=_.tag,O===5||O===6||O===26||O===27){l=d=_;continue e}S=S.parentNode}}l=l.return}Kr(function(){var F=d,W=qn(a),ee=[];e:{var G=Cy.get(t);if(G!==void 0){var Q=ki,fe=t;switch(t){case"keypress":if(ea(a)===0)break e;case"keydown":case"keyup":Q=Ac;break;case"focusin":fe="focus",Q=na;break;case"focusout":fe="blur",Q=na;break;case"beforeblur":case"afterblur":Q=na;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=bl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=mc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=y;break;case Ay:case Sy:case wy:Q=gc;break;case Ry:Q=w;break;case"scroll":case"scrollend":Q=Tl;break;case"wheel":Q=K;break;case"copy":case"cut":case"paste":Q=yc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=or;break;case"toggle":case"beforetoggle":Q=Re}var ve=(r&4)!==0,tt=!ve&&(t==="scroll"||t==="scrollend"),z=ve?G!==null?G+"Capture":null:G;ve=[];for(var k=F,H;k!==null;){var Z=k;if(H=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||H===null||z===null||(Z=si(k,z),Z!=null&&ve.push(Jl(k,Z,H))),tt)break;k=k.return}0<ve.length&&(G=new Q(G,fe,null,a,W),ee.push({event:G,listeners:ve}))}}if((r&7)===0){e:{if(G=t==="mouseover"||t==="pointerover",Q=t==="mouseout"||t==="pointerout",G&&a!==_l&&(fe=a.relatedTarget||a.fromElement)&&(Ii(fe)||fe[Ri]))break e;if((Q||G)&&(G=W.window===W?W:(G=W.ownerDocument)?G.defaultView||G.parentWindow:window,Q?(fe=a.relatedTarget||a.toElement,Q=F,fe=fe?Ii(fe):null,fe!==null&&(tt=u(fe),ve=fe.tag,fe!==tt||ve!==5&&ve!==27&&ve!==6)&&(fe=null)):(Q=null,fe=F),Q!==fe)){if(ve=bl,Z="onMouseLeave",z="onMouseEnter",k="mouse",(t==="pointerout"||t==="pointerover")&&(ve=or,Z="onPointerLeave",z="onPointerEnter",k="pointer"),tt=Q==null?G:Cn(Q),H=fe==null?G:Cn(fe),G=new ve(Z,k+"leave",Q,a,W),G.target=tt,G.relatedTarget=H,Z=null,Ii(W)===F&&(ve=new ve(z,k+"enter",fe,a,W),ve.target=H,ve.relatedTarget=tt,Z=ve),tt=Z,Q&&fe)t:{for(ve=Dw,z=Q,k=fe,H=0,Z=z;Z;Z=ve(Z))H++;Z=0;for(var pe=k;pe;pe=ve(pe))Z++;for(;0<H-Z;)z=ve(z),H--;for(;0<Z-H;)k=ve(k),Z--;for(;H--;){if(z===k||k!==null&&z===k.alternate){ve=z;break t}z=ve(z),k=ve(k)}ve=null}else ve=null;Q!==null&&$v(ee,G,Q,ve,!1),fe!==null&&tt!==null&&$v(ee,tt,fe,ve,!0)}}e:{if(G=F?Cn(F):window,Q=G.nodeName&&G.nodeName.toLowerCase(),Q==="select"||Q==="input"&&G.type==="file")var qe=fy;else if(cy(G))if(dy)qe=BS;else{qe=jS;var de=US}else Q=G.nodeName,!Q||Q.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?F&&Ga(F.elementType)&&(qe=fy):qe=zS;if(qe&&(qe=qe(t,F))){hy(ee,qe,a,W);break e}de&&de(t,G,F),t==="focusout"&&F&&G.type==="number"&&F.memoizedProps.value!=null&&pl(G,"number",G.value)}switch(de=F?Cn(F):window,t){case"focusin":(cy(de)||de.contentEditable==="true")&&(Za=de,nd=F,Cl=null);break;case"focusout":Cl=nd=Za=null;break;case"mousedown":id=!0;break;case"contextmenu":case"mouseup":case"dragend":id=!1,Ty(ee,a,W);break;case"selectionchange":if(HS)break;case"keydown":case"keyup":Ty(ee,a,W)}var xe;if(Fe)e:{switch(t){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else Ja?ia(t,a)&&(Me="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Me="onCompositionStart");Me&&(Ui&&a.locale!=="ko"&&(Ja||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&Ja&&(xe=El()):(Vi=W,vl="value"in Vi?Vi.value:Vi.textContent,Ja=!0)),de=dh(F,Me),0<de.length&&(Me=new Li(Me,t,null,a,W),ee.push({event:Me,listeners:de}),xe?Me.data=xe:(xe=Wa(a),xe!==null&&(Me.data=xe)))),(xe=Fn?VS(t,a):kS(t,a))&&(Me=dh(F,"onBeforeInput"),0<Me.length&&(de=new Li("onBeforeInput","beforeinput",null,a,W),ee.push({event:de,listeners:Me}),de.data=xe)),Rw(ee,t,F,a,W)}Qv(ee,r)})}function Jl(t,r,a){return{instance:t,listener:r,currentTarget:a}}function dh(t,r){for(var a=r+"Capture",l=[];t!==null;){var f=t,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=si(t,a),f!=null&&l.unshift(Jl(t,f,d)),f=si(t,r),f!=null&&l.push(Jl(t,f,d))),t.tag===3)return l;t=t.return}return[]}function Dw(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function $v(t,r,a,l,f){for(var d=r._reactName,_=[];a!==null&&a!==l;){var S=a,O=S.alternate,F=S.stateNode;if(S=S.tag,O!==null&&O===l)break;S!==5&&S!==26&&S!==27||F===null||(O=F,f?(F=si(a,d),F!=null&&_.unshift(Jl(a,F,O))):f||(F=si(a,d),F!=null&&_.push(Jl(a,F,O)))),a=a.return}_.length!==0&&t.push({event:r,listeners:_})}var Nw=/\r\n?/g,Ow=/\u0000|\uFFFD/g;function Xv(t){return(typeof t=="string"?t:""+t).replace(Nw,`
`).replace(Ow,"")}function Wv(t,r){return r=Xv(r),Xv(t)===r}function et(t,r,a,l,f,d){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||vn(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&vn(t,""+l);break;case"className":In(t,"class",l);break;case"tabIndex":In(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":In(t,a,l);break;case"style":yl(t,l,d);break;case"data":if(r!=="object"){In(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ka(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(r!=="input"&&et(t,r,"name",f.name,f,null),et(t,r,"formEncType",f.formEncType,f,null),et(t,r,"formMethod",f.formMethod,f,null),et(t,r,"formTarget",f.formTarget,f,null)):(et(t,r,"encType",f.encType,f,null),et(t,r,"method",f.method,f,null),et(t,r,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ka(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=ri);break;case"onScroll":l!=null&&Ne("scroll",t);break;case"onScrollEnd":l!=null&&Ne("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Ka(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Ne("beforetoggle",t),Ne("toggle",t),Ha(t,"popover",l);break;case"xlinkActuate":It(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":It(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":It(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":It(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":It(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":It(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":It(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":It(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":It(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ha(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=dc.get(a)||a,Ha(t,a,l))}}function Im(t,r,a,l,f,d){switch(a){case"style":yl(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?vn(t,l):(typeof l=="number"||typeof l=="bigint")&&vn(t,""+l);break;case"onScroll":l!=null&&Ne("scroll",t);break;case"onScrollEnd":l!=null&&Ne("scrollend",t);break;case"onClick":l!=null&&(t.onclick=ri);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!cl.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),r=a.slice(2,f?a.length-7:void 0),d=t[qt]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(r,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,f);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Ha(t,a,l)}}}function Zt(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ne("error",t),Ne("load",t);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:et(t,r,d,_,a,null)}}f&&et(t,r,"srcSet",a.srcSet,a,null),l&&et(t,r,"src",a.src,a,null);return;case"input":Ne("invalid",t);var S=d=_=f=null,O=null,F=null;for(l in a)if(a.hasOwnProperty(l)){var W=a[l];if(W!=null)switch(l){case"name":f=W;break;case"type":_=W;break;case"checked":O=W;break;case"defaultChecked":F=W;break;case"value":d=W;break;case"defaultValue":S=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,r));break;default:et(t,r,l,W,a,null)}}cc(t,d,S,O,F,_,f,!1);return;case"select":Ne("invalid",t),l=_=d=null;for(f in a)if(a.hasOwnProperty(f)&&(S=a[f],S!=null))switch(f){case"value":d=S;break;case"defaultValue":_=S;break;case"multiple":l=S;default:et(t,r,f,S,a,null)}r=d,a=_,t.multiple=!!l,r!=null?qr(t,!!l,r,!1):a!=null&&qr(t,!!l,a,!0);return;case"textarea":Ne("invalid",t),d=f=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(S=a[_],S!=null))switch(_){case"value":l=S;break;case"defaultValue":f=S;break;case"children":d=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(s(91));break;default:et(t,r,_,S,a,null)}Hr(t,l,f,d);return;case"option":for(O in a)if(a.hasOwnProperty(O)&&(l=a[O],l!=null))switch(O){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:et(t,r,O,l,a,null)}return;case"dialog":Ne("beforetoggle",t),Ne("toggle",t),Ne("cancel",t),Ne("close",t);break;case"iframe":case"object":Ne("load",t);break;case"video":case"audio":for(l=0;l<Wl.length;l++)Ne(Wl[l],t);break;case"image":Ne("error",t),Ne("load",t);break;case"details":Ne("toggle",t);break;case"embed":case"source":case"link":Ne("error",t),Ne("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in a)if(a.hasOwnProperty(F)&&(l=a[F],l!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:et(t,r,F,l,a,null)}return;default:if(Ga(r)){for(W in a)a.hasOwnProperty(W)&&(l=a[W],l!==void 0&&Im(t,r,W,l,a,void 0));return}}for(S in a)a.hasOwnProperty(S)&&(l=a[S],l!=null&&et(t,r,S,l,a,null))}function Mw(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,_=null,S=null,O=null,F=null,W=null;for(Q in a){var ee=a[Q];if(a.hasOwnProperty(Q)&&ee!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":O=ee;default:l.hasOwnProperty(Q)||et(t,r,Q,null,l,ee)}}for(var G in l){var Q=l[G];if(ee=a[G],l.hasOwnProperty(G)&&(Q!=null||ee!=null))switch(G){case"type":d=Q;break;case"name":f=Q;break;case"checked":F=Q;break;case"defaultChecked":W=Q;break;case"value":_=Q;break;case"defaultValue":S=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,r));break;default:Q!==ee&&et(t,r,G,Q,l,ee)}}Fa(t,_,S,O,F,W,d,f);return;case"select":Q=_=S=G=null;for(d in a)if(O=a[d],a.hasOwnProperty(d)&&O!=null)switch(d){case"value":break;case"multiple":Q=O;default:l.hasOwnProperty(d)||et(t,r,d,null,l,O)}for(f in l)if(d=l[f],O=a[f],l.hasOwnProperty(f)&&(d!=null||O!=null))switch(f){case"value":G=d;break;case"defaultValue":S=d;break;case"multiple":_=d;default:d!==O&&et(t,r,f,d,l,O)}r=S,a=_,l=Q,G!=null?qr(t,!!a,G,!1):!!l!=!!a&&(r!=null?qr(t,!!a,r,!0):qr(t,!!a,a?[]:"",!1));return;case"textarea":Q=G=null;for(S in a)if(f=a[S],a.hasOwnProperty(S)&&f!=null&&!l.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:et(t,r,S,null,l,f)}for(_ in l)if(f=l[_],d=a[_],l.hasOwnProperty(_)&&(f!=null||d!=null))switch(_){case"value":G=f;break;case"defaultValue":Q=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==d&&et(t,r,_,f,l,d)}hc(t,G,Q);return;case"option":for(var fe in a)if(G=a[fe],a.hasOwnProperty(fe)&&G!=null&&!l.hasOwnProperty(fe))switch(fe){case"selected":t.selected=!1;break;default:et(t,r,fe,null,l,G)}for(O in l)if(G=l[O],Q=a[O],l.hasOwnProperty(O)&&G!==Q&&(G!=null||Q!=null))switch(O){case"selected":t.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:et(t,r,O,G,l,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ve in a)G=a[ve],a.hasOwnProperty(ve)&&G!=null&&!l.hasOwnProperty(ve)&&et(t,r,ve,null,l,G);for(F in l)if(G=l[F],Q=a[F],l.hasOwnProperty(F)&&G!==Q&&(G!=null||Q!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,r));break;default:et(t,r,F,G,l,Q)}return;default:if(Ga(r)){for(var tt in a)G=a[tt],a.hasOwnProperty(tt)&&G!==void 0&&!l.hasOwnProperty(tt)&&Im(t,r,tt,void 0,l,G);for(W in l)G=l[W],Q=a[W],!l.hasOwnProperty(W)||G===Q||G===void 0&&Q===void 0||Im(t,r,W,G,l,Q);return}}for(var z in a)G=a[z],a.hasOwnProperty(z)&&G!=null&&!l.hasOwnProperty(z)&&et(t,r,z,null,l,G);for(ee in l)G=l[ee],Q=a[ee],!l.hasOwnProperty(ee)||G===Q||G==null&&Q==null||et(t,r,ee,G,l,Q)}function Jv(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Vw(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],d=f.transferSize,_=f.initiatorType,S=f.duration;if(d&&S&&Jv(_)){for(_=0,S=f.responseEnd,l+=1;l<a.length;l++){var O=a[l],F=O.startTime;if(F>S)break;var W=O.transferSize,ee=O.initiatorType;W&&Jv(ee)&&(O=O.responseEnd,_+=W*(O<S?1:(S-F)/(O-F)))}if(--l,r+=8*(d+_)/(f.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var xm=null,Dm=null;function mh(t){return t.nodeType===9?t:t.ownerDocument}function Zv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function eE(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function Nm(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Om=null;function kw(){var t=window.event;return t&&t.type==="popstate"?t===Om?!1:(Om=t,!0):(Om=null,!1)}var tE=typeof setTimeout=="function"?setTimeout:void 0,Pw=typeof clearTimeout=="function"?clearTimeout:void 0,nE=typeof Promise=="function"?Promise:void 0,Lw=typeof queueMicrotask=="function"?queueMicrotask:typeof nE<"u"?function(t){return nE.resolve(null).then(t).catch(Uw)}:tE;function Uw(t){setTimeout(function(){throw t})}function fs(t){return t==="head"}function iE(t,r){var a=r,l=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(f),Co(r);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Zl(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Zl(a);for(var d=a.firstChild;d;){var _=d.nextSibling,S=d.nodeName;d[Ci]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=_}}else a==="body"&&Zl(t.ownerDocument.body);a=f}while(a);Co(r)}function rE(t,r){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function Mm(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Mm(a),qa(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function jw(t,r,a,l){for(;t.nodeType===1;){var f=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Ci])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=Wn(t.nextSibling),t===null)break}return null}function zw(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Wn(t.nextSibling),t===null))return null;return t}function sE(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Wn(t.nextSibling),t===null))return null;return t}function Vm(t){return t.data==="$?"||t.data==="$~"}function km(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Bw(t,r){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||a.readyState!=="loading")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Wn(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var Pm=null;function aE(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(r===0)return Wn(t.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}t=t.nextSibling}return null}function oE(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return t;r--}else a!=="/$"&&a!=="/&"||r++}t=t.previousSibling}return null}function lE(t,r,a){switch(r=mh(a),t){case"html":if(t=r.documentElement,!t)throw Error(s(452));return t;case"head":if(t=r.head,!t)throw Error(s(453));return t;case"body":if(t=r.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Zl(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);qa(t)}var Jn=new Map,uE=new Set;function ph(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var br=oe.d;oe.d={f:qw,r:Hw,D:Fw,C:Gw,L:Kw,m:Qw,X:$w,S:Yw,M:Xw};function qw(){var t=br.f(),r=ah();return t||r}function Hw(t){var r=Bn(t);r!==null&&r.tag===5&&r.type==="form"?R_(r):br.r(t)}var So=typeof document>"u"?null:document;function cE(t,r,a){var l=So;if(l&&typeof r=="string"&&r){var f=_n(r);f='link[rel="'+t+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),uE.has(f)||(uE.add(f),t={rel:t,crossOrigin:a,href:r},l.querySelector(f)===null&&(r=l.createElement("link"),Zt(r,"link",t),Ct(r),l.head.appendChild(r)))}}function Fw(t){br.D(t),cE("dns-prefetch",t,null)}function Gw(t,r){br.C(t,r),cE("preconnect",t,r)}function Kw(t,r,a){br.L(t,r,a);var l=So;if(l&&t&&r){var f='link[rel="preload"][as="'+_n(r)+'"]';r==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+_n(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+_n(a.imageSizes)+'"]')):f+='[href="'+_n(t)+'"]';var d=f;switch(r){case"style":d=wo(t);break;case"script":d=Ro(t)}Jn.has(d)||(t=b({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),Jn.set(d,t),l.querySelector(f)!==null||r==="style"&&l.querySelector(eu(d))||r==="script"&&l.querySelector(tu(d))||(r=l.createElement("link"),Zt(r,"link",t),Ct(r),l.head.appendChild(r)))}}function Qw(t,r){br.m(t,r);var a=So;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+_n(l)+'"][href="'+_n(t)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Ro(t)}if(!Jn.has(d)&&(t=b({rel:"modulepreload",href:t},r),Jn.set(d,t),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(tu(d)))return}l=a.createElement("link"),Zt(l,"link",t),Ct(l),a.head.appendChild(l)}}}function Yw(t,r,a){br.S(t,r,a);var l=So;if(l&&t){var f=xi(l).hoistableStyles,d=wo(t);r=r||"default";var _=f.get(d);if(!_){var S={loading:0,preload:null};if(_=l.querySelector(eu(d)))S.loading=5;else{t=b({rel:"stylesheet",href:t,"data-precedence":r},a),(a=Jn.get(d))&&Lm(t,a);var O=_=l.createElement("link");Ct(O),Zt(O,"link",t),O._p=new Promise(function(F,W){O.onload=F,O.onerror=W}),O.addEventListener("load",function(){S.loading|=1}),O.addEventListener("error",function(){S.loading|=2}),S.loading|=4,gh(_,r,l)}_={type:"stylesheet",instance:_,count:1,state:S},f.set(d,_)}}}function $w(t,r){br.X(t,r);var a=So;if(a&&t){var l=xi(a).hoistableScripts,f=Ro(t),d=l.get(f);d||(d=a.querySelector(tu(f)),d||(t=b({src:t,async:!0},r),(r=Jn.get(f))&&Um(t,r),d=a.createElement("script"),Ct(d),Zt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function Xw(t,r){br.M(t,r);var a=So;if(a&&t){var l=xi(a).hoistableScripts,f=Ro(t),d=l.get(f);d||(d=a.querySelector(tu(f)),d||(t=b({src:t,async:!0,type:"module"},r),(r=Jn.get(f))&&Um(t,r),d=a.createElement("script"),Ct(d),Zt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function hE(t,r,a,l){var f=(f=Ie.current)?ph(f):null;if(!f)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=wo(a.href),a=xi(f).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=wo(a.href);var d=xi(f).hoistableStyles,_=d.get(t);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,_),(d=f.querySelector(eu(t)))&&!d._p&&(_.instance=d,_.state.loading=5),Jn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Jn.set(t,a),d||Ww(f,t,a,_.state))),r&&l===null)throw Error(s(528,""));return _}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Ro(a),a=xi(f).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function wo(t){return'href="'+_n(t)+'"'}function eu(t){return'link[rel="stylesheet"]['+t+"]"}function fE(t){return b({},t,{"data-precedence":t.precedence,precedence:null})}function Ww(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),Zt(r,"link",a),Ct(r),t.head.appendChild(r))}function Ro(t){return'[src="'+_n(t)+'"]'}function tu(t){return"script[async]"+t}function dE(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+_n(a.href)+'"]');if(l)return r.instance=l,Ct(l),l;var f=b({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Ct(l),Zt(l,"style",f),gh(l,a.precedence,t),r.instance=l;case"stylesheet":f=wo(a.href);var d=t.querySelector(eu(f));if(d)return r.state.loading|=4,r.instance=d,Ct(d),d;l=fE(a),(f=Jn.get(f))&&Lm(l,f),d=(t.ownerDocument||t).createElement("link"),Ct(d);var _=d;return _._p=new Promise(function(S,O){_.onload=S,_.onerror=O}),Zt(d,"link",l),r.state.loading|=4,gh(d,a.precedence,t),r.instance=d;case"script":return d=Ro(a.src),(f=t.querySelector(tu(d)))?(r.instance=f,Ct(f),f):(l=a,(f=Jn.get(d))&&(l=b({},a),Um(l,f)),t=t.ownerDocument||t,f=t.createElement("script"),Ct(f),Zt(f,"link",l),t.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,gh(l,a.precedence,t));return r.instance}function gh(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,_=0;_<l.length;_++){var S=l[_];if(S.dataset.precedence===r)d=S;else if(d!==f)break}d?d.parentNode.insertBefore(t,d.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function Lm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function Um(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var yh=null;function mE(t,r,a){if(yh===null){var l=new Map,f=yh=new Map;f.set(a,l)}else f=yh,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),f=0;f<a.length;f++){var d=a[f];if(!(d[Ci]||d[Rt]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(r)||"";_=t+_;var S=l.get(_);S?S.push(d):l.set(_,[d])}}return l}function pE(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function Jw(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function gE(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Zw(t,r,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=wo(l.href),d=r.querySelector(eu(f));if(d){r=d._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=_h.bind(t),r.then(t,t)),a.state.loading|=4,a.instance=d,Ct(d);return}d=r.ownerDocument||r,l=fE(l),(f=Jn.get(f))&&Lm(l,f),d=d.createElement("link"),Ct(d);var _=d;_._p=new Promise(function(S,O){_.onload=S,_.onerror=O}),Zt(d,"link",l),a.instance=d}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=_h.bind(t),r.addEventListener("load",a),r.addEventListener("error",a))}}var jm=0;function eR(t,r){return t.stylesheets&&t.count===0&&Eh(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Eh(t,t.stylesheets),t.unsuspend){var d=t.unsuspend;t.unsuspend=null,d()}},6e4+r);0<t.imgBytes&&jm===0&&(jm=62500*Vw());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Eh(t,t.stylesheets),t.unsuspend)){var d=t.unsuspend;t.unsuspend=null,d()}},(t.imgBytes>jm?50:800)+r);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function _h(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Eh(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var vh=null;function Eh(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,vh=new Map,r.forEach(tR,t),vh=null,_h.call(t))}function tR(t,r){if(!(r.state.loading&4)){var a=vh.get(t);if(a)var l=a.get(null);else{a=new Map,vh.set(t,a);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var _=f[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}f=r.instance,_=f.getAttribute("data-precedence"),d=a.get(_)||l,d===l&&a.set(null,f),a.set(_,f),this.count++,l=_h.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),r.state.loading|=4}}var nu={$$typeof:ie,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function nR(t,r,a,l,f,d,_,S,O){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=wi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wi(0),this.hiddenUpdates=wi(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function yE(t,r,a,l,f,d,_,S,O,F,W,ee){return t=new nR(t,r,a,_,O,F,W,ee,S),r=1,d===!0&&(r|=24),d=Dn(3,null,null,r),t.current=d,d.stateNode=t,r=_d(),r.refCount++,t.pooledCache=r,r.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:r},bd(d),t}function _E(t){return t?(t=no,t):no}function vE(t,r,a,l,f,d){f=_E(f),l.context===null?l.context=f:l.pendingContext=f,l=ts(r),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=ns(t,l,r),a!==null&&(Sn(a,t,r),Vl(a,t,r))}function EE(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function zm(t,r){EE(t,r),(t=t.alternate)&&EE(t,r)}function TE(t){if(t.tag===13||t.tag===31){var r=aa(t,67108864);r!==null&&Sn(r,t,67108864),zm(t,67108864)}}function bE(t){if(t.tag===13||t.tag===31){var r=kn();r=Ys(r);var a=aa(t,r);a!==null&&Sn(a,t,r),zm(t,r)}}var Th=!0;function iR(t,r,a,l){var f=J.T;J.T=null;var d=oe.p;try{oe.p=2,Bm(t,r,a,l)}finally{oe.p=d,J.T=f}}function rR(t,r,a,l){var f=J.T;J.T=null;var d=oe.p;try{oe.p=8,Bm(t,r,a,l)}finally{oe.p=d,J.T=f}}function Bm(t,r,a,l){if(Th){var f=qm(l);if(f===null)Cm(t,r,l,bh,a),SE(t,l);else if(aR(f,t,r,a,l))l.stopPropagation();else if(SE(t,l),r&4&&-1<sR.indexOf(t)){for(;f!==null;){var d=Bn(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=Ai(d.pendingLanes);if(_!==0){var S=d;for(S.pendingLanes|=2,S.entangledLanes|=2;_;){var O=1<<31-vt(_);S.entanglements[1]|=O,_&=~O}qi(d),(Ge&6)===0&&(rh=fn()+500,Xl(0))}}break;case 31:case 13:S=aa(d,2),S!==null&&Sn(S,d,2),ah(),zm(d,2)}if(d=qm(l),d===null&&Cm(t,r,l,bh,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else Cm(t,r,l,null,a)}}function qm(t){return t=qn(t),Hm(t)}var bh=null;function Hm(t){if(bh=null,t=Ii(t),t!==null){var r=u(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=c(r),t!==null)return t;t=null}else if(a===31){if(t=m(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return bh=t,null}function AE(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Fs()){case sl:return 2;case al:return 8;case zr:case $f:return 32;case ec:return 268435456;default:return 32}default:return 32}}var Fm=!1,ds=null,ms=null,ps=null,iu=new Map,ru=new Map,gs=[],sR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function SE(t,r){switch(t){case"focusin":case"focusout":ds=null;break;case"dragenter":case"dragleave":ms=null;break;case"mouseover":case"mouseout":ps=null;break;case"pointerover":case"pointerout":iu.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":ru.delete(r.pointerId)}}function su(t,r,a,l,f,d){return t===null||t.nativeEvent!==d?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},r!==null&&(r=Bn(r),r!==null&&TE(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),t)}function aR(t,r,a,l,f){switch(r){case"focusin":return ds=su(ds,t,r,a,l,f),!0;case"dragenter":return ms=su(ms,t,r,a,l,f),!0;case"mouseover":return ps=su(ps,t,r,a,l,f),!0;case"pointerover":var d=f.pointerId;return iu.set(d,su(iu.get(d)||null,t,r,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,ru.set(d,su(ru.get(d)||null,t,r,a,l,f)),!0}return!1}function wE(t){var r=Ii(t.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=c(a),r!==null){t.blockedOn=r,ni(t.priority,function(){bE(a)});return}}else if(r===31){if(r=m(a),r!==null){t.blockedOn=r,ni(t.priority,function(){bE(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ah(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=qm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);_l=l,a.target.dispatchEvent(l),_l=null}else return r=Bn(a),r!==null&&TE(r),t.blockedOn=a,!1;r.shift()}return!0}function RE(t,r,a){Ah(t)&&a.delete(r)}function oR(){Fm=!1,ds!==null&&Ah(ds)&&(ds=null),ms!==null&&Ah(ms)&&(ms=null),ps!==null&&Ah(ps)&&(ps=null),iu.forEach(RE),ru.forEach(RE)}function Sh(t,r){t.blockedOn===r&&(t.blockedOn=null,Fm||(Fm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,oR)))}var wh=null;function CE(t){wh!==t&&(wh=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){wh===t&&(wh=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],f=t[r+2];if(typeof l!="function"){if(Hm(l||a)===null)continue;break}var d=Bn(a);d!==null&&(t.splice(r,3),r-=3,qd(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function Co(t){function r(O){return Sh(O,t)}ds!==null&&Sh(ds,t),ms!==null&&Sh(ms,t),ps!==null&&Sh(ps,t),iu.forEach(r),ru.forEach(r);for(var a=0;a<gs.length;a++){var l=gs[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<gs.length&&(a=gs[0],a.blockedOn===null);)wE(a),a.blockedOn===null&&gs.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],_=f[qt]||null;if(typeof d=="function")_||CE(a);else if(_){var S=null;if(d&&d.hasAttribute("formAction")){if(f=d,_=d[qt]||null)S=_.formAction;else if(Hm(f)!==null)continue}else S=_.action;typeof S=="function"?a[l+1]=S:(a.splice(l,3),l-=3),CE(a)}}}function IE(){function t(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function Gm(t){this._internalRoot=t}Rh.prototype.render=Gm.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=kn();vE(a,l,t,r,null,null)},Rh.prototype.unmount=Gm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;vE(t.current,2,null,t,null,null),ah(),r[Ri]=null}};function Rh(t){this._internalRoot=t}Rh.prototype.unstable_scheduleHydration=function(t){if(t){var r=ac();t={blockedOn:null,target:t,priority:r};for(var a=0;a<gs.length&&r!==0&&r<gs[a].priority;a++);gs.splice(a,0,t),a===0&&wE(t)}};var xE=e.version;if(xE!=="19.2.0")throw Error(s(527,xE,"19.2.0"));oe.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=g(r),t=t!==null?v(t):null,t=t===null?null:t.stateNode,t};var lR={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ch=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ch.isDisabled&&Ch.supportsFiber)try{ei=Ch.inject(lR),Yt=Ch}catch{}}return ou.createRoot=function(t,r){if(!o(t))throw Error(s(299));var a=!1,l="",f=P_,d=L_,_=U_;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(d=r.onCaughtError),r.onRecoverableError!==void 0&&(_=r.onRecoverableError)),r=yE(t,1,!1,null,null,a,l,null,f,d,_,IE),t[Ri]=r.current,Rm(t),new Gm(r)},ou.hydrateRoot=function(t,r,a){if(!o(t))throw Error(s(299));var l=!1,f="",d=P_,_=L_,S=U_,O=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.formState!==void 0&&(O=a.formState)),r=yE(t,1,!0,r,a??null,l,f,O,d,_,S,IE),r.context=_E(null),a=r.current,l=kn(),l=Ys(l),f=ts(l),f.callback=null,ns(a,f,l),a=l,r.current.lanes=a,Ks(r,a),qi(r),t[Ri]=r.current,Rm(t),new Rh(r)},ou.version="19.2.0",ou}var jE;function vR(){if(jE)return Ym.exports;jE=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Ym.exports=_R(),Ym.exports}var ER=vR();const TR=x0(ER);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var zE="popstate";function bR(i={}){function e(s,o){let{pathname:u,search:c,hash:m}=s.location;return yp("",{pathname:u,search:c,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){return typeof o=="string"?o:Au(o)}return SR(e,n,null,i)}function ft(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function yi(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function AR(){return Math.random().toString(36).substring(2,10)}function BE(i,e){return{usr:i.state,key:i.key,idx:e}}function yp(i,e,n=null,s){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Ko(e):e,state:n,key:e&&e.key||s||AR()}}function Au({pathname:i="/",search:e="",hash:n=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function Ko(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substring(n),i=i.substring(0,n));let s=i.indexOf("?");s>=0&&(e.search=i.substring(s),i=i.substring(0,s)),i&&(e.pathname=i)}return e}function SR(i,e,n,s={}){let{window:o=document.defaultView,v5Compat:u=!1}=s,c=o.history,m="POP",p=null,g=v();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function v(){return(c.state||{idx:null}).idx}function b(){m="POP";let M=v(),Y=M==null?null:M-g;g=M,p&&p({action:m,location:B.location,delta:Y})}function A(M,Y){m="PUSH";let $=yp(B.location,M,Y);g=v()+1;let ie=BE($,g),he=B.createHref($);try{c.pushState(ie,"",he)}catch(Ee){if(Ee instanceof DOMException&&Ee.name==="DataCloneError")throw Ee;o.location.assign(he)}u&&p&&p({action:m,location:B.location,delta:1})}function C(M,Y){m="REPLACE";let $=yp(B.location,M,Y);g=v();let ie=BE($,g),he=B.createHref($);c.replaceState(ie,"",he),u&&p&&p({action:m,location:B.location,delta:0})}function D(M){return wR(M)}let B={get action(){return m},get location(){return i(o,c)},listen(M){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(zE,b),p=M,()=>{o.removeEventListener(zE,b),p=null}},createHref(M){return e(o,M)},createURL:D,encodeLocation(M){let Y=D(M);return{pathname:Y.pathname,search:Y.search,hash:Y.hash}},push:A,replace:C,go(M){return c.go(M)}};return B}function wR(i,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ft(n,"No window.location.(origin|href) available to create URL");let s=typeof i=="string"?i:Au(i);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function D0(i,e,n="/"){return RR(i,e,n,!1)}function RR(i,e,n,s){let o=typeof e=="string"?Ko(e):e,u=Dr(o.pathname||"/",n);if(u==null)return null;let c=N0(i);CR(c);let m=null;for(let p=0;m==null&&p<c.length;++p){let g=UR(u);m=PR(c[p],g,s)}return m}function N0(i,e=[],n=[],s="",o=!1){let u=(c,m,p=o,g)=>{let v={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:m,route:c};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(s)&&p)return;ft(v.relativePath.startsWith(s),`Absolute route path "${v.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(s.length)}let b=Cr([s,v.relativePath]),A=n.concat(v);c.children&&c.children.length>0&&(ft(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),N0(c.children,e,A,b,p)),!(c.path==null&&!c.index)&&e.push({path:b,score:VR(b,c.index),routesMeta:A})};return i.forEach((c,m)=>{if(c.path===""||!c.path?.includes("?"))u(c,m);else for(let p of O0(c.path))u(c,m,!0,p)}),e}function O0(i){let e=i.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let c=O0(s.join("/")),m=[];return m.push(...c.map(p=>p===""?u:[u,p].join("/"))),o&&m.push(...c),m.map(p=>i.startsWith("/")&&p===""?"/":p)}function CR(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:kR(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var IR=/^:[\w-]+$/,xR=3,DR=2,NR=1,OR=10,MR=-2,qE=i=>i==="*";function VR(i,e){let n=i.split("/"),s=n.length;return n.some(qE)&&(s+=MR),e&&(s+=DR),n.filter(o=>!qE(o)).reduce((o,u)=>o+(IR.test(u)?xR:u===""?NR:OR),s)}function kR(i,e){return i.length===e.length&&i.slice(0,-1).every((s,o)=>s===e[o])?i[i.length-1]-e[e.length-1]:0}function PR(i,e,n=!1){let{routesMeta:s}=i,o={},u="/",c=[];for(let m=0;m<s.length;++m){let p=s[m],g=m===s.length-1,v=u==="/"?e:e.slice(u.length)||"/",b=$h({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},v),A=p.route;if(!b&&g&&n&&!s[s.length-1].route.index&&(b=$h({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},v)),!b)return null;Object.assign(o,b.params),c.push({params:o,pathname:Cr([u,b.pathname]),pathnameBase:qR(Cr([u,b.pathnameBase])),route:A}),b.pathnameBase!=="/"&&(u=Cr([u,b.pathnameBase]))}return c}function $h(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,s]=LR(i.path,i.caseSensitive,i.end),o=e.match(n);if(!o)return null;let u=o[0],c=u.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:s.reduce((g,{paramName:v,isOptional:b},A)=>{if(v==="*"){let D=m[A]||"";c=u.slice(0,u.length-D.length).replace(/(.)\/+$/,"$1")}const C=m[A];return b&&!C?g[v]=void 0:g[v]=(C||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:c,pattern:i}}function LR(i,e=!1,n=!0){yi(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let s=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,m,p)=>(s.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(s.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function UR(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return yi(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function Dr(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=i.charAt(n);return s&&s!=="/"?null:i.slice(n)||"/"}function jR(i,e="/"){let{pathname:n,search:s="",hash:o=""}=typeof i=="string"?Ko(i):i;return{pathname:n?n.startsWith("/")?n:zR(n,e):e,search:HR(s),hash:FR(o)}}function zR(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Jm(i,e,n,s){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function BR(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Kp(i){let e=BR(i);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function Qp(i,e,n,s=!1){let o;typeof i=="string"?o=Ko(i):(o={...i},ft(!o.pathname||!o.pathname.includes("?"),Jm("?","pathname","search",o)),ft(!o.pathname||!o.pathname.includes("#"),Jm("#","pathname","hash",o)),ft(!o.search||!o.search.includes("#"),Jm("#","search","hash",o)));let u=i===""||o.pathname==="",c=u?"/":o.pathname,m;if(c==null)m=n;else{let b=e.length-1;if(!s&&c.startsWith("..")){let A=c.split("/");for(;A[0]==="..";)A.shift(),b-=1;o.pathname=A.join("/")}m=b>=0?e[b]:"/"}let p=jR(o,m),g=c&&c!=="/"&&c.endsWith("/"),v=(u||c===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(g||v)&&(p.pathname+="/"),p}var Cr=i=>i.join("/").replace(/\/\/+/g,"/"),qR=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),HR=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,FR=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function GR(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var M0=["POST","PUT","PATCH","DELETE"];new Set(M0);var KR=["GET",...M0];new Set(KR);var Qo=L.createContext(null);Qo.displayName="DataRouter";var vf=L.createContext(null);vf.displayName="DataRouterState";L.createContext(!1);var V0=L.createContext({isTransitioning:!1});V0.displayName="ViewTransition";var QR=L.createContext(new Map);QR.displayName="Fetchers";var YR=L.createContext(null);YR.displayName="Await";var Ei=L.createContext(null);Ei.displayName="Navigation";var Pu=L.createContext(null);Pu.displayName="Location";var tr=L.createContext({outlet:null,matches:[],isDataRoute:!1});tr.displayName="Route";var Yp=L.createContext(null);Yp.displayName="RouteError";function $R(i,{relative:e}={}){ft(Yo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=L.useContext(Ei),{hash:o,pathname:u,search:c}=Lu(i,{relative:e}),m=u;return n!=="/"&&(m=u==="/"?n:Cr([n,u])),s.createHref({pathname:m,search:c,hash:o})}function Yo(){return L.useContext(Pu)!=null}function Ls(){return ft(Yo(),"useLocation() may be used only in the context of a <Router> component."),L.useContext(Pu).location}var k0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function P0(i){L.useContext(Ei).static||L.useLayoutEffect(i)}function $p(){let{isDataRoute:i}=L.useContext(tr);return i?l1():XR()}function XR(){ft(Yo(),"useNavigate() may be used only in the context of a <Router> component.");let i=L.useContext(Qo),{basename:e,navigator:n}=L.useContext(Ei),{matches:s}=L.useContext(tr),{pathname:o}=Ls(),u=JSON.stringify(Kp(s)),c=L.useRef(!1);return P0(()=>{c.current=!0}),L.useCallback((p,g={})=>{if(yi(c.current,k0),!c.current)return;if(typeof p=="number"){n.go(p);return}let v=Qp(p,JSON.parse(u),o,g.relative==="path");i==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Cr([e,v.pathname])),(g.replace?n.replace:n.push)(v,g.state,g)},[e,n,u,o,i])}L.createContext(null);function Lu(i,{relative:e}={}){let{matches:n}=L.useContext(tr),{pathname:s}=Ls(),o=JSON.stringify(Kp(n));return L.useMemo(()=>Qp(i,JSON.parse(o),s,e==="path"),[i,o,s,e])}function WR(i,e){return L0(i,e)}function L0(i,e,n,s,o){ft(Yo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=L.useContext(Ei),{matches:c}=L.useContext(tr),m=c[c.length-1],p=m?m.params:{},g=m?m.pathname:"/",v=m?m.pathnameBase:"/",b=m&&m.route;{let $=b&&b.path||"";U0(g,!b||$.endsWith("*")||$.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${$}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${$}"> to <Route path="${$==="/"?"*":`${$}/*`}">.`)}let A=Ls(),C;if(e){let $=typeof e=="string"?Ko(e):e;ft(v==="/"||$.pathname?.startsWith(v),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${$.pathname}" was given in the \`location\` prop.`),C=$}else C=A;let D=C.pathname||"/",B=D;if(v!=="/"){let $=v.replace(/^\//,"").split("/");B="/"+D.replace(/^\//,"").split("/").slice($.length).join("/")}let M=D0(i,{pathname:B});yi(b||M!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),yi(M==null||M[M.length-1].route.element!==void 0||M[M.length-1].route.Component!==void 0||M[M.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Y=n1(M&&M.map($=>Object.assign({},$,{params:Object.assign({},p,$.params),pathname:Cr([v,u.encodeLocation?u.encodeLocation($.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?v:Cr([v,u.encodeLocation?u.encodeLocation($.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:$.pathnameBase])})),c,n,s,o);return e&&Y?L.createElement(Pu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...C},navigationType:"POP"}},Y):Y}function JR(){let i=o1(),e=GR(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},c=null;return console.error("Error handled by React Router default ErrorBoundary:",i),c=L.createElement(L.Fragment,null,L.createElement("p",null," Hey developer "),L.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",L.createElement("code",{style:u},"ErrorBoundary")," or"," ",L.createElement("code",{style:u},"errorElement")," prop on your route.")),L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),n?L.createElement("pre",{style:o},n):null,c)}var ZR=L.createElement(JR,null),e1=class extends L.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){this.props.unstable_onError?this.props.unstable_onError(i,e):console.error("React Router caught the following error during render",i)}render(){return this.state.error!==void 0?L.createElement(tr.Provider,{value:this.props.routeContext},L.createElement(Yp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function t1({routeContext:i,match:e,children:n}){let s=L.useContext(Qo);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),L.createElement(tr.Provider,{value:i},n)}function n1(i,e=[],n=null,s=null,o=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let u=i,c=n?.errors;if(c!=null){let g=u.findIndex(v=>v.route.id&&c?.[v.route.id]!==void 0);ft(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),u=u.slice(0,Math.min(u.length,g+1))}let m=!1,p=-1;if(n)for(let g=0;g<u.length;g++){let v=u[g];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(p=g),v.route.id){let{loaderData:b,errors:A}=n,C=v.route.loader&&!b.hasOwnProperty(v.route.id)&&(!A||A[v.route.id]===void 0);if(v.route.lazy||C){m=!0,p>=0?u=u.slice(0,p+1):u=[u[0]];break}}}return u.reduceRight((g,v,b)=>{let A,C=!1,D=null,B=null;n&&(A=c&&v.route.id?c[v.route.id]:void 0,D=v.route.errorElement||ZR,m&&(p<0&&b===0?(U0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),C=!0,B=null):p===b&&(C=!0,B=v.route.hydrateFallbackElement||null)));let M=e.concat(u.slice(0,b+1)),Y=()=>{let $;return A?$=D:C?$=B:v.route.Component?$=L.createElement(v.route.Component,null):v.route.element?$=v.route.element:$=g,L.createElement(t1,{match:v,routeContext:{outlet:g,matches:M,isDataRoute:n!=null},children:$})};return n&&(v.route.ErrorBoundary||v.route.errorElement||b===0)?L.createElement(e1,{location:n.location,revalidation:n.revalidation,component:D,error:A,children:Y(),routeContext:{outlet:null,matches:M,isDataRoute:!0},unstable_onError:s}):Y()},null)}function Xp(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function i1(i){let e=L.useContext(Qo);return ft(e,Xp(i)),e}function r1(i){let e=L.useContext(vf);return ft(e,Xp(i)),e}function s1(i){let e=L.useContext(tr);return ft(e,Xp(i)),e}function Wp(i){let e=s1(i),n=e.matches[e.matches.length-1];return ft(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function a1(){return Wp("useRouteId")}function o1(){let i=L.useContext(Yp),e=r1("useRouteError"),n=Wp("useRouteError");return i!==void 0?i:e.errors?.[n]}function l1(){let{router:i}=i1("useNavigate"),e=Wp("useNavigate"),n=L.useRef(!1);return P0(()=>{n.current=!0}),L.useCallback(async(o,u={})=>{yi(n.current,k0),n.current&&(typeof o=="number"?i.navigate(o):await i.navigate(o,{fromRouteId:e,...u}))},[i,e])}var HE={};function U0(i,e,n){!e&&!HE[i]&&(HE[i]=!0,yi(!1,n))}L.memo(u1);function u1({routes:i,future:e,state:n,unstable_onError:s}){return L0(i,void 0,n,s,e)}function _p({to:i,replace:e,state:n,relative:s}){ft(Yo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=L.useContext(Ei);yi(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=L.useContext(tr),{pathname:c}=Ls(),m=$p(),p=Qp(i,Kp(u),c,s==="path"),g=JSON.stringify(p);return L.useEffect(()=>{m(JSON.parse(g),{replace:e,state:n,relative:s})},[m,g,s,e,n]),null}function Gt(i){ft(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function c1({basename:i="/",children:e=null,location:n,navigationType:s="POP",navigator:o,static:u=!1}){ft(!Yo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=i.replace(/^\/*/,"/"),m=L.useMemo(()=>({basename:c,navigator:o,static:u,future:{}}),[c,o,u]);typeof n=="string"&&(n=Ko(n));let{pathname:p="/",search:g="",hash:v="",state:b=null,key:A="default"}=n,C=L.useMemo(()=>{let D=Dr(p,c);return D==null?null:{location:{pathname:D,search:g,hash:v,state:b,key:A},navigationType:s}},[c,p,g,v,b,A,s]);return yi(C!=null,`<Router basename="${c}"> is not able to match the URL "${p}${g}${v}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:L.createElement(Ei.Provider,{value:m},L.createElement(Pu.Provider,{children:e,value:C}))}function FE({children:i,location:e}){return WR(vp(i),e)}function vp(i,e=[]){let n=[];return L.Children.forEach(i,(s,o)=>{if(!L.isValidElement(s))return;let u=[...e,o];if(s.type===L.Fragment){n.push.apply(n,vp(s.props.children,u));return}ft(s.type===Gt,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ft(!s.props.index||!s.props.children,"An index route cannot have child routes.");let c={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=vp(s.props.children,u)),n.push(c)}),n}var Lh="get",Uh="application/x-www-form-urlencoded";function Ef(i){return i!=null&&typeof i.tagName=="string"}function h1(i){return Ef(i)&&i.tagName.toLowerCase()==="button"}function f1(i){return Ef(i)&&i.tagName.toLowerCase()==="form"}function d1(i){return Ef(i)&&i.tagName.toLowerCase()==="input"}function m1(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function p1(i,e){return i.button===0&&(!e||e==="_self")&&!m1(i)}var Ih=null;function g1(){if(Ih===null)try{new FormData(document.createElement("form"),0),Ih=!1}catch{Ih=!0}return Ih}var y1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Zm(i){return i!=null&&!y1.has(i)?(yi(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Uh}"`),null):i}function _1(i,e){let n,s,o,u,c;if(f1(i)){let m=i.getAttribute("action");s=m?Dr(m,e):null,n=i.getAttribute("method")||Lh,o=Zm(i.getAttribute("enctype"))||Uh,u=new FormData(i)}else if(h1(i)||d1(i)&&(i.type==="submit"||i.type==="image")){let m=i.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=i.getAttribute("formaction")||m.getAttribute("action");if(s=p?Dr(p,e):null,n=i.getAttribute("formmethod")||m.getAttribute("method")||Lh,o=Zm(i.getAttribute("formenctype"))||Zm(m.getAttribute("enctype"))||Uh,u=new FormData(m,i),!g1()){let{name:g,type:v,value:b}=i;if(v==="image"){let A=g?`${g}.`:"";u.append(`${A}x`,"0"),u.append(`${A}y`,"0")}else g&&u.append(g,b)}}else{if(Ef(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Lh,s=null,o=Uh,c=i}return u&&o==="text/plain"&&(c=u,u=void 0),{action:s,method:n.toLowerCase(),encType:o,formData:u,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Jp(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function v1(i,e,n){let s=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return s.pathname==="/"?s.pathname=`_root.${n}`:e&&Dr(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function E1(i,e){if(i.id in e)return e[i.id];try{let n=await import(i.module);return e[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function T1(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function b1(i,e,n){let s=await Promise.all(i.map(async o=>{let u=e.routes[o.route.id];if(u){let c=await E1(u,n);return c.links?c.links():[]}return[]}));return R1(s.flat(1).filter(T1).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function GE(i,e,n,s,o,u){let c=(p,g)=>n[g]?p.route.id!==n[g].route.id:!0,m=(p,g)=>n[g].pathname!==p.pathname||n[g].route.path?.endsWith("*")&&n[g].params["*"]!==p.params["*"];return u==="assets"?e.filter((p,g)=>c(p,g)||m(p,g)):u==="data"?e.filter((p,g)=>{let v=s.routes[p.route.id];if(!v||!v.hasLoader)return!1;if(c(p,g)||m(p,g))return!0;if(p.route.shouldRevalidate){let b=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function A1(i,e,{includeHydrateFallback:n}={}){return S1(i.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function S1(i){return[...new Set(i)]}function w1(i){let e={},n=Object.keys(i).sort();for(let s of n)e[s]=i[s];return e}function R1(i,e){let n=new Set;return new Set(e),i.reduce((s,o)=>{let u=JSON.stringify(w1(o));return n.has(u)||(n.add(u),s.push({key:u,link:o})),s},[])}function j0(){let i=L.useContext(Qo);return Jp(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function C1(){let i=L.useContext(vf);return Jp(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Zp=L.createContext(void 0);Zp.displayName="FrameworkContext";function z0(){let i=L.useContext(Zp);return Jp(i,"You must render this element inside a <HydratedRouter> element"),i}function I1(i,e){let n=L.useContext(Zp),[s,o]=L.useState(!1),[u,c]=L.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:g,onMouseLeave:v,onTouchStart:b}=e,A=L.useRef(null);L.useEffect(()=>{if(i==="render"&&c(!0),i==="viewport"){let B=Y=>{Y.forEach($=>{c($.isIntersecting)})},M=new IntersectionObserver(B,{threshold:.5});return A.current&&M.observe(A.current),()=>{M.disconnect()}}},[i]),L.useEffect(()=>{if(s){let B=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(B)}}},[s]);let C=()=>{o(!0)},D=()=>{o(!1),c(!1)};return n?i!=="intent"?[u,A,{}]:[u,A,{onFocus:lu(m,C),onBlur:lu(p,D),onMouseEnter:lu(g,C),onMouseLeave:lu(v,D),onTouchStart:lu(b,C)}]:[!1,A,{}]}function lu(i,e){return n=>{i&&i(n),n.defaultPrevented||e(n)}}function x1({page:i,...e}){let{router:n}=j0(),s=L.useMemo(()=>D0(n.routes,i,n.basename),[n.routes,i,n.basename]);return s?L.createElement(N1,{page:i,matches:s,...e}):null}function D1(i){let{manifest:e,routeModules:n}=z0(),[s,o]=L.useState([]);return L.useEffect(()=>{let u=!1;return b1(i,e,n).then(c=>{u||o(c)}),()=>{u=!0}},[i,e,n]),s}function N1({page:i,matches:e,...n}){let s=Ls(),{manifest:o,routeModules:u}=z0(),{basename:c}=j0(),{loaderData:m,matches:p}=C1(),g=L.useMemo(()=>GE(i,e,p,o,s,"data"),[i,e,p,o,s]),v=L.useMemo(()=>GE(i,e,p,o,s,"assets"),[i,e,p,o,s]),b=L.useMemo(()=>{if(i===s.pathname+s.search+s.hash)return[];let D=new Set,B=!1;if(e.forEach(Y=>{let $=o.routes[Y.route.id];!$||!$.hasLoader||(!g.some(ie=>ie.route.id===Y.route.id)&&Y.route.id in m&&u[Y.route.id]?.shouldRevalidate||$.hasClientLoader?B=!0:D.add(Y.route.id))}),D.size===0)return[];let M=v1(i,c,"data");return B&&D.size>0&&M.searchParams.set("_routes",e.filter(Y=>D.has(Y.route.id)).map(Y=>Y.route.id).join(",")),[M.pathname+M.search]},[c,m,s,o,g,e,i,u]),A=L.useMemo(()=>A1(v,o),[v,o]),C=D1(v);return L.createElement(L.Fragment,null,b.map(D=>L.createElement("link",{key:D,rel:"prefetch",as:"fetch",href:D,...n})),A.map(D=>L.createElement("link",{key:D,rel:"modulepreload",href:D,...n})),C.map(({key:D,link:B})=>L.createElement("link",{key:D,nonce:n.nonce,...B})))}function O1(...i){return e=>{i.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var B0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{B0&&(window.__reactRouterVersion="7.9.4")}catch{}function M1({basename:i,children:e,window:n}){let s=L.useRef();s.current==null&&(s.current=bR({window:n,v5Compat:!0}));let o=s.current,[u,c]=L.useState({action:o.action,location:o.location}),m=L.useCallback(p=>{L.startTransition(()=>c(p))},[c]);return L.useLayoutEffect(()=>o.listen(m),[o,m]),L.createElement(c1,{basename:i,children:e,location:u.location,navigationType:u.action,navigator:o})}var q0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tn=L.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:o,reloadDocument:u,replace:c,state:m,target:p,to:g,preventScrollReset:v,viewTransition:b,...A},C){let{basename:D}=L.useContext(Ei),B=typeof g=="string"&&q0.test(g),M,Y=!1;if(typeof g=="string"&&B&&(M=g,B0))try{let x=new URL(window.location.href),U=g.startsWith("//")?new URL(x.protocol+g):new URL(g),V=Dr(U.pathname,D);U.origin===x.origin&&V!=null?g=V+U.search+U.hash:Y=!0}catch{yi(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let $=$R(g,{relative:o}),[ie,he,Ee]=I1(s,A),ae=L1(g,{replace:c,state:m,target:p,preventScrollReset:v,relative:o,viewTransition:b});function I(x){e&&e(x),x.defaultPrevented||ae(x)}let R=L.createElement("a",{...A,...Ee,href:M||$,onClick:Y||u?e:I,ref:O1(C,he),target:p,"data-discover":!B&&n==="render"?"true":void 0});return ie&&!B?L.createElement(L.Fragment,null,R,L.createElement(x1,{page:$})):R});tn.displayName="Link";var V1=L.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:o=!1,style:u,to:c,viewTransition:m,children:p,...g},v){let b=Lu(c,{relative:g.relative}),A=Ls(),C=L.useContext(vf),{navigator:D,basename:B}=L.useContext(Ei),M=C!=null&&q1(b)&&m===!0,Y=D.encodeLocation?D.encodeLocation(b).pathname:b.pathname,$=A.pathname,ie=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;n||($=$.toLowerCase(),ie=ie?ie.toLowerCase():null,Y=Y.toLowerCase()),ie&&B&&(ie=Dr(ie,B)||ie);const he=Y!=="/"&&Y.endsWith("/")?Y.length-1:Y.length;let Ee=$===Y||!o&&$.startsWith(Y)&&$.charAt(he)==="/",ae=ie!=null&&(ie===Y||!o&&ie.startsWith(Y)&&ie.charAt(Y.length)==="/"),I={isActive:Ee,isPending:ae,isTransitioning:M},R=Ee?e:void 0,x;typeof s=="function"?x=s(I):x=[s,Ee?"active":null,ae?"pending":null,M?"transitioning":null].filter(Boolean).join(" ");let U=typeof u=="function"?u(I):u;return L.createElement(tn,{...g,"aria-current":R,className:x,ref:v,style:U,to:c,viewTransition:m},typeof p=="function"?p(I):p)});V1.displayName="NavLink";var k1=L.forwardRef(({discover:i="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:o,state:u,method:c=Lh,action:m,onSubmit:p,relative:g,preventScrollReset:v,viewTransition:b,...A},C)=>{let D=z1(),B=B1(m,{relative:g}),M=c.toLowerCase()==="get"?"get":"post",Y=typeof m=="string"&&q0.test(m),$=ie=>{if(p&&p(ie),ie.defaultPrevented)return;ie.preventDefault();let he=ie.nativeEvent.submitter,Ee=he?.getAttribute("formmethod")||c;D(he||ie.currentTarget,{fetcherKey:e,method:Ee,navigate:n,replace:o,state:u,relative:g,preventScrollReset:v,viewTransition:b})};return L.createElement("form",{ref:C,method:M,action:B,onSubmit:s?p:$,...A,"data-discover":!Y&&i==="render"?"true":void 0})});k1.displayName="Form";function P1(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function H0(i){let e=L.useContext(Qo);return ft(e,P1(i)),e}function L1(i,{target:e,replace:n,state:s,preventScrollReset:o,relative:u,viewTransition:c}={}){let m=$p(),p=Ls(),g=Lu(i,{relative:u});return L.useCallback(v=>{if(p1(v,e)){v.preventDefault();let b=n!==void 0?n:Au(p)===Au(g);m(i,{replace:b,state:s,preventScrollReset:o,relative:u,viewTransition:c})}},[p,m,g,n,s,e,i,o,u,c])}var U1=0,j1=()=>`__${String(++U1)}__`;function z1(){let{router:i}=H0("useSubmit"),{basename:e}=L.useContext(Ei),n=a1();return L.useCallback(async(s,o={})=>{let{action:u,method:c,encType:m,formData:p,body:g}=_1(s,e);if(o.navigate===!1){let v=o.fetcherKey||j1();await i.fetch(v,n,o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||c,formEncType:o.encType||m,flushSync:o.flushSync})}else await i.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||c,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[i,e,n])}function B1(i,{relative:e}={}){let{basename:n}=L.useContext(Ei),s=L.useContext(tr);ft(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),u={...Lu(i||".",{relative:e})},c=Ls();if(i==null){u.search=c.search;let m=new URLSearchParams(u.search),p=m.getAll("index");if(p.some(v=>v==="")){m.delete("index"),p.filter(b=>b).forEach(b=>m.append("index",b));let v=m.toString();u.search=v?`?${v}`:""}}return(!i||i===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:Cr([n,u.pathname])),Au(u)}function q1(i,{relative:e}={}){let n=L.useContext(V0);ft(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=H0("useViewTransitionState"),o=Lu(i,{relative:e});if(!n.isTransitioning)return!1;let u=Dr(n.currentLocation.pathname,s)||n.currentLocation.pathname,c=Dr(n.nextLocation.pathname,s)||n.nextLocation.pathname;return $h(o.pathname,c)!=null||$h(o.pathname,u)!=null}const H1=()=>{};var KE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},F1=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[n++],c=i[n++],m=i[n++],p=((o&7)<<18|(u&63)<<12|(c&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const u=i[n++],c=i[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|c&63)}}return e.join("")},G0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],c=o+1<i.length,m=c?i[o+1]:0,p=o+2<i.length,g=p?i[o+2]:0,v=u>>2,b=(u&3)<<4|m>>4;let A=(m&15)<<2|g>>6,C=g&63;p||(C=64,c||(A=64)),s.push(n[v],n[b],n[A],n[C])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(F0(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):F1(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=n[i.charAt(o++)],m=o<i.length?n[i.charAt(o)]:0;++o;const g=o<i.length?n[i.charAt(o)]:64;++o;const b=o<i.length?n[i.charAt(o)]:64;if(++o,u==null||m==null||g==null||b==null)throw new G1;const A=u<<2|m>>4;if(s.push(A),g!==64){const C=m<<4&240|g>>2;if(s.push(C),b!==64){const D=g<<6&192|b;s.push(D)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class G1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const K1=function(i){const e=F0(i);return G0.encodeByteArray(e,!0)},Xh=function(i){return K1(i).replace(/\./g,"")},K0=function(i){try{return G0.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1=()=>Q1().__FIREBASE_DEFAULTS__,$1=()=>{if(typeof process>"u"||typeof KE>"u")return;const i=KE.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},X1=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&K0(i[1]);return e&&JSON.parse(e)},Tf=()=>{try{return H1()||Y1()||$1()||X1()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Q0=i=>Tf()?.emulatorHosts?.[i],Y0=i=>{const e=Q0(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},$0=()=>Tf()?.config,X0=i=>Tf()?.[`_${i}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Us(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function eg(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W0(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[Xh(JSON.stringify(n)),Xh(JSON.stringify(c)),""].join(".")}const gu={};function J1(){const i={prod:[],emulator:[]};for(const e of Object.keys(gu))gu[e]?i.emulator.push(e):i.prod.push(e);return i}function Z1(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let QE=!1;function tg(i,e){if(typeof window>"u"||typeof document>"u"||!Us(window.location.host)||gu[i]===e||gu[i]||QE)return;gu[i]=e;function n(A){return`__firebase__banner__${A}`}const s="__firebase__banner",u=J1().prod.length>0;function c(){const A=document.getElementById(s);A&&A.remove()}function m(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function p(A,C){A.setAttribute("width","24"),A.setAttribute("id",C),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function g(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{QE=!0,c()},A}function v(A,C){A.setAttribute("id",C),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function b(){const A=Z1(s),C=n("text"),D=document.getElementById(C)||document.createElement("span"),B=n("learnmore"),M=document.getElementById(B)||document.createElement("a"),Y=n("preprendIcon"),$=document.getElementById(Y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const ie=A.element;m(ie),v(M,B);const he=g();p($,Y),ie.append($,D,M,he),document.body.appendChild(ie)}u?(D.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function eC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function tC(){const i=Tf()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function iC(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function rC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sC(){const i=hn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function aC(){return!tC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function oC(){try{return typeof indexedDB=="object"}catch{return!1}}function lC(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC="FirebaseError";class nr extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=uC,Object.setPrototypeOf(this,nr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Uu.prototype.create)}}class Uu{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],c=u?cC(u,s):"Error",m=`${this.serviceName}: ${c} (${o}).`;return new nr(o,m,s)}}function cC(i,e){return i.replace(hC,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const hC=/\{\$([^}]+)}/g;function fC(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Ra(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=i[o],c=e[o];if(YE(u)&&YE(c)){if(!Ra(u,c))return!1}else if(u!==c)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function YE(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ju(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function cu(i){const e={};return i.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function hu(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function dC(i,e){const n=new mC(i,e);return n.subscribe.bind(n)}class mC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");pC(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=ep),o.error===void 0&&(o.error=ep),o.complete===void 0&&(o.complete=ep);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pC(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function ep(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(i){return i&&i._delegate?i._delegate:i}class Ds{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new W1;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_C(e))try{this.getOrInitializeService({instanceIdentifier:Ea})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=Ea){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ea){return this.instances.has(e)}getOptions(e=Ea){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,c]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&c.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:yC(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ea){return this.component?this.component.multipleInstances?e:Ea:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yC(i){return i===Ea?void 0:i}function _C(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new gC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Ve||(Ve={}));const EC={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},TC=Ve.INFO,bC={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},AC=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=bC[e];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ng{constructor(e){this.name=e,this._logLevel=TC,this._logHandler=AC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?EC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}}const SC=(i,e)=>e.some(n=>i instanceof n);let $E,XE;function wC(){return $E||($E=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function RC(){return XE||(XE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const J0=new WeakMap,Ep=new WeakMap,Z0=new WeakMap,tp=new WeakMap,ig=new WeakMap;function CC(i){const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",c)},u=()=>{n(ws(i.result)),o()},c=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&J0.set(n,i)}).catch(()=>{}),ig.set(e,i),e}function IC(i){if(Ep.has(i))return;const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",c),i.removeEventListener("abort",c)},u=()=>{n(),o()},c=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",c),i.addEventListener("abort",c)});Ep.set(i,e)}let Tp={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return Ep.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Z0.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ws(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function xC(i){Tp=i(Tp)}function DC(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(np(this),e,...n);return Z0.set(s,e.sort?e.sort():[e]),ws(s)}:RC().includes(i)?function(...e){return i.apply(np(this),e),ws(J0.get(this))}:function(...e){return ws(i.apply(np(this),e))}}function NC(i){return typeof i=="function"?DC(i):(i instanceof IDBTransaction&&IC(i),SC(i,wC())?new Proxy(i,Tp):i)}function ws(i){if(i instanceof IDBRequest)return CC(i);if(tp.has(i))return tp.get(i);const e=NC(i);return e!==i&&(tp.set(i,e),ig.set(e,i)),e}const np=i=>ig.get(i);function OC(i,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const c=indexedDB.open(i,e),m=ws(c);return s&&c.addEventListener("upgradeneeded",p=>{s(ws(c.result),p.oldVersion,p.newVersion,ws(c.transaction),p)}),n&&c.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const MC=["get","getKey","getAll","getAllKeys","count"],VC=["put","add","delete","clear"],ip=new Map;function WE(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(ip.get(e))return ip.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=VC.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||MC.includes(n)))return;const u=async function(c,...m){const p=this.transaction(c,o?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(m.shift())),(await Promise.all([g[n](...m),o&&p.done]))[0]};return ip.set(e,u),u}xC(i=>({...i,get:(e,n,s)=>WE(e,n)||i.get(e,n,s),has:(e,n)=>!!WE(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(PC(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function PC(i){return i.getComponent()?.type==="VERSION"}const bp="@firebase/app",JE="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr=new ng("@firebase/app"),LC="@firebase/app-compat",UC="@firebase/analytics-compat",jC="@firebase/analytics",zC="@firebase/app-check-compat",BC="@firebase/app-check",qC="@firebase/auth",HC="@firebase/auth-compat",FC="@firebase/database",GC="@firebase/data-connect",KC="@firebase/database-compat",QC="@firebase/functions",YC="@firebase/functions-compat",$C="@firebase/installations",XC="@firebase/installations-compat",WC="@firebase/messaging",JC="@firebase/messaging-compat",ZC="@firebase/performance",eI="@firebase/performance-compat",tI="@firebase/remote-config",nI="@firebase/remote-config-compat",iI="@firebase/storage",rI="@firebase/storage-compat",sI="@firebase/firestore",aI="@firebase/ai",oI="@firebase/firestore-compat",lI="firebase",uI="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ap="[DEFAULT]",cI={[bp]:"fire-core",[LC]:"fire-core-compat",[jC]:"fire-analytics",[UC]:"fire-analytics-compat",[BC]:"fire-app-check",[zC]:"fire-app-check-compat",[qC]:"fire-auth",[HC]:"fire-auth-compat",[FC]:"fire-rtdb",[GC]:"fire-data-connect",[KC]:"fire-rtdb-compat",[QC]:"fire-fn",[YC]:"fire-fn-compat",[$C]:"fire-iid",[XC]:"fire-iid-compat",[WC]:"fire-fcm",[JC]:"fire-fcm-compat",[ZC]:"fire-perf",[eI]:"fire-perf-compat",[tI]:"fire-rc",[nI]:"fire-rc-compat",[iI]:"fire-gcs",[rI]:"fire-gcs-compat",[sI]:"fire-fst",[oI]:"fire-fst-compat",[aI]:"fire-vertex","fire-js":"fire-js",[lI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wh=new Map,hI=new Map,Sp=new Map;function ZE(i,e){try{i.container.addComponent(e)}catch(n){Nr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Ca(i){const e=i.name;if(Sp.has(e))return Nr.debug(`There were multiple attempts to register component ${e}.`),!1;Sp.set(e,i);for(const n of Wh.values())ZE(n,i);for(const n of hI.values())ZE(n,i);return!0}function bf(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function Rn(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rs=new Uu("app","Firebase",fI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ds("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma=uI;function eb(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s={name:Ap,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Rs.create("bad-app-name",{appName:String(o)});if(n||(n=$0()),!n)throw Rs.create("no-options");const u=Wh.get(o);if(u){if(Ra(n,u.options)&&Ra(s,u.config))return u;throw Rs.create("duplicate-app",{appName:o})}const c=new vC(o);for(const p of Sp.values())c.addComponent(p);const m=new dI(n,s,c);return Wh.set(o,m),m}function rg(i=Ap){const e=Wh.get(i);if(!e&&i===Ap&&$0())return eb();if(!e)throw Rs.create("no-app",{appName:i});return e}function Qi(i,e,n){let s=cI[i]??i;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const c=[`Unable to register library "${s}" with version "${e}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&c.push("and"),u&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Nr.warn(c.join(" "));return}Ca(new Ds(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI="firebase-heartbeat-database",pI=1,Su="firebase-heartbeat-store";let rp=null;function tb(){return rp||(rp=OC(mI,pI,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Su)}catch(n){console.warn(n)}}}}).catch(i=>{throw Rs.create("idb-open",{originalErrorMessage:i.message})})),rp}async function gI(i){try{const n=(await tb()).transaction(Su),s=await n.objectStore(Su).get(nb(i));return await n.done,s}catch(e){if(e instanceof nr)Nr.warn(e.message);else{const n=Rs.create("idb-get",{originalErrorMessage:e?.message});Nr.warn(n.message)}}}async function eT(i,e){try{const s=(await tb()).transaction(Su,"readwrite");await s.objectStore(Su).put(e,nb(i)),await s.done}catch(n){if(n instanceof nr)Nr.warn(n.message);else{const s=Rs.create("idb-set",{originalErrorMessage:n?.message});Nr.warn(s.message)}}}function nb(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI=1024,_I=30;class vI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new TI(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=tT();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>_I){const o=bI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Nr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=tT(),{heartbeatsToSend:n,unsentEntries:s}=EI(this._heartbeatsCache.heartbeats),o=Xh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Nr.warn(e),""}}}function tT(){return new Date().toISOString().substring(0,10)}function EI(i,e=yI){const n=[];let s=i.slice();for(const o of i){const u=n.find(c=>c.agent===o.agent);if(u){if(u.dates.push(o.date),nT(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),nT(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class TI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return oC()?lC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await gI(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return eT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return eT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function nT(i){return Xh(JSON.stringify({version:2,heartbeats:i})).length}function bI(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AI(i){Ca(new Ds("platform-logger",e=>new kC(e),"PRIVATE")),Ca(new Ds("heartbeat",e=>new vI(e),"PRIVATE")),Qi(bp,JE,i),Qi(bp,JE,"esm2020"),Qi("fire-js","")}AI("");function ib(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const SI=ib,rb=new Uu("auth","Firebase",ib());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh=new ng("@firebase/auth");function wI(i,...e){Jh.logLevel<=Ve.WARN&&Jh.warn(`Auth (${Ma}): ${i}`,...e)}function jh(i,...e){Jh.logLevel<=Ve.ERROR&&Jh.error(`Auth (${Ma}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(i,...e){throw ag(i,...e)}function mi(i,...e){return ag(i,...e)}function sg(i,e,n){const s={...SI(),[e]:n};return new Uu("auth","Firebase",s).create(e,{appName:i.name})}function Ir(i){return sg(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function RI(i,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Zn(i,"argument-error"),sg(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ag(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return rb.create(i,...e)}function be(i,e,...n){if(!i)throw ag(e,...n)}function wr(i){const e="INTERNAL ASSERTION FAILED: "+i;throw jh(e),new Error(e)}function Or(i,e){i||wr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(){return typeof self<"u"&&self.location?.href||""}function CI(){return iT()==="http:"||iT()==="https:"}function iT(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(CI()||iC()||"connection"in navigator)?navigator.onLine:!0}function xI(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Or(n>e,"Short delay should be less than long delay!"),this.isMobile=eC()||rC()}get(){return II()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function og(i,e){Or(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],OI=new zu(3e4,6e4);function kr(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function Pr(i,e,n,s,o={}){return ab(i,o,async()=>{let u={},c={};s&&(e==="GET"?c=s:u={body:JSON.stringify(s)});const m=ju({key:i.config.apiKey,...c}).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const g={method:e,headers:p,...u};return nC()||(g.referrerPolicy="no-referrer"),i.emulatorConfig&&Us(i.emulatorConfig.host)&&(g.credentials="include"),sb.fetch()(await ob(i,i.config.apiHost,n,m),g)})}async function ab(i,e,n){i._canInitEmulator=!1;const s={...DI,...e};try{const o=new VI(i),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const c=await u.json();if("needConfirmation"in c)throw xh(i,"account-exists-with-different-credential",c);if(u.ok&&!("errorMessage"in c))return c;{const m=u.ok?c.errorMessage:c.error.message,[p,g]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw xh(i,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw xh(i,"email-already-in-use",c);if(p==="USER_DISABLED")throw xh(i,"user-disabled",c);const v=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw sg(i,v,g);Zn(i,v)}}catch(o){if(o instanceof nr)throw o;Zn(i,"network-request-failed",{message:String(o)})}}async function Bu(i,e,n,s,o={}){const u=await Pr(i,e,n,s,o);return"mfaPendingCredential"in u&&Zn(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function ob(i,e,n,s){const o=`${e}${n}?${s}`,u=i,c=u.config.emulator?og(i.config,o):`${i.config.apiScheme}://${o}`;return NI.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(c).toString():c}function MI(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class VI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(mi(this.auth,"network-request-failed")),OI.get())})}}function xh(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=mi(i,e,s);return o.customData._tokenResponse=n,o}function rT(i){return i!==void 0&&i.enterprise!==void 0}class kI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return MI(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function PI(i,e){return Pr(i,"GET","/v2/recaptchaConfig",kr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LI(i,e){return Pr(i,"POST","/v1/accounts:delete",e)}async function Zh(i,e){return Pr(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yu(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function UI(i,e=!1){const n=rt(i),s=await n.getIdToken(e),o=lg(s);be(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,c=u?.sign_in_provider;return{claims:o,token:s,authTime:yu(sp(o.auth_time)),issuedAtTime:yu(sp(o.iat)),expirationTime:yu(sp(o.exp)),signInProvider:c||null,signInSecondFactor:u?.sign_in_second_factor||null}}function sp(i){return Number(i)*1e3}function lg(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return jh("JWT malformed, contained fewer than 3 sections"),null;try{const o=K0(n);return o?JSON.parse(o):(jh("Failed to decode base64 JWT payload"),null)}catch(o){return jh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function sT(i){const e=lg(i);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wu(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof nr&&jI(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function jI({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=yu(this.lastLoginAt),this.creationTime=yu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ef(i){const e=i.auth,n=await i.getIdToken(),s=await wu(i,Zh(e,{idToken:n}));be(s?.users.length,e,"internal-error");const o=s.users[0];i._notifyReloadListener(o);const u=o.providerUserInfo?.length?lb(o.providerUserInfo):[],c=qI(i.providerData,u),m=i.isAnonymous,p=!(i.email&&o.passwordHash)&&!c?.length,g=m?p:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Rp(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(i,v)}async function BI(i){const e=rt(i);await ef(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function qI(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function lb(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HI(i,e){const n=await ab(i,{},async()=>{const s=ju({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,c=await ob(i,o,"/v1/token",`key=${u}`),m=await i._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:s};return i.emulatorConfig&&Us(i.emulatorConfig.host)&&(p.credentials="include"),sb.fetch()(c,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function FI(i,e){return Pr(i,"POST","/v2/accounts:revokeToken",kr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):sT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){be(e.length!==0,"internal-error");const n=sT(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await HI(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,c=new Mo;return s&&(be(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),o&&(be(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),u&&(be(typeof u=="number","internal-error",{appName:e}),c.expirationTime=u),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Mo,this.toJSON())}_performRefresh(){return wr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _s(i,e){be(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class di{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new zI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Rp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await wu(this,this.stsTokenManager.getToken(this.auth,e));return be(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return UI(this,e)}reload(){return BI(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new di({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await ef(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Rn(this.auth.app))return Promise.reject(Ir(this.auth));const e=await this.getIdToken();return await wu(this,LI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,c=n.photoURL??void 0,m=n.tenantId??void 0,p=n._redirectEventId??void 0,g=n.createdAt??void 0,v=n.lastLoginAt??void 0,{uid:b,emailVerified:A,isAnonymous:C,providerData:D,stsTokenManager:B}=n;be(b&&B,e,"internal-error");const M=Mo.fromJSON(this.name,B);be(typeof b=="string",e,"internal-error"),_s(s,e.name),_s(o,e.name),be(typeof A=="boolean",e,"internal-error"),be(typeof C=="boolean",e,"internal-error"),_s(u,e.name),_s(c,e.name),_s(m,e.name),_s(p,e.name),_s(g,e.name),_s(v,e.name);const Y=new di({uid:b,auth:e,email:o,emailVerified:A,displayName:s,isAnonymous:C,photoURL:c,phoneNumber:u,tenantId:m,stsTokenManager:M,createdAt:g,lastLoginAt:v});return D&&Array.isArray(D)&&(Y.providerData=D.map($=>({...$}))),p&&(Y._redirectEventId=p),Y}static async _fromIdTokenResponse(e,n,s=!1){const o=new Mo;o.updateFromServerResponse(n);const u=new di({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await ef(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];be(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?lb(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!u?.length,m=new Mo;m.updateFromIdToken(s);const p=new di({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:c}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Rp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT=new Map;function Rr(i){Or(i instanceof Function,"Expected a class definition");let e=aT.get(i);return e?(Or(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,aT.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ub.type="NONE";const oT=ub;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zh(i,e,n){return`firebase:${i}:${e}:${n}`}class Vo{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=zh(this.userKey,o.apiKey,u),this.fullPersistenceKey=zh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Zh(this.auth,{idToken:e}).catch(()=>{});return n?di._fromGetAccountInfoResponse(this.auth,n,e):null}return di._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Vo(Rr(oT),e,s);const o=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=o[0]||Rr(oT);const c=zh(s,e.config.apiKey,e.name);let m=null;for(const g of n)try{const v=await g._get(c);if(v){let b;if(typeof v=="string"){const A=await Zh(e,{idToken:v}).catch(()=>{});if(!A)break;b=await di._fromGetAccountInfoResponse(e,A,v)}else b=di._fromJSON(e,v);g!==u&&(m=b),u=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new Vo(u,e,s):(u=p[0],m&&await u._set(c,m.toJSON()),await Promise.all(n.map(async g=>{if(g!==u)try{await g._remove(c)}catch{}})),new Vo(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(db(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(cb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pb(e))return"Blackberry";if(gb(e))return"Webos";if(hb(e))return"Safari";if((e.includes("chrome/")||fb(e))&&!e.includes("edge/"))return"Chrome";if(mb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if(s?.length===2)return s[1]}return"Other"}function cb(i=hn()){return/firefox\//i.test(i)}function hb(i=hn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fb(i=hn()){return/crios\//i.test(i)}function db(i=hn()){return/iemobile/i.test(i)}function mb(i=hn()){return/android/i.test(i)}function pb(i=hn()){return/blackberry/i.test(i)}function gb(i=hn()){return/webos/i.test(i)}function ug(i=hn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function GI(i=hn()){return ug(i)&&!!window.navigator?.standalone}function KI(){return sC()&&document.documentMode===10}function yb(i=hn()){return ug(i)||mb(i)||gb(i)||pb(i)||/windows phone/i.test(i)||db(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(i,e=[]){let n;switch(i){case"Browser":n=lT(hn());break;case"Worker":n=`${lT(hn())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ma}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((c,m)=>{try{const p=e(u);c(p)}catch(p){m(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YI(i,e={}){return Pr(i,"GET","/v2/passwordPolicy",kr(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I=6;class XI{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??$I,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new uT(this),this.idTokenSubscription=new uT(this),this.beforeStateQueue=new QI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Rr(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Vo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Zh(this,{idToken:e}),s=await di._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Rn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,c=s?._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===c)&&m?.user&&(s=m.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ef(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=xI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Rn(this.app))return Promise.reject(Ir(this));const n=e?rt(e):null;return n&&be(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Rn(this.app)?Promise.reject(Ir(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Rn(this.app)?Promise.reject(Ir(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Rr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await YI(this),n=new XI(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Uu("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await FI(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Rr(e)||this._popupRedirectResolver;be(n,this,"argument-error"),this.redirectPersistenceManager=await Vo.create(this,[Rr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let c=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(m,this,"internal-error"),m.then(()=>{c||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,o);return()=>{c=!0,p()}}else{const p=e.addObserver(n);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_b(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Rn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&wI(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Lr(i){return rt(i)}class uT{constructor(e){this.auth=e,this.observer=null,this.addObserver=dC(n=>this.observer=n)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Af={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function JI(i){Af=i}function vb(i){return Af.loadJS(i)}function ZI(){return Af.recaptchaEnterpriseScript}function ex(){return Af.gapiScript}function tx(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class nx{constructor(){this.enterprise=new ix}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class ix{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const rx="recaptcha-enterprise",Eb="NO_RECAPTCHA";class sx{constructor(e){this.type=rx,this.auth=Lr(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(c,m)=>{PI(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const g=new kI(p);return u.tenantId==null?u._agentRecaptchaConfig=g:u._tenantRecaptchaConfigs[u.tenantId]=g,c(g.siteKey)}}).catch(p=>{m(p)})})}function o(u,c,m){const p=window.grecaptcha;rT(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(g=>{c(g)}).catch(()=>{c(Eb)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new nx().execute("siteKey",{action:"verify"}):new Promise((u,c)=>{s(this.auth).then(m=>{if(!n&&rT(window.grecaptcha))o(m,u,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=ZI();p.length!==0&&(p+=m),vb(p).then(()=>{o(m,u,c)}).catch(g=>{c(g)})}}).catch(m=>{c(m)})})}}async function cT(i,e,n,s=!1,o=!1){const u=new sx(i);let c;if(o)c=Eb;else try{c=await u.verify(n)}catch{c=await u.verify(n,!0)}const m={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,g=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:c}):Object.assign(m,{captchaResponse:c}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function tf(i,e,n,s,o){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await cT(i,e,n,n==="getOobCode");return s(i,u)}else return s(i,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await cT(i,e,n,n==="getOobCode");return s(i,c)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(i,e){const n=bf(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(Ra(u,e??{}))return o;Zn(o,"already-initialized")}return n.initialize({options:e})}function ox(i,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Rr);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e?.popupRedirectResolver)}function lx(i,e,n){const s=Lr(i);be(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=Tb(e),{host:c,port:m}=ux(e),p=m===null?"":`:${m}`,g={url:`${u}//${c}${p}/`},v=Object.freeze({host:c,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){be(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),be(Ra(g,s.config.emulator)&&Ra(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,Us(c)?(eg(`${u}//${c}${p}`),tg("Auth",!0)):cx()}function Tb(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function ux(i){const e=Tb(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:hT(s.substr(u.length+1))}}else{const[u,c]=s.split(":");return{host:u,port:hT(c)}}}function hT(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function cx(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return wr("not implemented")}_getIdTokenResponse(e){return wr("not implemented")}_linkToIdToken(e,n){return wr("not implemented")}_getReauthenticationResolver(e){return wr("not implemented")}}async function hx(i,e){return Pr(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fx(i,e){return Bu(i,"POST","/v1/accounts:signInWithPassword",kr(i,e))}async function dx(i,e){return Pr(i,"POST","/v1/accounts:sendOobCode",kr(i,e))}async function mx(i,e){return dx(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function px(i,e){return Bu(i,"POST","/v1/accounts:signInWithEmailLink",kr(i,e))}async function gx(i,e){return Bu(i,"POST","/v1/accounts:signInWithEmailLink",kr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru extends cg{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Ru(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Ru(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tf(e,n,"signInWithPassword",fx);case"emailLink":return px(e,{email:this._email,oobCode:this._password});default:Zn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tf(e,s,"signUpPassword",hx);case"emailLink":return gx(e,{idToken:n,email:this._email,oobCode:this._password});default:Zn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ko(i,e){return Bu(i,"POST","/v1/accounts:signInWithIdp",kr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx="http://localhost";class Ia extends cg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ia(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Zn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const c=new Ia(s,o);return c.idToken=u.idToken||void 0,c.accessToken=u.accessToken||void 0,c.secret=u.secret,c.nonce=u.nonce,c.pendingToken=u.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return ko(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,ko(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ko(e,n)}buildRequest(){const e={requestUri:yx,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ju(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function vx(i){const e=cu(hu(i)).link,n=e?cu(hu(e)).deep_link_id:null,s=cu(hu(i)).deep_link_id;return(s?cu(hu(s)).link:null)||s||n||e||i}class hg{constructor(e){const n=cu(hu(e)),s=n.apiKey??null,o=n.oobCode??null,u=_x(n.mode??null);be(s&&o&&u,"argument-error"),this.apiKey=s,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=vx(e);try{return new hg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(){this.providerId=$o.PROVIDER_ID}static credential(e,n){return Ru._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=hg.parseLink(n);return be(s,"argument-error"),Ru._fromEmailAndCode(e,s.code,s.tenantId)}}$o.PROVIDER_ID="password";$o.EMAIL_PASSWORD_SIGN_IN_METHOD="password";$o.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu extends fg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs extends qu{constructor(){super("facebook.com")}static credential(e){return Ia._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vs.credential(e.oauthAccessToken)}catch{return null}}}vs.FACEBOOK_SIGN_IN_METHOD="facebook.com";vs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi extends qu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ia._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Gi.credentialFromTaggedObject(e)}static credentialFromError(e){return Gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Gi.credential(n,s)}catch{return null}}}Gi.GOOGLE_SIGN_IN_METHOD="google.com";Gi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es extends qu{constructor(){super("github.com")}static credential(e){return Ia._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Es.credential(e.oauthAccessToken)}catch{return null}}}Es.GITHUB_SIGN_IN_METHOD="github.com";Es.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts extends qu{constructor(){super("twitter.com")}static credential(e,n){return Ia._fromParams({providerId:Ts.PROVIDER_ID,signInMethod:Ts.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ts.credentialFromTaggedObject(e)}static credentialFromError(e){return Ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Ts.credential(n,s)}catch{return null}}}Ts.TWITTER_SIGN_IN_METHOD="twitter.com";Ts.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ex(i,e){return Bu(i,"POST","/v1/accounts:signUp",kr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await di._fromIdTokenResponse(e,s,o),c=fT(s);return new xa({user:u,providerId:c,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=fT(s);return new xa({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function fT(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf extends nr{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,nf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new nf(e,n,s,o)}}function bb(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?nf._fromErrorAndOperation(i,u,e,s):u})}async function Tx(i,e,n=!1){const s=await wu(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return xa._forOperation(i,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bx(i,e,n=!1){const{auth:s}=i;if(Rn(s.app))return Promise.reject(Ir(s));const o="reauthenticate";try{const u=await wu(i,bb(s,o,e,i),n);be(u.idToken,s,"internal-error");const c=lg(u.idToken);be(c,s,"internal-error");const{sub:m}=c;return be(i.uid===m,s,"user-mismatch"),xa._forOperation(i,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&Zn(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ab(i,e,n=!1){if(Rn(i.app))return Promise.reject(Ir(i));const s="signIn",o=await bb(i,s,e),u=await xa._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(u.user),u}async function Ax(i,e){return Ab(Lr(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sb(i){const e=Lr(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Sx(i,e,n){const s=Lr(i);await tf(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",mx)}async function wx(i,e,n){if(Rn(i.app))return Promise.reject(Ir(i));const s=Lr(i),c=await tf(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ex).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&Sb(i),p}),m=await xa._fromIdTokenResponse(s,"signIn",c);return await s._updateCurrentUser(m.user),m}function Rx(i,e,n){return Rn(i.app)?Promise.reject(Ir(i)):Ax(rt(i),$o.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&Sb(i),s})}function Cx(i,e,n,s){return rt(i).onIdTokenChanged(e,n,s)}function Ix(i,e,n){return rt(i).beforeAuthStateChanged(e,n)}function xx(i,e,n,s){return rt(i).onAuthStateChanged(e,n,s)}function wb(i){return rt(i).signOut()}const rf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(rf,"1"),this.storage.removeItem(rf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx=1e3,Nx=10;class Cb extends Rb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,m,p)=>{this.notifyListeners(c,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(s);!n&&this.localCache[s]===c||this.notifyListeners(s,c)},u=this.storage.getItem(s);KI()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,Nx):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},Dx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Cb.type="LOCAL";const Ox=Cb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib extends Rb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Ib.type="SESSION";const xb=Ib;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new Sf(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,c=this.handlersMap[o];if(!c?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(c).map(async g=>g(n.origin,u)),p=await Mx(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Sf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dg(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,c;return new Promise((m,p)=>{const g=dg("",20);o.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},s);c={messageChannel:o,onMessage(b){const A=b;if(A.data.eventId===g)switch(A.data.status){case"ack":clearTimeout(v),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(A.data.response);break;default:clearTimeout(v),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(){return window}function kx(i){Yi().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Db(){return typeof Yi().WorkerGlobalScope<"u"&&typeof Yi().importScripts=="function"}async function Px(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Lx(){return navigator?.serviceWorker?.controller||null}function Ux(){return Db()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb="firebaseLocalStorageDb",jx=1,sf="firebaseLocalStorage",Ob="fbase_key";class Hu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function wf(i,e){return i.transaction([sf],e?"readwrite":"readonly").objectStore(sf)}function zx(){const i=indexedDB.deleteDatabase(Nb);return new Hu(i).toPromise()}function Cp(){const i=indexedDB.open(Nb,jx);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(sf,{keyPath:Ob})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(sf)?e(s):(s.close(),await zx(),e(await Cp()))})})}async function dT(i,e,n){const s=wf(i,!0).put({[Ob]:e,value:n});return new Hu(s).toPromise()}async function Bx(i,e){const n=wf(i,!1).get(e),s=await new Hu(n).toPromise();return s===void 0?null:s.value}function mT(i,e){const n=wf(i,!0).delete(e);return new Hu(n).toPromise()}const qx=800,Hx=3;class Mb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Cp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>Hx)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Db()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Sf._getInstance(Ux()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Px(),!this.activeServiceWorker)return;this.sender=new Vx(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Lx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Cp();return await dT(e,rf,"1"),await mT(e,rf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>dT(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>Bx(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>mT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=wf(o,!1).getAll();return new Hu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),qx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Mb.type="LOCAL";const Fx=Mb;new zu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(i,e){return e?Rr(e):(be(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg extends cg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ko(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ko(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ko(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Gx(i){return Ab(i.auth,new mg(i),i.bypassAuthState)}function Kx(i){const{auth:e,user:n}=i;return be(n,e,"internal-error"),bx(n,new mg(i),i.bypassAuthState)}async function Qx(i){const{auth:e,user:n}=i;return be(n,e,"internal-error"),Tx(n,new mg(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:c,type:m}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Gx;case"linkViaPopup":case"linkViaRedirect":return Qx;case"reauthViaPopup":case"reauthViaRedirect":return Kx;default:Zn(this.auth,"internal-error")}}resolve(e){Or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx=new zu(2e3,1e4);async function $x(i,e,n){if(Rn(i.app))return Promise.reject(mi(i,"operation-not-supported-in-this-environment"));const s=Lr(i);RI(i,e,fg);const o=Vb(s,n);return new Ta(s,"signInViaPopup",e,o).executeNotNull()}class Ta extends kb{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,Ta.currentPopupAction&&Ta.currentPopupAction.cancel(),Ta.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){Or(this.filter.length===1,"Popup operations only handle one event");const e=dg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(mi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(mi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ta.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Yx.get())};e()}}Ta.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx="pendingRedirect",Bh=new Map;class Wx extends kb{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Bh.get(this.auth._key());if(!e){try{const s=await Jx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Bh.set(this.auth._key(),e)}return this.bypassAuthState||Bh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Jx(i,e){const n=t2(e),s=e2(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function Zx(i,e){Bh.set(i._key(),e)}function e2(i){return Rr(i._redirectPersistence)}function t2(i){return zh(Xx,i.config.apiKey,i.name)}async function n2(i,e,n=!1){if(Rn(i.app))return Promise.reject(Ir(i));const s=Lr(i),o=Vb(s,e),c=await new Wx(s,o,n).execute();return c&&!n&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2=600*1e3;class r2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!s2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!Pb(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(mi(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=i2&&this.cachedEventUids.clear(),this.cachedEventUids.has(pT(e))}saveEventToCache(e){this.cachedEventUids.add(pT(e)),this.lastProcessedEventTime=Date.now()}}function pT(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function Pb({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function s2(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Pb(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a2(i,e={}){return Pr(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,l2=/^https?/;async function u2(i){if(i.config.emulator)return;const{authorizedDomains:e}=await a2(i);for(const n of e)try{if(c2(n))return}catch{}Zn(i,"unauthorized-domain")}function c2(i){const e=wp(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const c=new URL(i);return c.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===s}if(!l2.test(n))return!1;if(o2.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2=new zu(3e4,6e4);function gT(){const i=Yi().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function f2(i){return new Promise((e,n)=>{function s(){gT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gT(),n(mi(i,"network-request-failed"))},timeout:h2.get()})}if(Yi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Yi().gapi?.load)s();else{const o=tx("iframefcb");return Yi()[o]=()=>{gapi.load?s():n(mi(i,"network-request-failed"))},vb(`${ex()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw qh=null,e})}let qh=null;function d2(i){return qh=qh||f2(i),qh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2=new zu(5e3,15e3),p2="__/auth/iframe",g2="emulator/auth/iframe",y2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function v2(i){const e=i.config;be(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?og(e,g2):`https://${i.config.authDomain}/${p2}`,s={apiKey:e.apiKey,appName:i.name,v:Ma},o=_2.get(i.config.apiHost);o&&(s.eid=o);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${ju(s).slice(1)}`}async function E2(i){const e=await d2(i),n=Yi().gapi;return be(n,i,"internal-error"),e.open({where:document.body,url:v2(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:y2,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const c=mi(i,"network-request-failed"),m=Yi().setTimeout(()=>{u(c)},m2.get());function p(){Yi().clearTimeout(m),o(s)}s.ping(p).then(p,()=>{u(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},b2=500,A2=600,S2="_blank",w2="http://localhost";class yT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function R2(i,e,n,s=b2,o=A2){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const p={...T2,width:s.toString(),height:o.toString(),top:u,left:c},g=hn().toLowerCase();n&&(m=fb(g)?S2:n),cb(g)&&(e=e||w2,p.scrollbars="yes");const v=Object.entries(p).reduce((A,[C,D])=>`${A}${C}=${D},`,"");if(GI(g)&&m!=="_self")return C2(e||"",m),new yT(null);const b=window.open(e||"",m,v);be(b,i,"popup-blocked");try{b.focus()}catch{}return new yT(b)}function C2(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2="__/auth/handler",x2="emulator/auth/handler",D2=encodeURIComponent("fac");async function _T(i,e,n,s,o,u){be(i.config.authDomain,i,"auth-domain-config-required"),be(i.config.apiKey,i,"invalid-api-key");const c={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:Ma,eventId:o};if(e instanceof fg){e.setDefaultLanguage(i.languageCode),c.providerId=e.providerId||"",fC(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,b]of Object.entries({}))c[v]=b}if(e instanceof qu){const v=e.getScopes().filter(b=>b!=="");v.length>0&&(c.scopes=v.join(","))}i.tenantId&&(c.tid=i.tenantId);const m=c;for(const v of Object.keys(m))m[v]===void 0&&delete m[v];const p=await i._getAppCheckToken(),g=p?`#${D2}=${encodeURIComponent(p)}`:"";return`${N2(i)}?${ju(m).slice(1)}${g}`}function N2({config:i}){return i.emulator?og(i,x2):`https://${i.authDomain}/${I2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ap="webStorageSupport";class O2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xb,this._completeRedirectFn=n2,this._overrideRedirectResult=Zx}async _openPopup(e,n,s,o){Or(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await _T(e,n,s,wp(),o);return R2(e,u,dg())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await _T(e,n,s,wp(),o);return kx(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(Or(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await E2(e),s=new r2(e);return n.register("authEvent",o=>(be(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ap,{type:ap},o=>{const u=o?.[0]?.[ap];u!==void 0&&n(!!u),Zn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=u2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return yb()||hb()||ug()}}const M2=O2;var vT="@firebase/auth",ET="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k2(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function P2(i){Ca(new Ds("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:c,authDomain:m}=s.options;be(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:c,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_b(i)},g=new WI(s,o,u,p);return ox(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Ca(new Ds("auth-internal",e=>{const n=Lr(e.getProvider("auth").getImmediate());return(s=>new V2(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qi(vT,ET,k2(i)),Qi(vT,ET,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2=300,U2=X0("authIdTokenMaxAge")||L2;let TT=null;const j2=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>U2)return;const o=n?.token;TT!==o&&(TT=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function z2(i=rg()){const e=bf(i,"auth");if(e.isInitialized())return e.getImmediate();const n=ax(i,{popupRedirectResolver:M2,persistence:[Fx,Ox,xb]}),s=X0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const c=j2(u.toString());Ix(n,c,()=>c(n.currentUser)),Cx(n,m=>c(m))}}const o=Q0("auth");return o&&lx(n,`http://${o}`),n}function B2(){return document.getElementsByTagName("head")?.[0]??document}JI({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const u=mi("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",B2().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});P2("Browser");var q2="firebase",H2="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qi(q2,H2,"app");var bT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Cs,Lb;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,R){function x(){}x.prototype=R.prototype,I.F=R.prototype,I.prototype=new x,I.prototype.constructor=I,I.D=function(U,V,j){for(var N=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)N[Ke-2]=arguments[Ke];return R.prototype[V].apply(U,N)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(I,R,x){x||(x=0);const U=Array(16);if(typeof R=="string")for(var V=0;V<16;++V)U[V]=R.charCodeAt(x++)|R.charCodeAt(x++)<<8|R.charCodeAt(x++)<<16|R.charCodeAt(x++)<<24;else for(V=0;V<16;++V)U[V]=R[x++]|R[x++]<<8|R[x++]<<16|R[x++]<<24;R=I.g[0],x=I.g[1],V=I.g[2];let j=I.g[3],N;N=R+(j^x&(V^j))+U[0]+3614090360&4294967295,R=x+(N<<7&4294967295|N>>>25),N=j+(V^R&(x^V))+U[1]+3905402710&4294967295,j=R+(N<<12&4294967295|N>>>20),N=V+(x^j&(R^x))+U[2]+606105819&4294967295,V=j+(N<<17&4294967295|N>>>15),N=x+(R^V&(j^R))+U[3]+3250441966&4294967295,x=V+(N<<22&4294967295|N>>>10),N=R+(j^x&(V^j))+U[4]+4118548399&4294967295,R=x+(N<<7&4294967295|N>>>25),N=j+(V^R&(x^V))+U[5]+1200080426&4294967295,j=R+(N<<12&4294967295|N>>>20),N=V+(x^j&(R^x))+U[6]+2821735955&4294967295,V=j+(N<<17&4294967295|N>>>15),N=x+(R^V&(j^R))+U[7]+4249261313&4294967295,x=V+(N<<22&4294967295|N>>>10),N=R+(j^x&(V^j))+U[8]+1770035416&4294967295,R=x+(N<<7&4294967295|N>>>25),N=j+(V^R&(x^V))+U[9]+2336552879&4294967295,j=R+(N<<12&4294967295|N>>>20),N=V+(x^j&(R^x))+U[10]+4294925233&4294967295,V=j+(N<<17&4294967295|N>>>15),N=x+(R^V&(j^R))+U[11]+2304563134&4294967295,x=V+(N<<22&4294967295|N>>>10),N=R+(j^x&(V^j))+U[12]+1804603682&4294967295,R=x+(N<<7&4294967295|N>>>25),N=j+(V^R&(x^V))+U[13]+4254626195&4294967295,j=R+(N<<12&4294967295|N>>>20),N=V+(x^j&(R^x))+U[14]+2792965006&4294967295,V=j+(N<<17&4294967295|N>>>15),N=x+(R^V&(j^R))+U[15]+1236535329&4294967295,x=V+(N<<22&4294967295|N>>>10),N=R+(V^j&(x^V))+U[1]+4129170786&4294967295,R=x+(N<<5&4294967295|N>>>27),N=j+(x^V&(R^x))+U[6]+3225465664&4294967295,j=R+(N<<9&4294967295|N>>>23),N=V+(R^x&(j^R))+U[11]+643717713&4294967295,V=j+(N<<14&4294967295|N>>>18),N=x+(j^R&(V^j))+U[0]+3921069994&4294967295,x=V+(N<<20&4294967295|N>>>12),N=R+(V^j&(x^V))+U[5]+3593408605&4294967295,R=x+(N<<5&4294967295|N>>>27),N=j+(x^V&(R^x))+U[10]+38016083&4294967295,j=R+(N<<9&4294967295|N>>>23),N=V+(R^x&(j^R))+U[15]+3634488961&4294967295,V=j+(N<<14&4294967295|N>>>18),N=x+(j^R&(V^j))+U[4]+3889429448&4294967295,x=V+(N<<20&4294967295|N>>>12),N=R+(V^j&(x^V))+U[9]+568446438&4294967295,R=x+(N<<5&4294967295|N>>>27),N=j+(x^V&(R^x))+U[14]+3275163606&4294967295,j=R+(N<<9&4294967295|N>>>23),N=V+(R^x&(j^R))+U[3]+4107603335&4294967295,V=j+(N<<14&4294967295|N>>>18),N=x+(j^R&(V^j))+U[8]+1163531501&4294967295,x=V+(N<<20&4294967295|N>>>12),N=R+(V^j&(x^V))+U[13]+2850285829&4294967295,R=x+(N<<5&4294967295|N>>>27),N=j+(x^V&(R^x))+U[2]+4243563512&4294967295,j=R+(N<<9&4294967295|N>>>23),N=V+(R^x&(j^R))+U[7]+1735328473&4294967295,V=j+(N<<14&4294967295|N>>>18),N=x+(j^R&(V^j))+U[12]+2368359562&4294967295,x=V+(N<<20&4294967295|N>>>12),N=R+(x^V^j)+U[5]+4294588738&4294967295,R=x+(N<<4&4294967295|N>>>28),N=j+(R^x^V)+U[8]+2272392833&4294967295,j=R+(N<<11&4294967295|N>>>21),N=V+(j^R^x)+U[11]+1839030562&4294967295,V=j+(N<<16&4294967295|N>>>16),N=x+(V^j^R)+U[14]+4259657740&4294967295,x=V+(N<<23&4294967295|N>>>9),N=R+(x^V^j)+U[1]+2763975236&4294967295,R=x+(N<<4&4294967295|N>>>28),N=j+(R^x^V)+U[4]+1272893353&4294967295,j=R+(N<<11&4294967295|N>>>21),N=V+(j^R^x)+U[7]+4139469664&4294967295,V=j+(N<<16&4294967295|N>>>16),N=x+(V^j^R)+U[10]+3200236656&4294967295,x=V+(N<<23&4294967295|N>>>9),N=R+(x^V^j)+U[13]+681279174&4294967295,R=x+(N<<4&4294967295|N>>>28),N=j+(R^x^V)+U[0]+3936430074&4294967295,j=R+(N<<11&4294967295|N>>>21),N=V+(j^R^x)+U[3]+3572445317&4294967295,V=j+(N<<16&4294967295|N>>>16),N=x+(V^j^R)+U[6]+76029189&4294967295,x=V+(N<<23&4294967295|N>>>9),N=R+(x^V^j)+U[9]+3654602809&4294967295,R=x+(N<<4&4294967295|N>>>28),N=j+(R^x^V)+U[12]+3873151461&4294967295,j=R+(N<<11&4294967295|N>>>21),N=V+(j^R^x)+U[15]+530742520&4294967295,V=j+(N<<16&4294967295|N>>>16),N=x+(V^j^R)+U[2]+3299628645&4294967295,x=V+(N<<23&4294967295|N>>>9),N=R+(V^(x|~j))+U[0]+4096336452&4294967295,R=x+(N<<6&4294967295|N>>>26),N=j+(x^(R|~V))+U[7]+1126891415&4294967295,j=R+(N<<10&4294967295|N>>>22),N=V+(R^(j|~x))+U[14]+2878612391&4294967295,V=j+(N<<15&4294967295|N>>>17),N=x+(j^(V|~R))+U[5]+4237533241&4294967295,x=V+(N<<21&4294967295|N>>>11),N=R+(V^(x|~j))+U[12]+1700485571&4294967295,R=x+(N<<6&4294967295|N>>>26),N=j+(x^(R|~V))+U[3]+2399980690&4294967295,j=R+(N<<10&4294967295|N>>>22),N=V+(R^(j|~x))+U[10]+4293915773&4294967295,V=j+(N<<15&4294967295|N>>>17),N=x+(j^(V|~R))+U[1]+2240044497&4294967295,x=V+(N<<21&4294967295|N>>>11),N=R+(V^(x|~j))+U[8]+1873313359&4294967295,R=x+(N<<6&4294967295|N>>>26),N=j+(x^(R|~V))+U[15]+4264355552&4294967295,j=R+(N<<10&4294967295|N>>>22),N=V+(R^(j|~x))+U[6]+2734768916&4294967295,V=j+(N<<15&4294967295|N>>>17),N=x+(j^(V|~R))+U[13]+1309151649&4294967295,x=V+(N<<21&4294967295|N>>>11),N=R+(V^(x|~j))+U[4]+4149444226&4294967295,R=x+(N<<6&4294967295|N>>>26),N=j+(x^(R|~V))+U[11]+3174756917&4294967295,j=R+(N<<10&4294967295|N>>>22),N=V+(R^(j|~x))+U[2]+718787259&4294967295,V=j+(N<<15&4294967295|N>>>17),N=x+(j^(V|~R))+U[9]+3951481745&4294967295,I.g[0]=I.g[0]+R&4294967295,I.g[1]=I.g[1]+(V+(N<<21&4294967295|N>>>11))&4294967295,I.g[2]=I.g[2]+V&4294967295,I.g[3]=I.g[3]+j&4294967295}s.prototype.v=function(I,R){R===void 0&&(R=I.length);const x=R-this.blockSize,U=this.C;let V=this.h,j=0;for(;j<R;){if(V==0)for(;j<=x;)o(this,I,j),j+=this.blockSize;if(typeof I=="string"){for(;j<R;)if(U[V++]=I.charCodeAt(j++),V==this.blockSize){o(this,U),V=0;break}}else for(;j<R;)if(U[V++]=I[j++],V==this.blockSize){o(this,U),V=0;break}}this.h=V,this.o+=R},s.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var R=1;R<I.length-8;++R)I[R]=0;R=this.o*8;for(var x=I.length-8;x<I.length;++x)I[x]=R&255,R/=256;for(this.v(I),I=Array(16),R=0,x=0;x<4;++x)for(let U=0;U<32;U+=8)I[R++]=this.g[x]>>>U&255;return I};function u(I,R){var x=m;return Object.prototype.hasOwnProperty.call(x,I)?x[I]:x[I]=R(I)}function c(I,R){this.h=R;const x=[];let U=!0;for(let V=I.length-1;V>=0;V--){const j=I[V]|0;U&&j==R||(x[V]=j,U=!1)}this.g=x}var m={};function p(I){return-128<=I&&I<128?u(I,function(R){return new c([R|0],R<0?-1:0)}):new c([I|0],I<0?-1:0)}function g(I){if(isNaN(I)||!isFinite(I))return b;if(I<0)return M(g(-I));const R=[];let x=1;for(let U=0;I>=x;U++)R[U]=I/x|0,x*=4294967296;return new c(R,0)}function v(I,R){if(I.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(I.charAt(0)=="-")return M(v(I.substring(1),R));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const x=g(Math.pow(R,8));let U=b;for(let j=0;j<I.length;j+=8){var V=Math.min(8,I.length-j);const N=parseInt(I.substring(j,j+V),R);V<8?(V=g(Math.pow(R,V)),U=U.j(V).add(g(N))):(U=U.j(x),U=U.add(g(N)))}return U}var b=p(0),A=p(1),C=p(16777216);i=c.prototype,i.m=function(){if(B(this))return-M(this).m();let I=0,R=1;for(let x=0;x<this.g.length;x++){const U=this.i(x);I+=(U>=0?U:4294967296+U)*R,R*=4294967296}return I},i.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(D(this))return"0";if(B(this))return"-"+M(this).toString(I);const R=g(Math.pow(I,6));var x=this;let U="";for(;;){const V=he(x,R).g;x=Y(x,V.j(R));let j=((x.g.length>0?x.g[0]:x.h)>>>0).toString(I);if(x=V,D(x))return j+U;for(;j.length<6;)j="0"+j;U=j+U}},i.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function D(I){if(I.h!=0)return!1;for(let R=0;R<I.g.length;R++)if(I.g[R]!=0)return!1;return!0}function B(I){return I.h==-1}i.l=function(I){return I=Y(this,I),B(I)?-1:D(I)?0:1};function M(I){const R=I.g.length,x=[];for(let U=0;U<R;U++)x[U]=~I.g[U];return new c(x,~I.h).add(A)}i.abs=function(){return B(this)?M(this):this},i.add=function(I){const R=Math.max(this.g.length,I.g.length),x=[];let U=0;for(let V=0;V<=R;V++){let j=U+(this.i(V)&65535)+(I.i(V)&65535),N=(j>>>16)+(this.i(V)>>>16)+(I.i(V)>>>16);U=N>>>16,j&=65535,N&=65535,x[V]=N<<16|j}return new c(x,x[x.length-1]&-2147483648?-1:0)};function Y(I,R){return I.add(M(R))}i.j=function(I){if(D(this)||D(I))return b;if(B(this))return B(I)?M(this).j(M(I)):M(M(this).j(I));if(B(I))return M(this.j(M(I)));if(this.l(C)<0&&I.l(C)<0)return g(this.m()*I.m());const R=this.g.length+I.g.length,x=[];for(var U=0;U<2*R;U++)x[U]=0;for(U=0;U<this.g.length;U++)for(let V=0;V<I.g.length;V++){const j=this.i(U)>>>16,N=this.i(U)&65535,Ke=I.i(V)>>>16,Lt=I.i(V)&65535;x[2*U+2*V]+=N*Lt,$(x,2*U+2*V),x[2*U+2*V+1]+=j*Lt,$(x,2*U+2*V+1),x[2*U+2*V+1]+=N*Ke,$(x,2*U+2*V+1),x[2*U+2*V+2]+=j*Ke,$(x,2*U+2*V+2)}for(I=0;I<R;I++)x[I]=x[2*I+1]<<16|x[2*I];for(I=R;I<2*R;I++)x[I]=0;return new c(x,0)};function $(I,R){for(;(I[R]&65535)!=I[R];)I[R+1]+=I[R]>>>16,I[R]&=65535,R++}function ie(I,R){this.g=I,this.h=R}function he(I,R){if(D(R))throw Error("division by zero");if(D(I))return new ie(b,b);if(B(I))return R=he(M(I),R),new ie(M(R.g),M(R.h));if(B(R))return R=he(I,M(R)),new ie(M(R.g),R.h);if(I.g.length>30){if(B(I)||B(R))throw Error("slowDivide_ only works with positive integers.");for(var x=A,U=R;U.l(I)<=0;)x=Ee(x),U=Ee(U);var V=ae(x,1),j=ae(U,1);for(U=ae(U,2),x=ae(x,2);!D(U);){var N=j.add(U);N.l(I)<=0&&(V=V.add(x),j=N),U=ae(U,1),x=ae(x,1)}return R=Y(I,V.j(R)),new ie(V,R)}for(V=b;I.l(R)>=0;){for(x=Math.max(1,Math.floor(I.m()/R.m())),U=Math.ceil(Math.log(x)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),j=g(x),N=j.j(R);B(N)||N.l(I)>0;)x-=U,j=g(x),N=j.j(R);D(j)&&(j=A),V=V.add(j),I=Y(I,N)}return new ie(V,I)}i.B=function(I){return he(this,I).h},i.and=function(I){const R=Math.max(this.g.length,I.g.length),x=[];for(let U=0;U<R;U++)x[U]=this.i(U)&I.i(U);return new c(x,this.h&I.h)},i.or=function(I){const R=Math.max(this.g.length,I.g.length),x=[];for(let U=0;U<R;U++)x[U]=this.i(U)|I.i(U);return new c(x,this.h|I.h)},i.xor=function(I){const R=Math.max(this.g.length,I.g.length),x=[];for(let U=0;U<R;U++)x[U]=this.i(U)^I.i(U);return new c(x,this.h^I.h)};function Ee(I){const R=I.g.length+1,x=[];for(let U=0;U<R;U++)x[U]=I.i(U)<<1|I.i(U-1)>>>31;return new c(x,I.h)}function ae(I,R){const x=R>>5;R%=32;const U=I.g.length-x,V=[];for(let j=0;j<U;j++)V[j]=R>0?I.i(j+x)>>>R|I.i(j+x+1)<<32-R:I.i(j+x);return new c(V,I.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Lb=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=v,Cs=c}).apply(typeof bT<"u"?bT:typeof self<"u"?self:typeof window<"u"?window:{});var Dh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ub,fu,jb,Hh,Ip,zb,Bb,qb;(function(){var i,e=Object.defineProperty;function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Dh=="object"&&Dh];for(var y=0;y<h.length;++y){var T=h[y];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var s=n(this);function o(h,y){if(y)e:{var T=s;h=h.split(".");for(var w=0;w<h.length-1;w++){var q=h[w];if(!(q in T))break e;T=T[q]}h=h[h.length-1],w=T[h],y=y(w),y!=w&&y!=null&&e(T,h,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(y){var T=[],w;for(w in y)Object.prototype.hasOwnProperty.call(y,w)&&T.push([w,y[w]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},c=this||self;function m(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function p(h,y,T){return h.call.apply(h.bind,arguments)}function g(h,y,T){return g=p,g.apply(null,arguments)}function v(h,y){var T=Array.prototype.slice.call(arguments,1);return function(){var w=T.slice();return w.push.apply(w,arguments),h.apply(this,w)}}function b(h,y){function T(){}T.prototype=y.prototype,h.Z=y.prototype,h.prototype=new T,h.prototype.constructor=h,h.Ob=function(w,q,K){for(var se=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)se[Re-2]=arguments[Re];return y.prototype[q].apply(w,se)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function C(h){const y=h.length;if(y>0){const T=Array(y);for(let w=0;w<y;w++)T[w]=h[w];return T}return[]}function D(h,y){for(let w=1;w<arguments.length;w++){const q=arguments[w];var T=typeof q;if(T=T!="object"?T:q?Array.isArray(q)?"array":T:"null",T=="array"||T=="object"&&typeof q.length=="number"){T=h.length||0;const K=q.length||0;h.length=T+K;for(let se=0;se<K;se++)h[T+se]=q[se]}else h.push(q)}}class B{constructor(y,T){this.i=y,this.j=T,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function M(h){c.setTimeout(()=>{throw h},0)}function Y(){var h=I;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class ${constructor(){this.h=this.g=null}add(y,T){const w=ie.get();w.set(y,T),this.h?this.h.next=w:this.g=w,this.h=w}}var ie=new B(()=>new he,h=>h.reset());class he{constructor(){this.next=this.g=this.h=null}set(y,T){this.h=y,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let Ee,ae=!1,I=new $,R=()=>{const h=Promise.resolve(void 0);Ee=()=>{h.then(x)}};function x(){for(var h;h=Y();){try{h.h.call(h.g)}catch(T){M(T)}var y=ie;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}ae=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var j=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};c.addEventListener("test",T,y),c.removeEventListener("test",T,y)}catch{}return h})();function N(h){return/^[\s\xa0]*$/.test(h)}function Ke(h,y){V.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}b(Ke,V),Ke.prototype.init=function(h,y){const T=this.type=h.type,w=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(T=="mouseover"?y=h.fromElement:T=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Ke.Z.h.call(this)},Ke.prototype.h=function(){Ke.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Lt="closure_listenable_"+(Math.random()*1e6|0),J=0;function oe(h,y,T,w,q){this.listener=h,this.proxy=null,this.src=y,this.type=T,this.capture=!!w,this.ha=q,this.key=++J,this.da=this.fa=!1}function ge(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Be(h,y,T){for(const w in h)y.call(T,h[w],w,h)}function Qe(h,y){for(const T in h)y.call(void 0,h[T],T,h)}function P(h){const y={};for(const T in h)y[T]=h[T];return y}const te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(h,y){let T,w;for(let q=1;q<arguments.length;q++){w=arguments[q];for(T in w)h[T]=w[T];for(let K=0;K<te.length;K++)T=te[K],Object.prototype.hasOwnProperty.call(w,T)&&(h[T]=w[T])}}function ce(h){this.src=h,this.g={},this.h=0}ce.prototype.add=function(h,y,T,w,q){const K=h.toString();h=this.g[K],h||(h=this.g[K]=[],this.h++);const se=Ie(h,y,w,q);return se>-1?(y=h[se],T||(y.fa=!1)):(y=new oe(y,this.src,K,!!w,q),y.fa=T,h.push(y)),y};function Se(h,y){const T=y.type;if(T in h.g){var w=h.g[T],q=Array.prototype.indexOf.call(w,y,void 0),K;(K=q>=0)&&Array.prototype.splice.call(w,q,1),K&&(ge(y),h.g[T].length==0&&(delete h.g[T],h.h--))}}function Ie(h,y,T,w){for(let q=0;q<h.length;++q){const K=h[q];if(!K.da&&K.listener==y&&K.capture==!!T&&K.ha==w)return q}return-1}var je="closure_lm_"+(Math.random()*1e6|0),Ut={};function ut(h,y,T,w,q){if(Array.isArray(y)){for(let K=0;K<y.length;K++)ut(h,y[K],T,w,q);return null}return T=rl(T),h&&h[Lt]?h.J(y,T,m(w)?!!w.capture:!1,q):qs(h,y,T,!1,w,q)}function qs(h,y,T,w,q,K){if(!y)throw Error("Invalid event type");const se=m(q)?!!q.capture:!!q;let Re=Hs(h);if(Re||(h[je]=Re=new ce(h)),T=Re.add(y,T,w,se,K),T.proxy)return T;if(w=La(),T.proxy=w,w.src=h,w.listener=T,h.addEventListener)j||(q=se),q===void 0&&(q=!1),h.addEventListener(y.toString(),w,q);else if(h.attachEvent)h.attachEvent(Ti(y.toString()),w);else if(h.addListener&&h.removeListener)h.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return T}function La(){function h(T){return y.call(h.src,h.listener,T)}const y=nl;return h}function Ua(h,y,T,w,q){if(Array.isArray(y))for(var K=0;K<y.length;K++)Ua(h,y[K],T,w,q);else w=m(w)?!!w.capture:!!w,T=rl(T),h&&h[Lt]?(h=h.i,K=String(y).toString(),K in h.g&&(y=h.g[K],T=Ie(y,T,w,q),T>-1&&(ge(y[T]),Array.prototype.splice.call(y,T,1),y.length==0&&(delete h.g[K],h.h--)))):h&&(h=Hs(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Ie(y,T,w,q)),(T=h>-1?y[h]:null)&&ja(T))}function ja(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Lt])Se(y.i,h);else{var T=h.type,w=h.proxy;y.removeEventListener?y.removeEventListener(T,w,h.capture):y.detachEvent?y.detachEvent(Ti(T),w):y.addListener&&y.removeListener&&y.removeListener(w),(T=Hs(y))?(Se(T,h),T.h==0&&(T.src=null,y[je]=null)):ge(h)}}}function Ti(h){return h in Ut?Ut[h]:Ut[h]="on"+h}function nl(h,y){if(h.da)h=!0;else{y=new Ke(y,this);const T=h.listener,w=h.ha||h.src;h.fa&&ja(h),h=T.call(w,y)}return h}function Hs(h){return h=h[je],h instanceof ce?h:null}var il="__closure_events_fn_"+(Math.random()*1e9>>>0);function rl(h){return typeof h=="function"?h:(h[il]||(h[il]=function(y){return h.handleEvent(y)}),h[il])}function St(){U.call(this),this.i=new ce(this),this.M=this,this.G=null}b(St,U),St.prototype[Lt]=!0,St.prototype.removeEventListener=function(h,y,T,w){Ua(this,h,y,T,w)};function jt(h,y){var T,w=h.G;if(w)for(T=[];w;w=w.G)T.push(w);if(h=h.M,w=y.type||y,typeof y=="string")y=new V(y,h);else if(y instanceof V)y.target=y.target||h;else{var q=y;y=new V(w,h),le(y,q)}q=!0;let K,se;if(T)for(se=T.length-1;se>=0;se--)K=y.g=T[se],q=jr(K,w,!0,y)&&q;if(K=y.g=h,q=jr(K,w,!0,y)&&q,q=jr(K,w,!1,y)&&q,T)for(se=0;se<T.length;se++)K=y.g=T[se],q=jr(K,w,!1,y)&&q}St.prototype.N=function(){if(St.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const T=h.g[y];for(let w=0;w<T.length;w++)ge(T[w]);delete h.g[y],h.h--}}this.G=null},St.prototype.J=function(h,y,T,w){return this.i.add(String(h),y,!1,T,w)},St.prototype.K=function(h,y,T,w){return this.i.add(String(h),y,!0,T,w)};function jr(h,y,T,w){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let q=!0;for(let K=0;K<y.length;++K){const se=y[K];if(se&&!se.da&&se.capture==T){const Re=se.listener,Et=se.ha||se.src;se.fa&&Se(h.i,se),q=Re.call(Et,w)!==!1&&q}}return q&&!w.defaultPrevented}function Yf(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function Zu(h){h.g=Yf(()=>{h.g=null,h.i&&(h.i=!1,Zu(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class fn extends U{constructor(y,T){super(),this.m=y,this.l=T,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Zu(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fs(h){U.call(this),this.h=h,this.g={}}b(Fs,U);var sl=[];function al(h){Be(h.g,function(y,T){this.g.hasOwnProperty(T)&&ja(y)},h),h.g={}}Fs.prototype.N=function(){Fs.Z.N.call(this),al(this)},Fs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zr=c.JSON.stringify,$f=c.JSON.parse,ec=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function tc(){}function nc(){}var ei={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Yt(){V.call(this,"d")}b(Yt,V);function zn(){V.call(this,"c")}b(zn,V);var vt={},ic=null;function za(){return ic=ic||new St}vt.Ia="serverreachability";function rc(h){V.call(this,vt.Ia,h)}b(rc,V);function bi(h){const y=za();jt(y,new rc(y))}vt.STAT_EVENT="statevent";function Gs(h,y){V.call(this,vt.STAT_EVENT,h),this.stat=y}b(Gs,V);function wt(h){const y=za();jt(y,new Gs(y,h))}vt.Ja="timingevent";function Ai(h,y){V.call(this,vt.Ja,h),this.size=y}b(Ai,V);function Si(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function ti(){this.g=!0}ti.prototype.ua=function(){this.g=!1};function Xf(h,y,T,w,q,K){h.info(function(){if(h.g)if(K){var se="",Re=K.split("&");for(let Fe=0;Fe<Re.length;Fe++){var Et=Re[Fe].split("=");if(Et.length>1){const ct=Et[0];Et=Et[1];const Fn=ct.split("_");se=Fn.length>=2&&Fn[1]=="type"?se+(ct+"="+Et+"&"):se+(ct+"=redacted&")}}}else se=null;else se=K;return"XMLHTTP REQ ("+w+") [attempt "+q+"]: "+y+`
`+T+`
`+se})}function sc(h,y,T,w,q,K,se){h.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+q+"]: "+y+`
`+T+`
`+K+" "+se})}function wi(h,y,T,w){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Wf(h,T)+(w?" "+w:"")})}function Ks(h,y){h.info(function(){return"TIMEOUT: "+y})}ti.prototype.info=function(){};function Wf(h,y){if(!h.g)return y;if(!y)return null;try{const K=JSON.parse(y);if(K){for(h=0;h<K.length;h++)if(Array.isArray(K[h])){var T=K[h];if(!(T.length<2)){var w=T[1];if(Array.isArray(w)&&!(w.length<1)){var q=w[0];if(q!="noop"&&q!="stop"&&q!="close")for(let se=1;se<w.length;se++)w[se]=""}}}}return zr(K)}catch{return y}}var Qs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ol={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ll;function Ys(){}b(Ys,tc),Ys.prototype.g=function(){return new XMLHttpRequest},ll=new Ys;function rr(h){return encodeURIComponent(String(h))}function ac(h){var y=1;h=h.split(":");const T=[];for(;y>0&&h.length;)T.push(h.shift()),y--;return h.length&&T.push(h.join(":")),T}function ni(h,y,T,w){this.j=h,this.i=y,this.l=T,this.S=w||1,this.V=new Fs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ii}function ii(){this.i=null,this.g="",this.h=!1}var Rt={},qt={};function Ri(h,y,T){h.M=1,h.A=$s(It(y)),h.u=T,h.R=!0,Ba(h,null)}function Ba(h,y){h.F=Date.now(),Ci(h),h.B=It(h.A);var T=h.B,w=h.S;Array.isArray(w)||(w=[String(w)]),Ga(T.i,"t",w),h.C=0,T=h.j.L,h.h=new ii,h.g=Tc(h.j,T?y:null,!h.u),h.P>0&&(h.O=new fn(g(h.Y,h,h.g),h.P)),y=h.V,T=h.g,w=h.ba;var q="readystatechange";Array.isArray(q)||(q&&(sl[0]=q.toString()),q=sl);for(let K=0;K<q.length;K++){const se=ut(T,q[K],w||y.handleEvent,!1,y.h||y);if(!se)break;y.g[se.key]=se}y=h.J?P(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),bi(),Xf(h.i,h.v,h.B,h.l,h.S,h.u)}ni.prototype.ba=function(h){h=h.target;const y=this.O;y&&ai(h)==3?y.j():this.Y(h)},ni.prototype.Y=function(h){try{if(h==this.g)e:{const Re=ai(this.g),Et=this.g.ya(),Fe=this.g.ca();if(!(Re<3)&&(Re!=3||this.g&&(this.h.h||this.g.la()||$t(this.g)))){this.K||Re!=4||Et==7||(Et==8||Fe<=0?bi(3):bi(2)),Ii(this);var y=this.g.ca();this.X=y;var T=Jf(this);if(this.o=y==200,sc(this.i,this.v,this.B,this.l,this.S,Re,y),this.o){if(this.U&&!this.L){t:{if(this.g){var w,q=this.g;if((w=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(w)){var K=w;break t}}K=null}if(h=K)wi(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,xi(this,h);else{this.o=!1,this.m=3,wt(12),Cn(this),Bn(this);break e}}if(this.R){h=!0;let ct;for(;!this.K&&this.C<T.length;)if(ct=lc(this,T),ct==qt){Re==4&&(this.m=4,wt(14),h=!1),wi(this.i,this.l,null,"[Incomplete Response]");break}else if(ct==Rt){this.m=4,wt(15),wi(this.i,this.l,T,"[Invalid Chunk]"),h=!1;break}else wi(this.i,this.l,ct,null),xi(this,ct);if(oc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Re!=4||T.length!=0||this.h.h||(this.m=1,wt(16),h=!1),this.o=this.o&&h,!h)wi(this.i,this.l,T,"[Invalid Chunked Response]"),Cn(this),Bn(this);else if(T.length>0&&!this.W){this.W=!0;var se=this.j;se.g==this&&se.aa&&!se.P&&(se.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),Al(se),se.P=!0,wt(11))}}else wi(this.i,this.l,T,null),xi(this,T);Re==4&&Cn(this),this.o&&!this.K&&(Re==4?yc(this.j,this):(this.o=!1,Ci(this)))}else ar(this.g),y==400&&T.indexOf("Unknown SID")>0?(this.m=3,wt(12)):(this.m=0,wt(13)),Cn(this),Bn(this)}}}catch{}finally{}};function Jf(h){if(!oc(h))return h.g.la();const y=$t(h.g);if(y==="")return"";let T="";const w=y.length,q=ai(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Cn(h),Bn(h),"";h.h.i=new c.TextDecoder}for(let K=0;K<w;K++)h.h.h=!0,T+=h.h.i.decode(y[K],{stream:!(q&&K==w-1)});return y.length=0,h.h.g+=T,h.C=0,h.h.g}function oc(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function lc(h,y){var T=h.C,w=y.indexOf(`
`,T);return w==-1?qt:(T=Number(y.substring(T,w)),isNaN(T)?Rt:(w+=1,w+T>y.length?qt:(y=y.slice(w,w+T),h.C=w+T,y)))}ni.prototype.cancel=function(){this.K=!0,Cn(this)};function Ci(h){h.T=Date.now()+h.H,qa(h,h.H)}function qa(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Si(g(h.aa,h),y)}function Ii(h){h.D&&(c.clearTimeout(h.D),h.D=null)}ni.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Ks(this.i,this.B),this.M!=2&&(bi(),wt(17)),Cn(this),this.m=2,Bn(this)):qa(this,this.T-h)};function Bn(h){h.j.I==0||h.K||yc(h.j,h)}function Cn(h){Ii(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,al(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function xi(h,y){try{var T=h.j;if(T.I!=0&&(T.g==h||Ni(T.h,h))){if(!h.L&&Ni(T.h,h)&&T.I==3){try{var w=T.Ba.g.parse(y)}catch{w=null}if(Array.isArray(w)&&w.length==3){var q=w;if(q[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<h.F)Xa(T),Yr(T);else break e;na(T),wt(18)}}else T.xa=q[1],0<T.xa-T.K&&q[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=Si(g(T.Va,T),6e3));Di(T.h)<=1&&T.ta&&(T.ta=void 0)}else Li(T,11)}else if((h.L||T.g==h)&&Xa(T),!N(y))for(q=T.Ba.g.parse(y),y=0;y<q.length;y++){let Fe=q[y];const ct=Fe[0];if(!(ct<=T.K))if(T.K=ct,Fe=Fe[1],T.I==2)if(Fe[0]=="c"){T.M=Fe[1],T.ba=Fe[2];const Fn=Fe[3];Fn!=null&&(T.ka=Fn,T.j.info("VER="+T.ka));const Ui=Fe[4];Ui!=null&&(T.za=Ui,T.j.info("SVER="+T.za));const oi=Fe[5];oi!=null&&typeof oi=="number"&&oi>0&&(w=1.5*oi,T.O=w,T.j.info("backChannelRequestTimeoutMs_="+w)),w=T;const li=h.g;if(li){const ia=li.g?li.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ia){var K=w.h;K.g||ia.indexOf("spdy")==-1&&ia.indexOf("quic")==-1&&ia.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(hl(K,K.h),K.h=null))}if(w.G){const Wa=li.g?li.g.getResponseHeader("X-HTTP-Session-Id"):null;Wa&&(w.wa=Wa,Ye(w.J,w.G,Wa))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-h.F,T.j.info("Handshake RTT: "+T.T+"ms")),w=T;var se=h;if(w.na=Ec(w,w.L?w.ba:null,w.W),se.L){fl(w.h,se);var Re=se,Et=w.O;Et&&(Re.H=Et),Re.D&&(Ii(Re),Ci(Re)),w.g=se}else pc(w);T.i.length>0&&Pi(T)}else Fe[0]!="stop"&&Fe[0]!="close"||Li(T,7);else T.I==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?Li(T,7):Tl(T):Fe[0]!="noop"&&T.l&&T.l.qa(Fe),T.A=0)}}bi(4)}catch{}}var Ct=class{constructor(h,y){this.g=h,this.map=y}};function ul(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function cl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Di(h){return h.h?1:h.g?h.g.size:0}function Ni(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function hl(h,y){h.g?h.g.add(y):h.h=y}function fl(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}ul.prototype.cancel=function(){if(this.i=dl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function dl(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const T of h.g.values())y=y.concat(T.G);return y}return C(h.i)}var uc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ha(h,y){if(h){h=h.split("&");for(let T=0;T<h.length;T++){const w=h[T].indexOf("=");let q,K=null;w>=0?(q=h[T].substring(0,w),K=h[T].substring(w+1)):q=h[T],y(q,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function In(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof In?(this.l=h.l,Ht(this,h.j),this.o=h.o,this.g=h.g,Br(this,h.u),this.h=h.h,ml(this,dc(h.i)),this.m=h.m):h&&(y=String(h).match(uc))?(this.l=!1,Ht(this,y[1]||"",!0),this.o=Oi(y[2]||""),this.g=Oi(y[3]||"",!0),Br(this,y[4]),this.h=Oi(y[5]||"",!0),ml(this,y[6]||"",!0),this.m=Oi(y[7]||"")):(this.l=!1,this.i=new Hr(null,this.l))}In.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Xs(y,Fa,!0),":");var T=this.g;return(T||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Xs(y,Fa,!0),"@"),h.push(rr(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&h.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(Xs(T,T.charAt(0)=="/"?pl:cc,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",Xs(T,hc)),h.join("")},In.prototype.resolve=function(h){const y=It(this);let T=!!h.j;T?Ht(y,h.j):T=!!h.o,T?y.o=h.o:T=!!h.g,T?y.g=h.g:T=h.u!=null;var w=h.h;if(T)Br(y,h.u);else if(T=!!h.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var q=y.h.lastIndexOf("/");q!=-1&&(w=y.h.slice(0,q+1)+w)}if(q=w,q==".."||q==".")w="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){w=q.lastIndexOf("/",0)==0,q=q.split("/");const K=[];for(let se=0;se<q.length;){const Re=q[se++];Re=="."?w&&se==q.length&&K.push(""):Re==".."?((K.length>1||K.length==1&&K[0]!="")&&K.pop(),w&&se==q.length&&K.push("")):(K.push(Re),w=!0)}w=K.join("/")}else w=q}return T?y.h=w:T=h.i.toString()!=="",T?ml(y,dc(h.i)):T=!!h.m,T&&(y.m=h.m),y};function It(h){return new In(h)}function Ht(h,y,T){h.j=T?Oi(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Br(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function ml(h,y,T){y instanceof Hr?(h.i=y,Ka(h.i,h.l)):(T||(y=Xs(y,qr)),h.i=new Hr(y,h.l))}function Ye(h,y,T){h.i.set(y,T)}function $s(h){return Ye(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Oi(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Xs(h,y,T){return typeof h=="string"?(h=encodeURI(h).replace(y,_n),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function _n(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Fa=/[#\/\?@]/g,cc=/[#\?:]/g,pl=/[#\?]/g,qr=/[#\?@]/g,hc=/#/g;function Hr(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function vn(h){h.g||(h.g=new Map,h.h=0,h.i&&Ha(h.i,function(y,T){h.add(decodeURIComponent(y.replace(/\+/g," ")),T)}))}i=Hr.prototype,i.add=function(h,y){vn(this),this.i=null,h=Fr(this,h);let T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(y),this.h+=1,this};function fc(h,y){vn(h),y=Fr(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function gl(h,y){return vn(h),y=Fr(h,y),h.g.has(y)}i.forEach=function(h,y){vn(this),this.g.forEach(function(T,w){T.forEach(function(q){h.call(y,q,w,this)},this)},this)};function yl(h,y){vn(h);let T=[];if(typeof y=="string")gl(h,y)&&(T=T.concat(h.g.get(Fr(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)T=T.concat(h[y]);return T}i.set=function(h,y){return vn(this),this.i=null,h=Fr(this,h),gl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},i.get=function(h,y){return h?(h=yl(this,h),h.length>0?String(h[0]):y):y};function Ga(h,y,T){fc(h,y),T.length>0&&(h.i=null,h.g.set(Fr(h,y),C(T)),h.h+=T.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let w=0;w<y.length;w++){var T=y[w];const q=rr(T);T=yl(this,T);for(let K=0;K<T.length;K++){let se=q;T[K]!==""&&(se+="="+rr(T[K])),h.push(se)}}return this.i=h.join("&")};function dc(h){const y=new Hr;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Fr(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Ka(h,y){y&&!h.j&&(vn(h),h.i=null,h.g.forEach(function(T,w){const q=w.toLowerCase();w!=q&&(fc(this,w),Ga(this,q,T))},h)),h.j=y}function ri(h,y){const T=new ti;if(c.Image){const w=new Image;w.onload=v(qn,T,"TestLoadImage: loaded",!0,y,w),w.onerror=v(qn,T,"TestLoadImage: error",!1,y,w),w.onabort=v(qn,T,"TestLoadImage: abort",!1,y,w),w.ontimeout=v(qn,T,"TestLoadImage: timeout",!1,y,w),c.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=h}else y(!1)}function _l(h,y){const T=new ti,w=new AbortController,q=setTimeout(()=>{w.abort(),qn(T,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:w.signal}).then(K=>{clearTimeout(q),K.ok?qn(T,"TestPingServer: ok",!0,y):qn(T,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(q),qn(T,"TestPingServer: error",!1,y)})}function qn(h,y,T,w,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),w(T)}catch{}}function Gr(){this.g=new ec}function Mi(h){this.i=h.Sb||null,this.h=h.ab||!1}b(Mi,tc),Mi.prototype.g=function(){return new Ws(this.i,this.h)};function Ws(h,y){St.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(Ws,St),i=Ws.prototype,i.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,si(this)},i.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Kr(this)),this.readyState=0},i.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,si(this)),this.g&&(this.readyState=3,si(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Qa(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Qa(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}i.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Kr(this):si(this),this.readyState==3&&Qa(this)}},i.Oa=function(h){this.g&&(this.response=this.responseText=h,Kr(this))},i.Na=function(h){this.g&&(this.response=h,Kr(this))},i.ga=function(){this.g&&Kr(this)};function Kr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,si(h)}i.setRequestHeader=function(h,y){this.A.append(h,y)},i.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var T=y.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=y.next();return h.join(`\r
`)};function si(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ws.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Hn(h){let y="";return Be(h,function(T,w){y+=w,y+=":",y+=T,y+=`\r
`}),y}function Js(h,y,T){e:{for(w in T){var w=!1;break e}w=!0}w||(T=Hn(T),typeof h=="string"?T!=null&&rr(T):Ye(h,y,T))}function Je(h){St.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(Je,St);var Vi=/^https?$/i,vl=["POST","PUT"];i=Je.prototype,i.Fa=function(h){this.H=h},i.ea=function(h,y,T,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ll.g(),this.g.onreadystatechange=A(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(K){Zs(this,K);return}if(h=T||"",T=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var q in w)T.set(q,w[q]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const K of w.keys())T.set(K,w.get(K));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(T.keys()).find(K=>K.toLowerCase()=="content-type"),q=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(vl,y,void 0)>=0)||w||q||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,se]of T)this.g.setRequestHeader(K,se);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(K){Zs(this,K)}};function Zs(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,El(h),sr(h)}function El(h){h.A||(h.A=!0,jt(h,"complete"),jt(h,"error"))}i.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,jt(this,"complete"),jt(this,"abort"),sr(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),sr(this,!0)),Je.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?ea(this):this.Xa())},i.Xa=function(){ea(this)};function ea(h){if(h.h&&typeof u<"u"){if(h.v&&ai(h)==4)setTimeout(h.Ca.bind(h),0);else if(jt(h,"readystatechange"),ai(h)==4){h.h=!1;try{const K=h.ca();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var T;if(!(T=y)){var w;if(w=K===0){let se=String(h.D).match(uc)[1]||null;!se&&c.self&&c.self.location&&(se=c.self.location.protocol.slice(0,-1)),w=!Vi.test(se?se.toLowerCase():"")}T=w}if(T)jt(h,"complete"),jt(h,"success");else{h.o=6;try{var q=ai(h)>2?h.g.statusText:""}catch{q=""}h.l=q+" ["+h.ca()+"]",El(h)}}finally{sr(h)}}}}function sr(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const T=h.g;h.g=null,y||jt(h,"ready");try{T.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function ai(h){return h.g?h.g.readyState:0}i.ca=function(){try{return ai(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),$f(y)}};function $t(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ar(h){const y={};h=(h.g&&ai(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<h.length;w++){if(N(h[w]))continue;var T=ac(h[w]);const q=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const K=y[q]||[];y[q]=K,K.push(T)}Qe(y,function(w){return w.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ki(h,y,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||y}function Qr(h){this.za=0,this.i=[],this.j=new ti,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ki("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ki("baseRetryDelayMs",5e3,h),this.Za=ki("retryDelaySeedMs",1e4,h),this.Ta=ki("forwardChannelMaxRetries",2,h),this.va=ki("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new ul(h&&h.concurrentRequestLimit),this.Ba=new Gr,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=Qr.prototype,i.ka=8,i.I=1,i.connect=function(h,y,T,w){wt(0),this.W=h,this.H=y||{},T&&w!==void 0&&(this.H.OSID=T,this.H.OAID=w),this.F=this.X,this.J=Ec(this,null,this.W),Pi(this)};function Tl(h){if(Ya(h),h.I==3){var y=h.V++,T=It(h.J);if(Ye(T,"SID",h.M),Ye(T,"RID",y),Ye(T,"TYPE","terminate"),ta(h,T),y=new ni(h,h.j,y),y.M=2,y.A=$s(It(T)),T=!1,c.navigator&&c.navigator.sendBeacon)try{T=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!T&&c.Image&&(new Image().src=y.A,T=!0),T||(y.g=Tc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Ci(y)}vc(h)}function Yr(h){h.g&&(Al(h),h.g.cancel(),h.g=null)}function Ya(h){Yr(h),h.v&&(c.clearTimeout(h.v),h.v=null),Xa(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Pi(h){if(!cl(h.h)&&!h.m){h.m=!0;var y=h.Ea;Ee||R(),ae||(Ee(),ae=!0),I.add(y,h),h.D=0}}function $a(h,y){return Di(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Si(g(h.Ea,h,y),_c(h,h.D)),h.D++,!0)}i.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const q=new ni(this,this.j,h);let K=this.o;if(this.U&&(K?(K=P(K),le(K,this.U)):K=this.U),this.u!==null||this.R||(q.J=K,K=null),this.S)e:{for(var y=0,T=0;T<this.i.length;T++){t:{var w=this.i[T];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(y+=w,y>4096){y=T;break e}if(y===4096||T===this.i.length-1){y=T+1;break e}}y=1e3}else y=1e3;y=mc(this,q,y),T=It(this.J),Ye(T,"RID",h),Ye(T,"CVER",22),this.G&&Ye(T,"X-HTTP-Session-Id",this.G),ta(this,T),K&&(this.R?y="headers="+rr(Hn(K))+"&"+y:this.u&&Js(T,this.u,K)),hl(this.h,q),this.Ra&&Ye(T,"TYPE","init"),this.S?(Ye(T,"$req",y),Ye(T,"SID","null"),q.U=!0,Ri(q,T,null)):Ri(q,T,y),this.I=2}}else this.I==3&&(h?bl(this,h):this.i.length==0||cl(this.h)||bl(this))};function bl(h,y){var T;y?T=y.l:T=h.V++;const w=It(h.J);Ye(w,"SID",h.M),Ye(w,"RID",T),Ye(w,"AID",h.K),ta(h,w),h.u&&h.o&&Js(w,h.u,h.o),T=new ni(h,h.j,T,h.D+1),h.u===null&&(T.J=h.o),y&&(h.i=y.G.concat(h.i)),y=mc(h,T,1e3),T.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),hl(h.h,T),Ri(T,w,y)}function ta(h,y){h.H&&Be(h.H,function(T,w){Ye(y,w,T)}),h.l&&Be({},function(T,w){Ye(y,w,T)})}function mc(h,y,T){T=Math.min(h.i.length,T);const w=h.l?g(h.l.Ka,h.l,h):null;e:{var q=h.i;let Re=-1;for(;;){const Et=["count="+T];Re==-1?T>0?(Re=q[0].g,Et.push("ofs="+Re)):Re=0:Et.push("ofs="+Re);let Fe=!0;for(let ct=0;ct<T;ct++){var K=q[ct].g;const Fn=q[ct].map;if(K-=Re,K<0)Re=Math.max(0,q[ct].g-100),Fe=!1;else try{K="req"+K+"_"||"";try{var se=Fn instanceof Map?Fn:Object.entries(Fn);for(const[Ui,oi]of se){let li=oi;m(oi)&&(li=zr(oi)),Et.push(K+Ui+"="+encodeURIComponent(li))}}catch(Ui){throw Et.push(K+"type="+encodeURIComponent("_badmap")),Ui}}catch{w&&w(Fn)}}if(Fe){se=Et.join("&");break e}}se=void 0}return h=h.i.splice(0,T),y.G=h,se}function pc(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;Ee||R(),ae||(Ee(),ae=!0),I.add(y,h),h.A=0}}function na(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Si(g(h.Da,h),_c(h,h.A)),h.A++,!0)}i.Da=function(){if(this.v=null,gc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Si(g(this.Wa,this),h)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,wt(10),Yr(this),gc(this))};function Al(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function gc(h){h.g=new ni(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=It(h.na);Ye(y,"RID","rpc"),Ye(y,"SID",h.M),Ye(y,"AID",h.K),Ye(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Ye(y,"TO",h.ia),Ye(y,"TYPE","xmlhttp"),ta(h,y),h.u&&h.o&&Js(y,h.u,h.o),h.O&&(h.g.H=h.O);var T=h.g;h=h.ba,T.M=1,T.A=$s(It(y)),T.u=null,T.R=!0,Ba(T,h)}i.Va=function(){this.C!=null&&(this.C=null,Yr(this),na(this),wt(19))};function Xa(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function yc(h,y){var T=null;if(h.g==y){Xa(h),Al(h),h.g=null;var w=2}else if(Ni(h.h,y))T=y.G,fl(h.h,y),w=1;else return;if(h.I!=0){if(y.o)if(w==1){T=y.u?y.u.length:0,y=Date.now()-y.F;var q=h.D;w=za(),jt(w,new Ai(w,T)),Pi(h)}else pc(h);else if(q=y.m,q==3||q==0&&y.X>0||!(w==1&&$a(h,y)||w==2&&na(h)))switch(T&&T.length>0&&(y=h.h,y.i=y.i.concat(T)),q){case 1:Li(h,5);break;case 4:Li(h,10);break;case 3:Li(h,6);break;default:Li(h,2)}}}function _c(h,y){let T=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(T*=2),T*y}function Li(h,y){if(h.j.info("Error code "+y),y==2){var T=g(h.bb,h),w=h.Ua;const q=!w;w=new In(w||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ht(w,"https"),$s(w),q?ri(w.toString(),T):_l(w.toString(),T)}else wt(2);h.I=0,h.l&&h.l.pa(y),vc(h),Ya(h)}i.bb=function(h){h?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function vc(h){if(h.I=0,h.ja=[],h.l){const y=dl(h.h);(y.length!=0||h.i.length!=0)&&(D(h.ja,y),D(h.ja,h.i),h.h.i.length=0,C(h.i),h.i.length=0),h.l.oa()}}function Ec(h,y,T){var w=T instanceof In?It(T):new In(T);if(w.g!="")y&&(w.g=y+"."+w.g),Br(w,w.u);else{var q=c.location;w=q.protocol,y=y?y+"."+q.hostname:q.hostname,q=+q.port;const K=new In(null);w&&Ht(K,w),y&&(K.g=y),q&&Br(K,q),T&&(K.h=T),w=K}return T=h.G,y=h.wa,T&&y&&Ye(w,T,y),Ye(w,"VER",h.ka),ta(h,w),w}function Tc(h,y,T){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new Je(new Mi({ab:T})):new Je(h.ma),y.Fa(h.L),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function bc(){}i=bc.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function $r(){}$r.prototype.g=function(h,y){return new dn(h,y)};function dn(h,y){St.call(this),this.g=new Qr(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!N(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!N(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new or(this)}b(dn,St),dn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){Tl(this.g)},dn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.v&&(T={},T.__data__=zr(h),h=T);y.i.push(new Ct(y.Ya++,h)),y.I==3&&Pi(y)},dn.prototype.N=function(){this.g.l=null,delete this.j,Tl(this.g),delete this.g,dn.Z.N.call(this)};function Ac(h){Yt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const T in y){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}b(Ac,Yt);function Sc(){zn.call(this),this.status=1}b(Sc,zn);function or(h){this.g=h}b(or,bc),or.prototype.ra=function(){jt(this.g,"a")},or.prototype.qa=function(h){jt(this.g,new Ac(h))},or.prototype.pa=function(h){jt(this.g,new Sc)},or.prototype.oa=function(){jt(this.g,"b")},$r.prototype.createWebChannel=$r.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,qb=function(){return new $r},Bb=function(){return za()},zb=vt,Ip={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Qs.NO_ERROR=0,Qs.TIMEOUT=8,Qs.HTTP_ERROR=6,Hh=Qs,ol.COMPLETE="complete",jb=ol,nc.EventType=ei,ei.OPEN="a",ei.CLOSE="b",ei.ERROR="c",ei.MESSAGE="d",St.prototype.listen=St.prototype.J,fu=nc,Je.prototype.listenOnce=Je.prototype.K,Je.prototype.getLastError=Je.prototype.Ha,Je.prototype.getLastErrorCode=Je.prototype.ya,Je.prototype.getStatus=Je.prototype.ca,Je.prototype.getResponseJson=Je.prototype.La,Je.prototype.getResponseText=Je.prototype.la,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Fa,Ub=Je}).apply(typeof Dh<"u"?Dh:typeof self<"u"?self:typeof window<"u"?window:{});const AT="@firebase/firestore",ST="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da=new ng("@firebase/firestore");function Io(){return Da.logLevel}function ue(i,...e){if(Da.logLevel<=Ve.DEBUG){const n=e.map(pg);Da.debug(`Firestore (${Xo}): ${i}`,...n)}}function Mr(i,...e){if(Da.logLevel<=Ve.ERROR){const n=e.map(pg);Da.error(`Firestore (${Xo}): ${i}`,...n)}}function Uo(i,...e){if(Da.logLevel<=Ve.WARN){const n=e.map(pg);Da.warn(`Firestore (${Xo}): ${i}`,...n)}}function pg(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ye(i,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,Hb(i,s,n)}function Hb(i,e,n){let s=`FIRESTORE (${Xo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Mr(s),new Error(s)}function Ue(i,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,i||Hb(e,o,s)}function Ae(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends nr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class F2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(un.UNAUTHENTICATED)))}shutdown(){}}class G2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class K2{constructor(e){this.t=e,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ue(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let u=new pi;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new pi,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const p=u;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},m=p=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>m(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new pi)}}),0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ue(typeof s.accessToken=="string",31837,{l:s}),new Fb(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ue(e===null||typeof e=="string",2055,{h:e}),new un(e)}}class Q2{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=un.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Y2{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new Q2(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(un.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class wT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $2{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Rn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ue(this.o===void 0,3512);const s=u=>{u.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.m;return this.m=u.token,ue("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new wT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ue(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new wT(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X2(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=X2(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function ke(i,e){return i<e?-1:i>e?1:0}function xp(i,e){const n=Math.min(i.length,e.length);for(let s=0;s<n;s++){const o=i.charAt(s),u=e.charAt(s);if(o!==u)return op(o)===op(u)?ke(o,u):op(o)?1:-1}return ke(i.length,e.length)}const W2=55296,J2=57343;function op(i){const e=i.charCodeAt(0);return e>=W2&&e<=J2}function jo(i,e,n){return i.length===e.length&&i.every(((s,o)=>n(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT="__name__";class Fi{constructor(e,n,s){n===void 0?n=0:n>e.length&&ye(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&ye(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Fi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Fi?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=Fi.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return ke(e.length,n.length)}static compareSegments(e,n){const s=Fi.isNumericId(e),o=Fi.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?Fi.extractNumericId(e).compare(Fi.extractNumericId(n)):xp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Cs.fromString(e.substring(4,e.length-2))}}class We extends Fi{construct(e,n,s){return new We(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new re(X.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new We(n)}static emptyPath(){return new We([])}}const Z2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rn extends Fi{construct(e,n,s){return new rn(e,n,s)}static isValidIdentifier(e){return Z2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===RT}static keyField(){return new rn([RT])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new re(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let c=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new re(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new re(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else m==="`"?(c=!c,o++):m!=="."||c?(s+=m,o++):(u(),o++)}if(u(),c)throw new re(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rn(n)}static emptyPath(){return new rn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.path=e}static fromPath(e){return new me(We.fromString(e))}static fromName(e){return new me(We.fromString(e).popFirst(5))}static empty(){return new me(We.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&We.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return We.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new We(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(i,e,n){if(!n)throw new re(X.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function eD(i,e,n,s){if(e===!0&&s===!0)throw new re(X.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function CT(i){if(!me.isDocumentKey(i))throw new re(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function IT(i){if(me.isDocumentKey(i))throw new re(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Kb(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Rf(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":ye(12329,{type:typeof i})}function cn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new re(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Rf(i);throw new re(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(i,e){const n={typeString:i};return e&&(n.value=e),n}function Fu(i,e){if(!Kb(i))throw new re(X.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){n=`JSON missing required field: '${s}'`;break}const c=i[s];if(o&&typeof c!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&c!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new re(X.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT=-62135596800,DT=1e6;class lt{static now(){return lt.fromMillis(Date.now())}static fromDate(e){return lt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*DT);return new lt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new re(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new re(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<xT)throw new re(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/DT}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:lt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Fu(e,lt._jsonSchema))return new lt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-xT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}lt._jsonSchemaVersion="firestore/timestamp/1.0",lt._jsonSchema={type:Pt("string",lt._jsonSchemaVersion),seconds:Pt("number"),nanoseconds:Pt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new lt(0,0))}static max(){return new Te(new lt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cu=-1;function tD(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=Te.fromTimestamp(s===1e9?new lt(n+1,0):new lt(n,s));return new Ns(o,me.empty(),e)}function nD(i){return new Ns(i.readTime,i.key,Cu)}class Ns{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Ns(Te.min(),me.empty(),Cu)}static max(){return new Ns(Te.max(),me.empty(),Cu)}}function iD(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=me.comparator(i.documentKey,e.documentKey),n!==0?n:ke(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wo(i){if(i.code!==X.FAILED_PRECONDITION||i.message!==rD)throw i;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ye(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ne(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ne?n:ne.resolve(n)}catch(n){return ne.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ne.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ne.reject(n)}static resolve(e){return new ne(((n,s)=>{n(e)}))}static reject(e){return new ne(((n,s)=>{s(e)}))}static waitFor(e){return new ne(((n,s)=>{let o=0,u=0,c=!1;e.forEach((m=>{++o,m.next((()=>{++u,c&&u===o&&n()}),(p=>s(p)))})),c=!0,u===o&&n()}))}static or(e){let n=ne.resolve(!1);for(const s of e)n=n.next((o=>o?ne.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,u)=>{s.push(n.call(this,o,u))})),this.waitFor(s)}static mapArray(e,n){return new ne(((s,o)=>{const u=e.length,c=new Array(u);let m=0;for(let p=0;p<u;p++){const g=p;n(e[g]).next((v=>{c[g]=v,++m,m===u&&s(c)}),(v=>o(v)))}}))}static doWhile(e,n){return new ne(((s,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):s()};u()}))}}function aD(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Jo(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Cf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg=-1;function Gu(i){return i==null}function af(i){return i===0&&1/i==-1/0}function oD(i){return typeof i=="number"&&Number.isInteger(i)&&!af(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb="";function lD(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=NT(e)),e=uD(i.get(n),e);return NT(e)}function uD(i,e){let n=e;const s=i.length;for(let o=0;o<s;o++){const u=i.charAt(o);switch(u){case"\0":n+="";break;case Qb:n+="";break;default:n+=u}}return n}function NT(i){return i+Qb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function js(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function cD(i,e){const n=[];for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&n.push(e(i[s],s,i));return n}function Yb(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,n){this.comparator=e,this.root=n||nn.EMPTY}insert(e,n){return new mt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,nn.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Nh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Nh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Nh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Nh(this.root,e,this.comparator,!0)}}class Nh{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nn{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??nn.RED,this.left=o??nn.EMPTY,this.right=u??nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new nn(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return nn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return nn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ye(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ye(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ye(27949);return e+(this.isRed()?0:1)}}nn.EMPTY=null,nn.RED=!0,nn.BLACK=!1;nn.EMPTY=new class{constructor(){this.size=0}get key(){throw ye(57766)}get value(){throw ye(16141)}get color(){throw ye(16727)}get left(){throw ye(29726)}get right(){throw ye(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new nn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new MT(this.data.getIterator())}getIteratorFrom(e){return new MT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Bt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Bt(this.comparator);return n.data=e,n}}class MT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.fields=e,e.sort(rn.comparator)}static empty(){return new Ln([])}unionWith(e){let n=new Bt(rn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Ln(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return jo(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new $b("Invalid base64 string: "+u):u}})(e);return new an(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let c=0;c<o.length;++c)u+=String.fromCharCode(o[c]);return u})(e);return new an(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}an.EMPTY_BYTE_STRING=new an("");const hD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Os(i){if(Ue(!!i,39018),typeof i=="string"){let e=0;const n=hD.exec(i);if(Ue(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:At(i.seconds),nanos:At(i.nanos)}}function At(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Ms(i){return typeof i=="string"?an.fromBase64String(i):an.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb="server_timestamp",Wb="__type__",Jb="__previous_value__",Zb="__local_write_time__";function If(i){return(i?.mapValue?.fields||{})[Wb]?.stringValue===Xb}function xf(i){const e=i.mapValue.fields[Jb];return If(e)?xf(e):e}function Iu(i){const e=Os(i.mapValue.fields[Zb].timestampValue);return new lt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e,n,s,o,u,c,m,p,g,v){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=v}}const of="(default)";class xu{constructor(e,n){this.projectId=e,this.database=n||of}static empty(){return new xu("","")}get isDefaultDatabase(){return this.database===of}isEqual(e){return e instanceof xu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA="__type__",dD="__max__",Oh={mapValue:{}},tA="__vector__",lf="value";function Vs(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?If(i)?4:pD(i)?9007199254740991:mD(i)?10:11:ye(28295,{value:i})}function er(i,e){if(i===e)return!0;const n=Vs(i);if(n!==Vs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Iu(i).isEqual(Iu(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const c=Os(o.timestampValue),m=Os(u.timestampValue);return c.seconds===m.seconds&&c.nanos===m.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,u){return Ms(o.bytesValue).isEqual(Ms(u.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,u){return At(o.geoPointValue.latitude)===At(u.geoPointValue.latitude)&&At(o.geoPointValue.longitude)===At(u.geoPointValue.longitude)})(i,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return At(o.integerValue)===At(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const c=At(o.doubleValue),m=At(u.doubleValue);return c===m?af(c)===af(m):isNaN(c)&&isNaN(m)}return!1})(i,e);case 9:return jo(i.arrayValue.values||[],e.arrayValue.values||[],er);case 10:case 11:return(function(o,u){const c=o.mapValue.fields||{},m=u.mapValue.fields||{};if(OT(c)!==OT(m))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(m[p]===void 0||!er(c[p],m[p])))return!1;return!0})(i,e);default:return ye(52216,{left:i})}}function Du(i,e){return(i.values||[]).find((n=>er(n,e)))!==void 0}function zo(i,e){if(i===e)return 0;const n=Vs(i),s=Vs(e);if(n!==s)return ke(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return ke(i.booleanValue,e.booleanValue);case 2:return(function(u,c){const m=At(u.integerValue||u.doubleValue),p=At(c.integerValue||c.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1})(i,e);case 3:return VT(i.timestampValue,e.timestampValue);case 4:return VT(Iu(i),Iu(e));case 5:return xp(i.stringValue,e.stringValue);case 6:return(function(u,c){const m=Ms(u),p=Ms(c);return m.compareTo(p)})(i.bytesValue,e.bytesValue);case 7:return(function(u,c){const m=u.split("/"),p=c.split("/");for(let g=0;g<m.length&&g<p.length;g++){const v=ke(m[g],p[g]);if(v!==0)return v}return ke(m.length,p.length)})(i.referenceValue,e.referenceValue);case 8:return(function(u,c){const m=ke(At(u.latitude),At(c.latitude));return m!==0?m:ke(At(u.longitude),At(c.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return kT(i.arrayValue,e.arrayValue);case 10:return(function(u,c){const m=u.fields||{},p=c.fields||{},g=m[lf]?.arrayValue,v=p[lf]?.arrayValue,b=ke(g?.values?.length||0,v?.values?.length||0);return b!==0?b:kT(g,v)})(i.mapValue,e.mapValue);case 11:return(function(u,c){if(u===Oh.mapValue&&c===Oh.mapValue)return 0;if(u===Oh.mapValue)return 1;if(c===Oh.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),g=c.fields||{},v=Object.keys(g);p.sort(),v.sort();for(let b=0;b<p.length&&b<v.length;++b){const A=xp(p[b],v[b]);if(A!==0)return A;const C=zo(m[p[b]],g[v[b]]);if(C!==0)return C}return ke(p.length,v.length)})(i.mapValue,e.mapValue);default:throw ye(23264,{he:n})}}function VT(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return ke(i,e);const n=Os(i),s=Os(e),o=ke(n.seconds,s.seconds);return o!==0?o:ke(n.nanos,s.nanos)}function kT(i,e){const n=i.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=zo(n[o],s[o]);if(u)return u}return ke(n.length,s.length)}function Bo(i){return Dp(i)}function Dp(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const s=Os(n);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return Ms(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return me.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=Dp(u);return s+"]"})(i.arrayValue):"mapValue"in i?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const c of s)u?u=!1:o+=",",o+=`${c}:${Dp(n.fields[c])}`;return o+"}"})(i.mapValue):ye(61005,{value:i})}function Fh(i){switch(Vs(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=xf(i);return e?16+Fh(e):16;case 5:return 2*i.stringValue.length;case 6:return Ms(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+Fh(u)),0)})(i.arrayValue);case 10:case 11:return(function(s){let o=0;return js(s.fields,((u,c)=>{o+=u.length+Fh(c)})),o})(i.mapValue);default:throw ye(13486,{value:i})}}function uf(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Np(i){return!!i&&"integerValue"in i}function _g(i){return!!i&&"arrayValue"in i}function PT(i){return!!i&&"nullValue"in i}function LT(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Gh(i){return!!i&&"mapValue"in i}function mD(i){return(i?.mapValue?.fields||{})[eA]?.stringValue===tA}function _u(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return js(i.mapValue.fields,((n,s)=>e.mapValue.fields[n]=_u(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=_u(i.arrayValue.values[n]);return e}return{...i}}function pD(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===dD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.value=e}static empty(){return new gn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Gh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=_u(n)}setAll(e){let n=rn.emptyPath(),s={},o=[];e.forEach(((c,m)=>{if(!n.isImmediateParentOf(m)){const p=this.getFieldsMap(n);this.applyChanges(p,s,o),s={},o=[],n=m.popLast()}c?s[m.lastSegment()]=_u(c):o.push(m.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());Gh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return er(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];Gh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){js(n,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new gn(_u(this.value))}}function nA(i){const e=[];return js(i.fields,((n,s)=>{const o=new rn([n]);if(Gh(s)){const u=nA(s.mapValue).fields;if(u.length===0)e.push(o);else for(const c of u)e.push(o.child(c))}else e.push(o)})),new Ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,n,s,o,u,c,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=c,this.documentState=m}static newInvalidDocument(e){return new Qt(e,0,Te.min(),Te.min(),Te.min(),gn.empty(),0)}static newFoundDocument(e,n,s,o){return new Qt(e,1,n,Te.min(),s,o,0)}static newNoDocument(e,n){return new Qt(e,2,n,Te.min(),Te.min(),gn.empty(),0)}static newUnknownDocument(e,n){return new Qt(e,3,n,Te.min(),Te.min(),gn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Qt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e,n){this.position=e,this.inclusive=n}}function UT(i,e,n){let s=0;for(let o=0;o<i.position.length;o++){const u=e[o],c=i.position[o];if(u.field.isKeyField()?s=me.comparator(me.fromName(c.referenceValue),n.key):s=zo(c,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function jT(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!er(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e,n="asc"){this.field=e,this.dir=n}}function gD(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{}class kt extends iA{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new _D(e,n,s):n==="array-contains"?new TD(e,s):n==="in"?new bD(e,s):n==="not-in"?new AD(e,s):n==="array-contains-any"?new SD(e,s):new kt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new vD(e,s):new ED(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(zo(n,this.value)):n!==null&&Vs(this.value)===Vs(n)&&this.matchesComparison(zo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ye(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _i extends iA{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new _i(e,n)}matches(e){return rA(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function rA(i){return i.op==="and"}function sA(i){return yD(i)&&rA(i)}function yD(i){for(const e of i.filters)if(e instanceof _i)return!1;return!0}function Op(i){if(i instanceof kt)return i.field.canonicalString()+i.op.toString()+Bo(i.value);if(sA(i))return i.filters.map((e=>Op(e))).join(",");{const e=i.filters.map((n=>Op(n))).join(",");return`${i.op}(${e})`}}function aA(i,e){return i instanceof kt?(function(s,o){return o instanceof kt&&s.op===o.op&&s.field.isEqual(o.field)&&er(s.value,o.value)})(i,e):i instanceof _i?(function(s,o){return o instanceof _i&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,c,m)=>u&&aA(c,o.filters[m])),!0):!1})(i,e):void ye(19439)}function oA(i){return i instanceof kt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Bo(n.value)}`})(i):i instanceof _i?(function(n){return n.op.toString()+" {"+n.getFilters().map(oA).join(" ,")+"}"})(i):"Filter"}class _D extends kt{constructor(e,n,s){super(e,n,s),this.key=me.fromName(s.referenceValue)}matches(e){const n=me.comparator(e.key,this.key);return this.matchesComparison(n)}}class vD extends kt{constructor(e,n){super(e,"in",n),this.keys=lA("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class ED extends kt{constructor(e,n){super(e,"not-in",n),this.keys=lA("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function lA(i,e){return(e.arrayValue?.values||[]).map((n=>me.fromName(n.referenceValue)))}class TD extends kt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return _g(n)&&Du(n.arrayValue,this.value)}}class bD extends kt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Du(this.value.arrayValue,n)}}class AD extends kt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Du(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Du(this.value.arrayValue,n)}}class SD extends kt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!_g(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Du(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e,n=null,s=[],o=[],u=null,c=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=c,this.endAt=m,this.Te=null}}function zT(i,e=null,n=[],s=[],o=null,u=null,c=null){return new wD(i,e,n,s,o,u,c)}function vg(i){const e=Ae(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>Op(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),Gu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>Bo(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>Bo(s))).join(",")),e.Te=n}return e.Te}function Eg(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!gD(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!aA(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!jT(i.startAt,e.startAt)&&jT(i.endAt,e.endAt)}function Mp(i){return me.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e,n=null,s=[],o=[],u=null,c="F",m=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=c,this.startAt=m,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function RD(i,e,n,s,o,u,c,m){return new Va(i,e,n,s,o,u,c,m)}function Df(i){return new Va(i)}function BT(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function Tg(i){return i.collectionGroup!==null}function Po(i){const e=Ae(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let m=new Bt(rn.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(m=m.add(g.field))}))})),m})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Nu(u,s))})),n.has(rn.keyField().canonicalString())||e.Ie.push(new Nu(rn.keyField(),s))}return e.Ie}function $i(i){const e=Ae(i);return e.Ee||(e.Ee=uA(e,Po(i))),e.Ee}function CD(i){const e=Ae(i);return e.de||(e.de=uA(e,i.explicitOrderBy)),e.de}function uA(i,e){if(i.limitType==="F")return zT(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Nu(o.field,u)}));const n=i.endAt?new qo(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new qo(i.startAt.position,i.startAt.inclusive):null;return zT(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function Vp(i,e){const n=i.filters.concat([e]);return new Va(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function cf(i,e,n){return new Va(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Nf(i,e){return Eg($i(i),$i(e))&&i.limitType===e.limitType}function cA(i){return`${vg($i(i))}|lt:${i.limitType}`}function xo(i){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>oA(o))).join(", ")}]`),Gu(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>Bo(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>Bo(o))).join(",")),`Target(${s})`})($i(i))}; limitType=${i.limitType})`}function Of(i,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):me.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(i,e)&&(function(s,o){for(const u of Po(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(i,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(i,e)&&(function(s,o){return!(s.startAt&&!(function(c,m,p){const g=UT(c,m,p);return c.inclusive?g<=0:g<0})(s.startAt,Po(s),o)||s.endAt&&!(function(c,m,p){const g=UT(c,m,p);return c.inclusive?g>=0:g>0})(s.endAt,Po(s),o))})(i,e)}function ID(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function hA(i){return(e,n)=>{let s=!1;for(const o of Po(i)){const u=xD(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function xD(i,e,n){const s=i.field.isKeyField()?me.comparator(e.key,n.key):(function(u,c,m){const p=c.data.field(u),g=m.data.field(u);return p!==null&&g!==null?zo(p,g):ye(42886)})(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return ye(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){js(this.inner,((n,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return Yb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DD=new mt(me.comparator);function Vr(){return DD}const fA=new mt(me.comparator);function du(...i){let e=fA;for(const n of i)e=e.insert(n.key,n);return e}function dA(i){let e=fA;return i.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function ba(){return vu()}function mA(){return vu()}function vu(){return new ka((i=>i.toString()),((i,e)=>i.isEqual(e)))}const ND=new mt(me.comparator),OD=new Bt(me.comparator);function Pe(...i){let e=OD;for(const n of i)e=e.add(n);return e}const MD=new Bt(ke);function VD(){return MD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:af(e)?"-0":e}}function pA(i){return{integerValue:""+i}}function kD(i,e){return oD(e)?pA(e):bg(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(){this._=void 0}}function PD(i,e,n){return i instanceof Ou?(function(o,u){const c={fields:{[Wb]:{stringValue:Xb},[Zb]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&If(u)&&(u=xf(u)),u&&(c.fields[Jb]=u),{mapValue:c}})(n,e):i instanceof Mu?yA(i,e):i instanceof Vu?_A(i,e):(function(o,u){const c=gA(o,u),m=qT(c)+qT(o.Ae);return Np(c)&&Np(o.Ae)?pA(m):bg(o.serializer,m)})(i,e)}function LD(i,e,n){return i instanceof Mu?yA(i,e):i instanceof Vu?_A(i,e):n}function gA(i,e){return i instanceof hf?(function(s){return Np(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class Ou extends Mf{}class Mu extends Mf{constructor(e){super(),this.elements=e}}function yA(i,e){const n=vA(e);for(const s of i.elements)n.some((o=>er(o,s)))||n.push(s);return{arrayValue:{values:n}}}class Vu extends Mf{constructor(e){super(),this.elements=e}}function _A(i,e){let n=vA(e);for(const s of i.elements)n=n.filter((o=>!er(o,s)));return{arrayValue:{values:n}}}class hf extends Mf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function qT(i){return At(i.integerValue||i.doubleValue)}function vA(i){return _g(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e,n){this.field=e,this.transform=n}}function jD(i,e){return i.field.isEqual(e.field)&&(function(s,o){return s instanceof Mu&&o instanceof Mu||s instanceof Vu&&o instanceof Vu?jo(s.elements,o.elements,er):s instanceof hf&&o instanceof hf?er(s.Ae,o.Ae):s instanceof Ou&&o instanceof Ou})(i.transform,e.transform)}class zD{constructor(e,n){this.version=e,this.transformResults=n}}class sn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new sn}static exists(e){return new sn(void 0,e)}static updateTime(e){return new sn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Kh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Vf{}function EA(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new kf(i.key,sn.none()):new Ku(i.key,i.data,sn.none());{const n=i.data,s=gn.empty();let o=new Bt(rn.comparator);for(let u of e.fields)if(!o.has(u)){let c=n.field(u);c===null&&u.length>1&&(u=u.popLast(),c=n.field(u)),c===null?s.delete(u):s.set(u,c),o=o.add(u)}return new zs(i.key,s,new Ln(o.toArray()),sn.none())}}function BD(i,e,n){i instanceof Ku?(function(o,u,c){const m=o.value.clone(),p=FT(o.fieldTransforms,u,c.transformResults);m.setAll(p),u.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(i,e,n):i instanceof zs?(function(o,u,c){if(!Kh(o.precondition,u))return void u.convertToUnknownDocument(c.version);const m=FT(o.fieldTransforms,u,c.transformResults),p=u.data;p.setAll(TA(o)),p.setAll(m),u.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(i,e,n):(function(o,u,c){u.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,n)}function Eu(i,e,n,s){return i instanceof Ku?(function(u,c,m,p){if(!Kh(u.precondition,c))return m;const g=u.value.clone(),v=GT(u.fieldTransforms,p,c);return g.setAll(v),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(i,e,n,s):i instanceof zs?(function(u,c,m,p){if(!Kh(u.precondition,c))return m;const g=GT(u.fieldTransforms,p,c),v=c.data;return v.setAll(TA(u)),v.setAll(g),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((b=>b.field)))})(i,e,n,s):(function(u,c,m){return Kh(u.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):m})(i,e,n)}function qD(i,e){let n=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),u=gA(s.transform,o||null);u!=null&&(n===null&&(n=gn.empty()),n.set(s.field,u))}return n||null}function HT(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&jo(s,o,((u,c)=>jD(u,c)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Ku extends Vf{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class zs extends Vf{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function TA(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}})),e}function FT(i,e,n){const s=new Map;Ue(i.length===n.length,32656,{Re:n.length,Ve:i.length});for(let o=0;o<n.length;o++){const u=i[o],c=u.transform,m=e.data.field(u.field);s.set(u.field,LD(c,m,n[o]))}return s}function GT(i,e,n){const s=new Map;for(const o of i){const u=o.transform,c=n.data.field(o.field);s.set(o.field,PD(u,c,e))}return s}class kf extends Vf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bA extends Vf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&BD(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Eu(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Eu(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=mA();return this.mutations.forEach((o=>{const u=e.get(o.key),c=u.overlayedDocument;let m=this.applyToLocalView(c,u.mutatedFields);m=n.has(o.key)?null:m;const p=EA(c,m);p!==null&&s.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(Te.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Pe())}isEqual(e){return this.batchId===e.batchId&&jo(this.mutations,e.mutations,((n,s)=>HT(n,s)))&&jo(this.baseMutations,e.baseMutations,((n,s)=>HT(n,s)))}}class Ag{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){Ue(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return ND})();const u=e.mutations;for(let c=0;c<u.length;c++)o=o.insert(u[c].key,s[c].version);return new Ag(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e,n,s){this.alias=e,this.aggregateType=n,this.fieldPath=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt,ze;function AA(i){switch(i){case X.OK:return ye(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return ye(15467,{code:i})}}function SA(i){if(i===void 0)return Mr("GRPC error has no .code"),X.UNKNOWN;switch(i){case Vt.OK:return X.OK;case Vt.CANCELLED:return X.CANCELLED;case Vt.UNKNOWN:return X.UNKNOWN;case Vt.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case Vt.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case Vt.INTERNAL:return X.INTERNAL;case Vt.UNAVAILABLE:return X.UNAVAILABLE;case Vt.UNAUTHENTICATED:return X.UNAUTHENTICATED;case Vt.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case Vt.NOT_FOUND:return X.NOT_FOUND;case Vt.ALREADY_EXISTS:return X.ALREADY_EXISTS;case Vt.PERMISSION_DENIED:return X.PERMISSION_DENIED;case Vt.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case Vt.ABORTED:return X.ABORTED;case Vt.OUT_OF_RANGE:return X.OUT_OF_RANGE;case Vt.UNIMPLEMENTED:return X.UNIMPLEMENTED;case Vt.DATA_LOSS:return X.DATA_LOSS;default:return ye(39323,{code:i})}}(ze=Vt||(Vt={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD=new Cs([4294967295,4294967295],0);function KT(i){const e=QD().encode(i),n=new Lb;return n.update(e),new Uint8Array(n.digest())}function QT(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Cs([n,s],0),new Cs([o,u],0)]}class Sg{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new mu(`Invalid padding: ${n}`);if(s<0)throw new mu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new mu(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new mu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Cs.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(Cs.fromNumber(s)));return o.compare(YD)===1&&(o=new Cs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=KT(e),[s,o]=QT(n);for(let u=0;u<this.hashCount;u++){const c=this.ye(s,o,u);if(!this.we(c))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),c=new Sg(u,o,n);return s.forEach((m=>c.insert(m))),c}insert(e){if(this.ge===0)return;const n=KT(e),[s,o]=QT(n);for(let u=0;u<this.hashCount;u++){const c=this.ye(s,o,u);this.Se(c)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class mu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,Qu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Pf(Te.min(),o,new mt(ke),Vr(),Pe())}}class Qu{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Qu(s,n,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,n,s,o){this.be=e,this.removedTargetIds=n,this.key=s,this.De=o}}class wA{constructor(e,n){this.targetId=e,this.Ce=n}}class RA{constructor(e,n,s=an.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class YT{constructor(){this.ve=0,this.Fe=$T(),this.Me=an.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Pe(),n=Pe(),s=Pe();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:ye(38017,{changeType:u})}})),new Qu(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=$T()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ue(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class $D{constructor(e){this.Ge=e,this.ze=new Map,this.je=Vr(),this.Je=Mh(),this.He=Mh(),this.Ye=new mt(ke)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:ye(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(Mp(u))if(s===0){const c=new me(u.path);this.et(n,c,Qt.newNoDocument(c,Te.min()))}else Ue(s===1,20013,{expectedCount:s});else{const c=this._t(n);if(c!==s){const m=this.ut(e),p=m?this.ct(m,e,c):1;if(p!==0){this.it(n);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,g)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let c,m;try{c=Ms(s).toUint8Array()}catch(p){if(p instanceof $b)return Uo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new Sg(c,o,u)}catch(p){return Uo(p instanceof mu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.ge===0?null:m}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((u=>{const c=this.Ge.ht(),m=`projects/${c.projectId}/databases/${c.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,c)=>{const m=this.ot(c);if(m){if(u.current&&Mp(m.target)){const p=new me(m.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,Qt.newNoDocument(p,e))}u.Be&&(n.set(c,u.ke()),u.qe())}}));let s=Pe();this.He.forEach(((u,c)=>{let m=!0;c.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(u))})),this.je.forEach(((u,c)=>c.setReadTime(e)));const o=new Pf(e,n,this.Ye,this.je,s);return this.je=Vr(),this.Je=Mh(),this.He=Mh(),this.Ye=new mt(ke),o}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new YT,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Bt(ke),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Bt(ke),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ue("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new YT),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Mh(){return new mt(me.comparator)}function $T(){return new mt(me.comparator)}const XD={asc:"ASCENDING",desc:"DESCENDING"},WD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},JD={and:"AND",or:"OR"};class ZD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function kp(i,e){return i.useProto3Json||Gu(e)?e:{value:e}}function ff(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function CA(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function eN(i,e){return ff(i,e.toTimestamp())}function jn(i){return Ue(!!i,49232),Te.fromTimestamp((function(n){const s=Os(n);return new lt(s.seconds,s.nanos)})(i))}function wg(i,e){return Pp(i,e).canonicalString()}function Pp(i,e){const n=(function(o){return new We(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?n:n.child(e)}function IA(i){const e=We.fromString(i);return Ue(kA(e),10190,{key:e.toString()}),e}function df(i,e){return wg(i.databaseId,e.path)}function Tu(i,e){const n=IA(e);if(n.get(1)!==i.databaseId.projectId)throw new re(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new re(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new me(DA(n))}function xA(i,e){return wg(i.databaseId,e)}function tN(i){const e=IA(i);return e.length===4?We.emptyPath():DA(e)}function Lp(i){return new We(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function DA(i){return Ue(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function XT(i,e,n){return{name:df(i,e),fields:n.value.mapValue.fields}}function nN(i,e){return"found"in e?(function(s,o){Ue(!!o.found,43571),o.found.name,o.found.updateTime;const u=Tu(s,o.found.name),c=jn(o.found.updateTime),m=o.found.createTime?jn(o.found.createTime):Te.min(),p=new gn({mapValue:{fields:o.found.fields}});return Qt.newFoundDocument(u,c,m,p)})(i,e):"missing"in e?(function(s,o){Ue(!!o.missing,3894),Ue(!!o.readTime,22933);const u=Tu(s,o.missing),c=jn(o.readTime);return Qt.newNoDocument(u,c)})(i,e):ye(7234,{result:e})}function iN(i,e){let n;if("targetChange"in e){e.targetChange;const s=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:ye(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(g,v){return g.useProto3Json?(Ue(v===void 0||typeof v=="string",58123),an.fromBase64String(v||"")):(Ue(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),an.fromUint8Array(v||new Uint8Array))})(i,e.targetChange.resumeToken),c=e.targetChange.cause,m=c&&(function(g){const v=g.code===void 0?X.UNKNOWN:SA(g.code);return new re(v,g.message||"")})(c);n=new RA(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Tu(i,s.document.name),u=jn(s.document.updateTime),c=s.document.createTime?jn(s.document.createTime):Te.min(),m=new gn({mapValue:{fields:s.document.fields}}),p=Qt.newFoundDocument(o,u,c,m),g=s.targetIds||[],v=s.removedTargetIds||[];n=new Qh(g,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Tu(i,s.document),u=s.readTime?jn(s.readTime):Te.min(),c=Qt.newNoDocument(o,u),m=s.removedTargetIds||[];n=new Qh([],m,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Tu(i,s.document),u=s.removedTargetIds||[];n=new Qh([],u,o,null)}else{if(!("filter"in e))return ye(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,c=new KD(o,u),m=s.targetId;n=new wA(m,c)}}return n}function NA(i,e){let n;if(e instanceof Ku)n={update:XT(i,e.key,e.value)};else if(e instanceof kf)n={delete:df(i,e.key)};else if(e instanceof zs)n={update:XT(i,e.key,e.data),updateMask:fN(e.fieldMask)};else{if(!(e instanceof bA))return ye(16599,{Vt:e.type});n={verify:df(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(u,c){const m=c.transform;if(m instanceof Ou)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Mu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Vu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof hf)return{fieldPath:c.field.canonicalString(),increment:m.Ae};throw ye(20930,{transform:c.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:eN(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:ye(27497)})(i,e.precondition)),n}function rN(i,e){return i&&i.length>0?(Ue(e!==void 0,14353),i.map((n=>(function(o,u){let c=o.updateTime?jn(o.updateTime):jn(u);return c.isEqual(Te.min())&&(c=jn(u)),new zD(c,o.transformResults||[])})(n,e)))):[]}function sN(i,e){return{documents:[xA(i,e.path)]}}function OA(i,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=xA(i,o);const u=(function(g){if(g.length!==0)return VA(_i.create(g,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const c=(function(g){if(g.length!==0)return g.map((v=>(function(A){return{field:bs(A.field),direction:uN(A.dir)}})(v)))})(e.orderBy);c&&(n.structuredQuery.orderBy=c);const m=kp(i,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:n,parent:o}}function aN(i,e,n,s){const{ft:o,parent:u}=OA(i,e),c={},m=[];let p=0;return n.forEach((g=>{const v="aggregate_"+p++;c[v]=g.alias,g.aggregateType==="count"?m.push({alias:v,count:{}}):g.aggregateType==="avg"?m.push({alias:v,avg:{field:bs(g.fieldPath)}}):g.aggregateType==="sum"&&m.push({alias:v,sum:{field:bs(g.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:m,structuredQuery:o.structuredQuery},parent:o.parent},gt:c,parent:u}}function oN(i){let e=tN(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Ue(s===1,65062);const v=n.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let u=[];n.where&&(u=(function(b){const A=MA(b);return A instanceof _i&&sA(A)?A.getFilters():[A]})(n.where));let c=[];n.orderBy&&(c=(function(b){return b.map((A=>(function(D){return new Nu(Do(D.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(D.direction))})(A)))})(n.orderBy));let m=null;n.limit&&(m=(function(b){let A;return A=typeof b=="object"?b.value:b,Gu(A)?null:A})(n.limit));let p=null;n.startAt&&(p=(function(b){const A=!!b.before,C=b.values||[];return new qo(C,A)})(n.startAt));let g=null;return n.endAt&&(g=(function(b){const A=!b.before,C=b.values||[];return new qo(C,A)})(n.endAt)),RD(e,o,c,u,m,"F",p,g)}function lN(i,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function MA(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Do(n.unaryFilter.field);return kt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Do(n.unaryFilter.field);return kt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Do(n.unaryFilter.field);return kt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Do(n.unaryFilter.field);return kt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ye(61313);default:return ye(60726)}})(i):i.fieldFilter!==void 0?(function(n){return kt.create(Do(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ye(58110);default:return ye(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return _i.create(n.compositeFilter.filters.map((s=>MA(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ye(1026)}})(n.compositeFilter.op))})(i):ye(30097,{filter:i})}function uN(i){return XD[i]}function cN(i){return WD[i]}function hN(i){return JD[i]}function bs(i){return{fieldPath:i.canonicalString()}}function Do(i){return rn.fromServerFormat(i.fieldPath)}function VA(i){return i instanceof kt?(function(n){if(n.op==="=="){if(LT(n.value))return{unaryFilter:{field:bs(n.field),op:"IS_NAN"}};if(PT(n.value))return{unaryFilter:{field:bs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(LT(n.value))return{unaryFilter:{field:bs(n.field),op:"IS_NOT_NAN"}};if(PT(n.value))return{unaryFilter:{field:bs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bs(n.field),op:cN(n.op),value:n.value}}})(i):i instanceof _i?(function(n){const s=n.getFilters().map((o=>VA(o)));return s.length===1?s[0]:{compositeFilter:{op:hN(n.op),filters:s}}})(i):ye(54877,{filter:i})}function fN(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function kA(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,n,s,o,u=Te.min(),c=Te.min(),m=an.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new Ss(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ss(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e){this.yt=e}}function mN(i){const e=oN({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?cf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(){this.Cn=new gN}addToCollectionParentIndex(e,n){return this.Cn.add(n),ne.resolve()}getCollectionParents(e,n){return ne.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ne.resolve()}deleteFieldIndex(e,n){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,n){return ne.resolve()}getDocumentsMatchingTarget(e,n){return ne.resolve(null)}getIndexType(e,n){return ne.resolve(0)}getFieldIndexes(e,n){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,n){return ne.resolve(Ns.min())}getMinOffsetFromCollectionGroup(e,n){return ne.resolve(Ns.min())}updateCollectionGroup(e,n,s){return ne.resolve()}updateIndexEntries(e,n){return ne.resolve()}}class gN{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new Bt(We.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Bt(We.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},PA=41943040;class wn{static withCacheSize(e){return new wn(e,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wn.DEFAULT_COLLECTION_PERCENTILE=10,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wn.DEFAULT=new wn(PA,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wn.DISABLED=new wn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ho(0)}static cr(){return new Ho(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT="LruGarbageCollector",yN=1048576;function ZT([i,e],[n,s]){const o=ke(i,n);return o===0?ke(e,s):o}class _N{constructor(e){this.Ir=e,this.buffer=new Bt(ZT),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();ZT(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class vN{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ue(JT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Jo(n)?ue(JT,"Ignoring IndexedDB error during garbage collection: ",n):await Wo(n)}await this.Vr(3e5)}))}}class EN{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return ne.resolve(Cf.ce);const s=new _N(n);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(WT)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),WT):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,o,u,c,m,p,g;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),o=this.params.maximumSequenceNumbersToCollect):o=b,c=Date.now(),this.nthSequenceNumber(e,o)))).next((b=>(s=b,m=Date.now(),this.removeTargets(e,s,n)))).next((b=>(u=b,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((b=>(g=Date.now(),Io()<=Ve.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${o} in `+(m-c)+`ms
	Removed ${u} targets in `+(p-m)+`ms
	Removed ${b} documents in `+(g-p)+`ms
Total Duration: ${g-v}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:b}))))}}function TN(i,e){return new EN(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(){this.changes=new ka((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Qt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ne.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&Eu(s.mutation,o,Ln.empty(),lt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Pe()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Pe()){const o=ba();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((u=>{let c=du();return u.forEach(((m,p)=>{c=c.insert(m,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,n){const s=ba();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Pe())))}populateOverlays(e,n,s){const o=[];return s.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((c,m)=>{n.set(c,m)}))}))}computeViews(e,n,s,o){let u=Vr();const c=vu(),m=(function(){return vu()})();return n.forEach(((p,g)=>{const v=s.get(g.key);o.has(g.key)&&(v===void 0||v.mutation instanceof zs)?u=u.insert(g.key,g):v!==void 0?(c.set(g.key,v.mutation.getFieldMask()),Eu(v.mutation,g,v.mutation.getFieldMask(),lt.now())):c.set(g.key,Ln.empty())})),this.recalculateAndSaveOverlays(e,u).next((p=>(p.forEach(((g,v)=>c.set(g,v))),n.forEach(((g,v)=>m.set(g,new AN(v,c.get(g)??null)))),m)))}recalculateAndSaveOverlays(e,n){const s=vu();let o=new mt(((c,m)=>c-m)),u=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((c=>{for(const m of c)m.keys().forEach((p=>{const g=n.get(p);if(g===null)return;let v=s.get(p)||Ln.empty();v=m.applyToLocalView(g,v),s.set(p,v);const b=(o.get(m.batchId)||Pe()).add(p);o=o.insert(m.batchId,b)}))})).next((()=>{const c=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),g=p.key,v=p.value,b=mA();v.forEach((A=>{if(!u.has(A)){const C=EA(n.get(A),s.get(A));C!==null&&b.set(A,C),u=u.add(A)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,b))}return ne.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return(function(c){return me.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Tg(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((u=>{const c=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):ne.resolve(ba());let m=Cu,p=u;return c.next((g=>ne.forEach(g,((v,b)=>(m<b.largestBatchId&&(m=b.largestBatchId),u.get(v)?ne.resolve():this.remoteDocumentCache.getEntry(e,v).next((A=>{p=p.insert(v,A)}))))).next((()=>this.populateOverlays(e,g,u))).next((()=>this.computeViews(e,p,g,Pe()))).next((v=>({batchId:m,changes:dA(v)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new me(n)).next((s=>{let o=du();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let c=du();return this.indexManager.getCollectionParents(e,u).next((m=>ne.forEach(m,(p=>{const g=(function(b,A){return new Va(A,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,g,s,o).next((v=>{v.forEach(((b,A)=>{c=c.insert(b,A)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((c=>(u=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o)))).next((c=>{u.forEach(((p,g)=>{const v=g.getKey();c.get(v)===null&&(c=c.insert(v,Qt.newInvalidDocument(v)))}));let m=du();return c.forEach(((p,g)=>{const v=u.get(p);v!==void 0&&Eu(v.mutation,g,Ln.empty(),lt.now()),Of(n,g)&&(m=m.insert(p,g))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ne.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:jn(o.createTime)}})(n)),ne.resolve()}getNamedQuery(e,n){return ne.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:mN(o.bundledQuery),readTime:jn(o.readTime)}})(n)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(){this.overlays=new mt(me.comparator),this.qr=new Map}getOverlay(e,n){return ne.resolve(this.overlays.get(n))}getOverlays(e,n){const s=ba();return ne.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,u)=>{this.St(e,n,u)})),ne.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),ne.resolve()}getOverlaysForCollection(e,n,s){const o=ba(),u=n.length+1,c=new me(n.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const p=m.getNext().value,g=p.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===u&&p.largestBatchId>s&&o.set(p.getKey(),p)}return ne.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new mt(((g,v)=>g-v));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>s){let v=u.get(g.largestBatchId);v===null&&(v=ba(),u=u.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const m=ba(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,v)=>m.set(g,v))),!(m.size()>=o)););return ne.resolve(m)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new FD(n,s));let u=this.qr.get(n);u===void 0&&(u=Pe(),this.qr.set(n,u)),this.qr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(){this.sessionToken=an.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(){this.Qr=new Bt(Kt.$r),this.Ur=new Bt(Kt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Kt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new Kt(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new me(new We([])),s=new Kt(n,e),o=new Kt(n,e+1),u=[];return this.Ur.forEachInRange([s,o],(c=>{this.Gr(c),u.push(c.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new me(new We([])),s=new Kt(n,e),o=new Kt(n,e+1);let u=Pe();return this.Ur.forEachInRange([s,o],(c=>{u=u.add(c.key)})),u}containsKey(e){const n=new Kt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Kt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return me.comparator(e.key,n.key)||ke(e.Yr,n.Yr)}static Kr(e,n){return ke(e.Yr,n.Yr)||me.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Bt(Kt.$r)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new HD(u,n,s,o);this.mutationQueue.push(c);for(const m of o)this.Zr=this.Zr.add(new Kt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ne.resolve(c)}lookupMutationBatch(e,n){return ne.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ei(s),u=o<0?0:o;return ne.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?yg:this.tr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Kt(n,0),o=new Kt(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],(c=>{const m=this.Xr(c.Yr);u.push(m)})),ne.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Bt(ke);return n.forEach((o=>{const u=new Kt(o,0),c=new Kt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,c],(m=>{s=s.add(m.Yr)}))})),ne.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;me.isDocumentKey(u)||(u=u.child(""));const c=new Kt(new me(u),0);let m=new Bt(ke);return this.Zr.forEachWhile((p=>{const g=p.key.path;return!!s.isPrefixOf(g)&&(g.length===o&&(m=m.add(p.Yr)),!0)}),c),ne.resolve(this.ti(m))}ti(e){const n=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Ue(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ne.forEach(n.mutations,(o=>{const u=new Kt(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new Kt(n,0),o=this.Zr.firstAfterOrEqual(s);return ne.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e){this.ri=e,this.docs=(function(){return new mt(me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,c=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ne.resolve(s?s.document.mutableCopy():Qt.newInvalidDocument(n))}getEntries(e,n){let s=Vr();return n.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():Qt.newInvalidDocument(o))})),ne.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=Vr();const c=n.path,m=new me(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:g,value:{document:v}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||iD(nD(v),s)<=0||(o.has(v.key)||Of(n,v))&&(u=u.insert(v.key,v.mutableCopy()))}return ne.resolve(u)}getAllFromCollectionGroup(e,n,s,o){ye(9500)}ii(e,n){return ne.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new DN(this)}getSize(e){return ne.resolve(this.size)}}class DN extends bN{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),ne.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e){this.persistence=e,this.si=new ka((n=>vg(n)),Eg),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.oi=0,this._i=new Rg,this.targetCount=0,this.ai=Ho.ur()}forEachTarget(e,n){return this.si.forEach(((s,o)=>n(o))),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),ne.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ho(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ne.resolve()}updateTargetData(e,n){return this.Pr(n),ne.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.si.forEach(((c,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.si.delete(c),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),ne.waitFor(u).next((()=>o))}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return ne.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),ne.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((c=>{u.push(o.markPotentiallyOrphaned(e,c))})),ne.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ne.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return ne.resolve(s)}containsKey(e,n){return ne.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e,n){this.ui={},this.overlays={},this.ci=new Cf(0),this.li=!1,this.li=!0,this.hi=new CN,this.referenceDelegate=e(this),this.Pi=new NN(this),this.indexManager=new pN,this.remoteDocumentCache=(function(o){return new xN(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new dN(n),this.Ii=new wN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new RN,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new IN(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){ue("MemoryPersistence","Starting transaction:",e);const o=new ON(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,n){return ne.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class ON extends sD{constructor(e){super(),this.currentSequenceNumber=e}}class Cg{constructor(e){this.persistence=e,this.Ri=new Rg,this.Vi=null}static mi(e){return new Cg(e)}get fi(){if(this.Vi)return this.Vi;throw ye(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),ne.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),ne.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ne.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.fi,(s=>{const o=me.fromPath(s);return this.gi(e,o).next((u=>{u||n.removeEntry(o,Te.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ne.or([()=>ne.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class mf{constructor(e,n){this.persistence=e,this.pi=new ka((s=>lD(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=TN(this,n)}static mi(e,n){return new mf(e,n)}Ei(){}di(e){return ne.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return ne.forEach(this.pi,((s,o)=>this.br(e,s,o).next((u=>u?ne.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(c=>this.br(e,c,n).next((m=>{m||(s++,u.removeEntry(c,Te.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ne.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ne.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ne.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Fh(e.data.value)),n}br(e,n,s){return ne.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return ne.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=o}static As(e,n){let s=Pe(),o=Pe();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Ig(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return aC()?8:aD(hn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.ys(e,n).next((c=>{u.result=c})).next((()=>{if(!u.result)return this.ws(e,n,o,s).next((c=>{u.result=c}))})).next((()=>{if(u.result)return;const c=new MN;return this.Ss(e,n,c).next((m=>{if(u.result=m,this.Vs)return this.bs(e,n,c,m.size)}))})).next((()=>u.result))}bs(e,n,s,o){return s.documentReadCount<this.fs?(Io()<=Ve.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",xo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ne.resolve()):(Io()<=Ve.DEBUG&&ue("QueryEngine","Query:",xo(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(Io()<=Ve.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",xo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$i(n))):ne.resolve())}ys(e,n){if(BT(n))return ne.resolve(null);let s=$i(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=cf(n,null,"F"),s=$i(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const c=Pe(...u);return this.ps.getDocuments(e,c).next((m=>this.indexManager.getMinOffset(e,s).next((p=>{const g=this.Ds(n,m);return this.Cs(n,g,c,p.readTime)?this.ys(e,cf(n,null,"F")):this.vs(e,g,n,p)}))))})))))}ws(e,n,s,o){return BT(n)||o.isEqual(Te.min())?ne.resolve(null):this.ps.getDocuments(e,s).next((u=>{const c=this.Ds(n,u);return this.Cs(n,c,s,o)?ne.resolve(null):(Io()<=Ve.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),xo(n)),this.vs(e,c,n,tD(o,Cu)).next((m=>m)))}))}Ds(e,n){let s=new Bt(hA(e));return n.forEach(((o,u)=>{Of(e,u)&&(s=s.add(u))})),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,s){return Io()<=Ve.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",xo(n)),this.ps.getDocumentsMatchingQuery(e,n,Ns.min(),s)}vs(e,n,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((u=>(n.forEach((c=>{u=u.insert(c.key,c)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xg="LocalStore",kN=3e8;class PN{constructor(e,n,s,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new mt(ke),this.xs=new ka((u=>vg(u)),Eg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new SN(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function LN(i,e,n,s){return new PN(i,e,n,s)}async function UA(i,e){const n=Ae(i);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const c=[],m=[];let p=Pe();for(const g of o){c.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}for(const g of u){m.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}return n.localDocuments.getDocuments(s,p).next((g=>({Ls:g,removedBatchIds:c,addedBatchIds:m})))}))}))}function UN(i,e){const n=Ae(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,p,g,v){const b=g.batch,A=b.keys();let C=ne.resolve();return A.forEach((D=>{C=C.next((()=>v.getEntry(p,D))).next((B=>{const M=g.docVersions.get(D);Ue(M!==null,48541),B.version.compareTo(M)<0&&(b.applyToRemoteDocument(B,g),B.isValidDocument()&&(B.setReadTime(g.commitVersion),v.addEntry(B)))}))})),C.next((()=>m.mutationQueue.removeMutationBatch(p,b)))})(n,s,e,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let p=Pe();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(p=p.add(m.batch.mutations[g].key));return p})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function jA(i){const e=Ae(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function jN(i,e){const n=Ae(i),s=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const c=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const m=[];e.targetChanges.forEach(((v,b)=>{const A=o.get(b);if(!A)return;m.push(n.Pi.removeMatchingKeys(u,v.removedDocuments,b).next((()=>n.Pi.addMatchingKeys(u,v.addedDocuments,b))));let C=A.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(b)!==null?C=C.withResumeToken(an.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):v.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(v.resumeToken,s)),o=o.insert(b,C),(function(B,M,Y){return B.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=kN?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0})(A,C,v)&&m.push(n.Pi.updateTargetData(u,C))}));let p=Vr(),g=Pe();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,v))})),m.push(zN(u,c,e.documentUpdates).next((v=>{p=v.ks,g=v.qs}))),!s.isEqual(Te.min())){const v=n.Pi.getLastRemoteSnapshotVersion(u).next((b=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));m.push(v)}return ne.waitFor(m).next((()=>c.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,p,g))).next((()=>p))})).then((u=>(n.Ms=o,u)))}function zN(i,e,n){let s=Pe(),o=Pe();return n.forEach((u=>s=s.add(u))),e.getEntries(i,s).next((u=>{let c=Vr();return n.forEach(((m,p)=>{const g=u.get(m);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(Te.min())?(e.removeEntry(m,p.readTime),c=c.insert(m,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),c=c.insert(m,p)):ue(xg,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",p.version)})),{ks:c,qs:o}}))}function BN(i,e){const n=Ae(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=yg),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function qN(i,e){const n=Ae(i);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,e).next((u=>u?(o=u,ne.resolve(o)):n.Pi.allocateTargetId(s).next((c=>(o=new Ss(e,c,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function Up(i,e,n){const s=Ae(i),o=s.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(c=>s.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Jo(c))throw c;ue(xg,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function e0(i,e,n){const s=Ae(i);let o=Te.min(),u=Pe();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,g,v){const b=Ae(p),A=b.xs.get(v);return A!==void 0?ne.resolve(b.Ms.get(A)):b.Pi.getTargetData(g,v)})(s,c,$i(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(c,m.targetId).next((p=>{u=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(c,e,n?o:Te.min(),n?u:Pe()))).next((m=>(HN(s,ID(e),m),{documents:m,Qs:u})))))}function HN(i,e,n){let s=i.Os.get(e)||Te.min();n.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),i.Os.set(e,s)}class t0{constructor(){this.activeTargetIds=VD()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class FN{constructor(){this.Mo=new t0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new t0,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0="ConnectivityMonitor";class i0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ue(n0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ue(n0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vh=null;function jp(){return Vh===null?Vh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Vh++,"0x"+Vh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp="RestConnection",KN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class QN{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===of?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,n,s,o,u){const c=jp(),m=this.zo(e,n.toUriEncodedString());ue(lp,`Sending RPC '${e}' ${c}:`,m,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,u);const{host:g}=new URL(m),v=Us(g);return this.Jo(e,m,p,s,v).then((b=>(ue(lp,`Received RPC '${e}' ${c}: `,b),b)),(b=>{throw Uo(lp,`RPC '${e}' ${c} failed with error: `,b,"url: ",m,"request:",s),b}))}Ho(e,n,s,o,u,c){return this.Go(e,n,s,o,u)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Xo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}zo(e,n){const s=KN[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln="WebChannelConnection";class $N extends QN{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,u){const c=jp();return new Promise(((m,p)=>{const g=new Ub;g.setWithCredentials(!0),g.listenOnce(jb.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Hh.NO_ERROR:const b=g.getResponseJson();ue(ln,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(b)),m(b);break;case Hh.TIMEOUT:ue(ln,`RPC '${e}' ${c} timed out`),p(new re(X.DEADLINE_EXCEEDED,"Request time out"));break;case Hh.HTTP_ERROR:const A=g.getStatus();if(ue(ln,`RPC '${e}' ${c} failed with status:`,A,"response text:",g.getResponseText()),A>0){let C=g.getResponseJson();Array.isArray(C)&&(C=C[0]);const D=C?.error;if(D&&D.status&&D.message){const B=(function(Y){const $=Y.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf($)>=0?$:X.UNKNOWN})(D.status);p(new re(B,D.message))}else p(new re(X.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new re(X.UNAVAILABLE,"Connection failed."));break;default:ye(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{ue(ln,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(o);ue(ln,`RPC '${e}' ${c} sending request:`,o),g.send(n,"POST",v,s,15)}))}T_(e,n,s){const o=jp(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=qb(),m=Bb(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const v=u.join("");ue(ln,`Creating RPC '${e}' stream ${o}: ${v}`,p);const b=c.createWebChannel(v,p);this.I_(b);let A=!1,C=!1;const D=new YN({Yo:M=>{C?ue(ln,`Not sending because RPC '${e}' stream ${o} is closed:`,M):(A||(ue(ln,`Opening RPC '${e}' stream ${o} transport.`),b.open(),A=!0),ue(ln,`RPC '${e}' stream ${o} sending:`,M),b.send(M))},Zo:()=>b.close()}),B=(M,Y,$)=>{M.listen(Y,(ie=>{try{$(ie)}catch(he){setTimeout((()=>{throw he}),0)}}))};return B(b,fu.EventType.OPEN,(()=>{C||(ue(ln,`RPC '${e}' stream ${o} transport opened.`),D.o_())})),B(b,fu.EventType.CLOSE,(()=>{C||(C=!0,ue(ln,`RPC '${e}' stream ${o} transport closed`),D.a_(),this.E_(b))})),B(b,fu.EventType.ERROR,(M=>{C||(C=!0,Uo(ln,`RPC '${e}' stream ${o} transport errored. Name:`,M.name,"Message:",M.message),D.a_(new re(X.UNAVAILABLE,"The operation could not be completed")))})),B(b,fu.EventType.MESSAGE,(M=>{if(!C){const Y=M.data[0];Ue(!!Y,16349);const $=Y,ie=$?.error||$[0]?.error;if(ie){ue(ln,`RPC '${e}' stream ${o} received error:`,ie);const he=ie.status;let Ee=(function(R){const x=Vt[R];if(x!==void 0)return SA(x)})(he),ae=ie.message;Ee===void 0&&(Ee=X.INTERNAL,ae="Unknown error status: "+he+" with message "+ie.message),C=!0,D.a_(new re(Ee,ae)),b.close()}else ue(ln,`RPC '${e}' stream ${o} received:`,Y),D.u_(Y)}})),B(m,zb.STAT_EVENT,(M=>{M.stat===Ip.PROXY?ue(ln,`RPC '${e}' stream ${o} detected buffering proxy`):M.stat===Ip.NOPROXY&&ue(ln,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{D.__()}),0),D}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function up(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(i){return new ZD(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&ue("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0="PersistentStream";class zA{constructor(e,n,s,o,u,c,m,p){this.Mi=e,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Dg(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===X.RESOURCE_EXHAUSTED?(Mr(n.toString()),Mr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new re(X.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ue(r0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ue(r0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class XN extends zA{constructor(e,n,s,o,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,c),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=iN(this.serializer,e),s=(function(u){if(!("targetChange"in u))return Te.min();const c=u.targetChange;return c.targetIds&&c.targetIds.length?Te.min():c.readTime?jn(c.readTime):Te.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Lp(this.serializer),n.addTarget=(function(u,c){let m;const p=c.target;if(m=Mp(p)?{documents:sN(u,p)}:{query:OA(u,p).ft},m.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){m.resumeToken=CA(u,c.resumeToken);const g=kp(u,c.expectedCount);g!==null&&(m.expectedCount=g)}else if(c.snapshotVersion.compareTo(Te.min())>0){m.readTime=ff(u,c.snapshotVersion.toTimestamp());const g=kp(u,c.expectedCount);g!==null&&(m.expectedCount=g)}return m})(this.serializer,e);const s=lN(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Lp(this.serializer),n.removeTarget=e,this.q_(n)}}class WN extends zA{constructor(e,n,s,o,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,c),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ue(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ue(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ue(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=rN(e.writeResults,e.commitTime),s=jn(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Lp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>NA(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{}class ZN extends JN{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new re(X.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,c])=>this.connection.Go(e,Pp(n,s),o,u,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new re(X.UNKNOWN,u.toString())}))}Ho(e,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,m])=>this.connection.Ho(e,Pp(n,s),o,c,m,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new re(X.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class eO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Mr(n),this.aa=!1):ue("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na="RemoteStore";class tO{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((c=>{s.enqueueAndForget((async()=>{Pa(this)&&(ue(Na,"Restarting streams for network reachability change."),await(async function(p){const g=Ae(p);g.Ea.add(4),await Yu(g),g.Ra.set("Unknown"),g.Ea.delete(4),await Uf(g)})(this))}))})),this.Ra=new eO(s,o)}}async function Uf(i){if(Pa(i))for(const e of i.da)await e(!0)}async function Yu(i){for(const e of i.da)await e(!1)}function BA(i,e){const n=Ae(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Vg(n)?Mg(n):Zo(n).O_()&&Og(n,e))}function Ng(i,e){const n=Ae(i),s=Zo(n);n.Ia.delete(e),s.O_()&&qA(n,e),n.Ia.size===0&&(s.O_()?s.L_():Pa(n)&&n.Ra.set("Unknown"))}function Og(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Zo(i).Y_(e)}function qA(i,e){i.Va.Ue(e),Zo(i).Z_(e)}function Mg(i){i.Va=new $D({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),Zo(i).start(),i.Ra.ua()}function Vg(i){return Pa(i)&&!Zo(i).x_()&&i.Ia.size>0}function Pa(i){return Ae(i).Ea.size===0}function HA(i){i.Va=void 0}async function nO(i){i.Ra.set("Online")}async function iO(i){i.Ia.forEach(((e,n)=>{Og(i,e)}))}async function rO(i,e){HA(i),Vg(i)?(i.Ra.ha(e),Mg(i)):i.Ra.set("Unknown")}async function sO(i,e,n){if(i.Ra.set("Online"),e instanceof RA&&e.state===2&&e.cause)try{await(async function(o,u){const c=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,c),o.Ia.delete(m),o.Va.removeTarget(m))})(i,e)}catch(s){ue(Na,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await pf(i,s)}else if(e instanceof Qh?i.Va.Ze(e):e instanceof wA?i.Va.st(e):i.Va.tt(e),!n.isEqual(Te.min()))try{const s=await jA(i.localStore);n.compareTo(s)>=0&&await(function(u,c){const m=u.Va.Tt(c);return m.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const v=u.Ia.get(g);v&&u.Ia.set(g,v.withResumeToken(p.resumeToken,c))}})),m.targetMismatches.forEach(((p,g)=>{const v=u.Ia.get(p);if(!v)return;u.Ia.set(p,v.withResumeToken(an.EMPTY_BYTE_STRING,v.snapshotVersion)),qA(u,p);const b=new Ss(v.target,p,g,v.sequenceNumber);Og(u,b)})),u.remoteSyncer.applyRemoteEvent(m)})(i,n)}catch(s){ue(Na,"Failed to raise snapshot:",s),await pf(i,s)}}async function pf(i,e,n){if(!Jo(e))throw e;i.Ea.add(1),await Yu(i),i.Ra.set("Offline"),n||(n=()=>jA(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{ue(Na,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await Uf(i)}))}function FA(i,e){return e().catch((n=>pf(i,n,e)))}async function jf(i){const e=Ae(i),n=ks(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:yg;for(;aO(e);)try{const o=await BN(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,oO(e,o)}catch(o){await pf(e,o)}GA(e)&&KA(e)}function aO(i){return Pa(i)&&i.Ta.length<10}function oO(i,e){i.Ta.push(e);const n=ks(i);n.O_()&&n.X_&&n.ea(e.mutations)}function GA(i){return Pa(i)&&!ks(i).x_()&&i.Ta.length>0}function KA(i){ks(i).start()}async function lO(i){ks(i).ra()}async function uO(i){const e=ks(i);for(const n of i.Ta)e.ea(n.mutations)}async function cO(i,e,n){const s=i.Ta.shift(),o=Ag.from(s,e,n);await FA(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await jf(i)}async function hO(i,e){e&&ks(i).X_&&await(async function(s,o){if((function(c){return AA(c)&&c!==X.ABORTED})(o.code)){const u=s.Ta.shift();ks(s).B_(),await FA(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await jf(s)}})(i,e),GA(i)&&KA(i)}async function s0(i,e){const n=Ae(i);n.asyncQueue.verifyOperationInProgress(),ue(Na,"RemoteStore received new credentials");const s=Pa(n);n.Ea.add(3),await Yu(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Uf(n)}async function fO(i,e){const n=Ae(i);e?(n.Ea.delete(2),await Uf(n)):e||(n.Ea.add(2),await Yu(n),n.Ra.set("Unknown"))}function Zo(i){return i.ma||(i.ma=(function(n,s,o){const u=Ae(n);return u.sa(),new XN(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:nO.bind(null,i),t_:iO.bind(null,i),r_:rO.bind(null,i),H_:sO.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),Vg(i)?Mg(i):i.Ra.set("Unknown")):(await i.ma.stop(),HA(i))}))),i.ma}function ks(i){return i.fa||(i.fa=(function(n,s,o){const u=Ae(n);return u.sa(),new WN(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:lO.bind(null,i),r_:hO.bind(null,i),ta:uO.bind(null,i),na:cO.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await jf(i)):(await i.fa.stop(),i.Ta.length>0&&(ue(Na,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new pi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const c=Date.now()+s,m=new kg(e,n,c,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pg(i,e){if(Mr("AsyncQueue",`${e}: ${i}`),Jo(i))return new re(X.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{static emptySet(e){return new Lo(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||me.comparator(n.key,s.key):(n,s)=>me.comparator(n.key,s.key),this.keyedMap=du(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Lo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Lo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(){this.ga=new mt(me.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ye(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class Fo{constructor(e,n,s,o,u,c,m,p,g){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,n,s,o,u){const c=[];return n.forEach((m=>{c.push({type:0,doc:m})})),new Fo(e,n,Lo.emptySet(n),c,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class mO{constructor(){this.queries=o0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=Ae(n),u=o.queries;o.queries=o0(),u.forEach(((c,m)=>{for(const p of m.Sa)p.onError(s)}))})(this,new re(X.ABORTED,"Firestore shutting down"))}}function o0(){return new ka((i=>cA(i)),Nf)}async function Lg(i,e){const n=Ae(i);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(s=2):(u=new dO,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(c){const m=Pg(c,`Initialization of query '${xo(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&jg(n)}async function Ug(i,e){const n=Ae(i),s=e.query;let o=3;const u=n.queries.get(s);if(u){const c=u.Sa.indexOf(e);c>=0&&(u.Sa.splice(c,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function pO(i,e){const n=Ae(i);let s=!1;for(const o of e){const u=o.query,c=n.queries.get(u);if(c){for(const m of c.Sa)m.Fa(o)&&(s=!0);c.wa=o}}s&&jg(n)}function gO(i,e,n){const s=Ae(i),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(e)}function jg(i){i.Ca.forEach((e=>{e.next()}))}var zp,l0;(l0=zp||(zp={})).Ma="default",l0.Cache="cache";class zg{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Fo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Fo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==zp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e){this.key=e}}class YA{constructor(e){this.key=e}}class yO{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Pe(),this.mutatedKeys=Pe(),this.eu=hA(e),this.tu=new Lo(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new a0,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,c=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,b)=>{const A=o.get(v),C=Of(this.query,b)?b:null,D=!!A&&this.mutatedKeys.has(A.key),B=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let M=!1;A&&C?A.data.isEqual(C.data)?D!==B&&(s.track({type:3,doc:C}),M=!0):this.su(A,C)||(s.track({type:2,doc:C}),M=!0,(p&&this.eu(C,p)>0||g&&this.eu(C,g)<0)&&(m=!0)):!A&&C?(s.track({type:0,doc:C}),M=!0):A&&!C&&(s.track({type:1,doc:A}),M=!0,(p||g)&&(m=!0)),M&&(C?(c=c.add(C),u=B?u.add(v):u.delete(v)):(c=c.delete(v),u=u.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),u=u.delete(v.key),s.track({type:1,doc:v})}return{tu:c,iu:s,Cs:m,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,b)=>(function(C,D){const B=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye(20277,{Rt:M})}};return B(C)-B(D)})(v.type,b.type)||this.eu(v.doc,b.doc))),this.ou(s),o=o??!1;const m=n&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,g=p!==this.Za;return this.Za=p,c.length!==0||g?{snapshot:new Fo(this.query,e.tu,u,c,e.mutatedKeys,p===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new a0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Pe(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new YA(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new QA(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Pe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Fo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Bg="SyncEngine";class _O{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class vO{constructor(e){this.key=e,this.hu=!1}}class EO{constructor(e,n,s,o,u,c){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new ka((m=>cA(m)),Nf),this.Iu=new Map,this.Eu=new Set,this.du=new mt(me.comparator),this.Au=new Map,this.Ru=new Rg,this.Vu={},this.mu=new Map,this.fu=Ho.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function TO(i,e,n=!0){const s=eS(i);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await $A(s,e,n,!0),o}async function bO(i,e){const n=eS(i);await $A(n,e,!0,!1)}async function $A(i,e,n,s){const o=await qN(i.localStore,$i(e)),u=o.targetId,c=i.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await AO(i,e,u,c==="current",o.resumeToken)),i.isPrimaryClient&&n&&BA(i.remoteStore,o),m}async function AO(i,e,n,s,o){i.pu=(b,A,C)=>(async function(B,M,Y,$){let ie=M.view.ru(Y);ie.Cs&&(ie=await e0(B.localStore,M.query,!1).then((({documents:I})=>M.view.ru(I,ie))));const he=$&&$.targetChanges.get(M.targetId),Ee=$&&$.targetMismatches.get(M.targetId)!=null,ae=M.view.applyChanges(ie,B.isPrimaryClient,he,Ee);return c0(B,M.targetId,ae.au),ae.snapshot})(i,b,A,C);const u=await e0(i.localStore,e,!0),c=new yO(e,u.Qs),m=c.ru(u.documents),p=Qu.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",o),g=c.applyChanges(m,i.isPrimaryClient,p);c0(i,n,g.au);const v=new _O(e,n,c);return i.Tu.set(e,v),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),g.snapshot}async function SO(i,e,n){const s=Ae(i),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((c=>!Nf(c,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Up(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&Ng(s.remoteStore,o.targetId),Bp(s,o.targetId)})).catch(Wo)):(Bp(s,o.targetId),await Up(s.localStore,o.targetId,!0))}async function wO(i,e){const n=Ae(i),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Ng(n.remoteStore,s.targetId))}async function RO(i,e,n){const s=MO(i);try{const o=await(function(c,m){const p=Ae(c),g=lt.now(),v=m.reduce(((C,D)=>C.add(D.key)),Pe());let b,A;return p.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let D=Vr(),B=Pe();return p.Ns.getEntries(C,v).next((M=>{D=M,D.forEach(((Y,$)=>{$.isValidDocument()||(B=B.add(Y))}))})).next((()=>p.localDocuments.getOverlayedDocuments(C,D))).next((M=>{b=M;const Y=[];for(const $ of m){const ie=qD($,b.get($.key).overlayedDocument);ie!=null&&Y.push(new zs($.key,ie,nA(ie.value.mapValue),sn.exists(!0)))}return p.mutationQueue.addMutationBatch(C,g,Y,m)})).next((M=>{A=M;const Y=M.applyToLocalDocumentSet(b,B);return p.documentOverlayCache.saveOverlays(C,M.batchId,Y)}))})).then((()=>({batchId:A.batchId,changes:dA(b)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(c,m,p){let g=c.Vu[c.currentUser.toKey()];g||(g=new mt(ke)),g=g.insert(m,p),c.Vu[c.currentUser.toKey()]=g})(s,o.batchId,n),await $u(s,o.changes),await jf(s.remoteStore)}catch(o){const u=Pg(o,"Failed to persist write");n.reject(u)}}async function XA(i,e){const n=Ae(i);try{const s=await jN(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const c=n.Au.get(u);c&&(Ue(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?Ue(c.hu,14607):o.removedDocuments.size>0&&(Ue(c.hu,42227),c.hu=!1))})),await $u(n,s,e)}catch(s){await Wo(s)}}function u0(i,e,n){const s=Ae(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((u,c)=>{const m=c.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(c,m){const p=Ae(c);p.onlineState=m;let g=!1;p.queries.forEach(((v,b)=>{for(const A of b.Sa)A.va(m)&&(g=!0)})),g&&jg(p)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function CO(i,e,n){const s=Ae(i);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),u=o&&o.key;if(u){let c=new mt(me.comparator);c=c.insert(u,Qt.newNoDocument(u,Te.min()));const m=Pe().add(u),p=new Pf(Te.min(),new Map,new mt(ke),c,m);await XA(s,p),s.du=s.du.remove(u),s.Au.delete(e),qg(s)}else await Up(s.localStore,e,!1).then((()=>Bp(s,e,n))).catch(Wo)}async function IO(i,e){const n=Ae(i),s=e.batch.batchId;try{const o=await UN(n.localStore,e);JA(n,s,null),WA(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await $u(n,o)}catch(o){await Wo(o)}}async function xO(i,e,n){const s=Ae(i);try{const o=await(function(c,m){const p=Ae(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let v;return p.mutationQueue.lookupMutationBatch(g,m).next((b=>(Ue(b!==null,37113),v=b.keys(),p.mutationQueue.removeMutationBatch(g,b)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,v,m))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v))).next((()=>p.localDocuments.getDocuments(g,v)))}))})(s.localStore,e);JA(s,e,n),WA(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await $u(s,o)}catch(o){await Wo(o)}}function WA(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function JA(i,e,n){const s=Ae(i);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function Bp(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Iu.get(e))i.Tu.delete(s),n&&i.Pu.yu(s,n);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((s=>{i.Ru.containsKey(s)||ZA(i,s)}))}function ZA(i,e){i.Eu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(Ng(i.remoteStore,n),i.du=i.du.remove(e),i.Au.delete(n),qg(i))}function c0(i,e,n){for(const s of n)s instanceof QA?(i.Ru.addReference(s.key,e),DO(i,s)):s instanceof YA?(ue(Bg,"Document no longer in limbo: "+s.key),i.Ru.removeReference(s.key,e),i.Ru.containsKey(s.key)||ZA(i,s.key)):ye(19791,{wu:s})}function DO(i,e){const n=e.key,s=n.path.canonicalString();i.du.get(n)||i.Eu.has(s)||(ue(Bg,"New document in limbo: "+n),i.Eu.add(s),qg(i))}function qg(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new me(We.fromString(e)),s=i.fu.next();i.Au.set(s,new vO(n)),i.du=i.du.insert(n,s),BA(i.remoteStore,new Ss($i(Df(n.path)),s,"TargetPurposeLimboResolution",Cf.ce))}}async function $u(i,e,n){const s=Ae(i),o=[],u=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,p)=>{c.push(s.pu(p,e,n).then((g=>{if((g||n)&&s.isPrimaryClient){const v=g?!g.fromCache:n?.targetChanges.get(p.targetId)?.current;s.sharedClientState.updateQueryState(p.targetId,v?"current":"not-current")}if(g){o.push(g);const v=Ig.As(p.targetId,g);u.push(v)}})))})),await Promise.all(c),s.Pu.H_(o),await(async function(p,g){const v=Ae(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>ne.forEach(g,(A=>ne.forEach(A.Es,(C=>v.persistence.referenceDelegate.addReference(b,A.targetId,C))).next((()=>ne.forEach(A.ds,(C=>v.persistence.referenceDelegate.removeReference(b,A.targetId,C)))))))))}catch(b){if(!Jo(b))throw b;ue(xg,"Failed to update sequence numbers: "+b)}for(const b of g){const A=b.targetId;if(!b.fromCache){const C=v.Ms.get(A),D=C.snapshotVersion,B=C.withLastLimboFreeSnapshotVersion(D);v.Ms=v.Ms.insert(A,B)}}})(s.localStore,u))}async function NO(i,e){const n=Ae(i);if(!n.currentUser.isEqual(e)){ue(Bg,"User change. New user:",e.toKey());const s=await UA(n.localStore,e);n.currentUser=e,(function(u,c){u.mu.forEach((m=>{m.forEach((p=>{p.reject(new re(X.CANCELLED,c))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await $u(n,s.Ls)}}function OO(i,e){const n=Ae(i),s=n.Au.get(e);if(s&&s.hu)return Pe().add(s.key);{let o=Pe();const u=n.Iu.get(e);if(!u)return o;for(const c of u){const m=n.Tu.get(c);o=o.unionWith(m.view.nu)}return o}}function eS(i){const e=Ae(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=XA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=OO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CO.bind(null,e),e.Pu.H_=pO.bind(null,e.eventManager),e.Pu.yu=gO.bind(null,e.eventManager),e}function MO(i){const e=Ae(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=IO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xO.bind(null,e),e}class gf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Lf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return LN(this.persistence,new VN,e.initialUser,this.serializer)}Cu(e){return new LA(Cg.mi,this.serializer)}Du(e){return new FN}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gf.provider={build:()=>new gf};class VO extends gf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ue(this.persistence.referenceDelegate instanceof mf,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new vN(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?wn.withCacheSize(this.cacheSizeBytes):wn.DEFAULT;return new LA((s=>mf.mi(s,n)),this.serializer)}}class qp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>u0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=NO.bind(null,this.syncEngine),await fO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new mO})()}createDatastore(e){const n=Lf(e.databaseInfo.databaseId),s=(function(u){return new $N(u)})(e.databaseInfo);return(function(u,c,m,p){return new ZN(u,c,m,p)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,u,c,m){return new tO(s,o,u,c,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>u0(this.syncEngine,n,0)),(function(){return i0.v()?new i0:new GN})())}createSyncEngine(e,n){return(function(o,u,c,m,p,g,v){const b=new EO(o,u,c,m,p,g);return v&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=Ae(n);ue(Na,"RemoteStore shutting down."),s.Ea.add(5),await Yu(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}qp.provider={build:()=>new qp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Mr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new re(X.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(o,u){const c=Ae(o),m={documents:u.map((b=>df(c.serializer,b)))},p=await c.Ho("BatchGetDocuments",c.serializer.databaseId,We.emptyPath(),m,u.length),g=new Map;p.forEach((b=>{const A=nN(c.serializer,b);g.set(A.key.toString(),A)}));const v=[];return u.forEach((b=>{const A=g.get(b.toString());Ue(!!A,55234,{key:b}),v.push(A)})),v})(this.datastore,e);return n.forEach((s=>this.recordVersion(s))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new kf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,s)=>{const o=me.fromPath(s);this.mutations.push(new bA(o,this.precondition(o)))})),await(async function(s,o){const u=Ae(s),c={writes:o.map((m=>NA(u.serializer,m)))};await u.Go("Commit",u.serializer.databaseId,We.emptyPath(),c)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ye(50498,{Gu:e.constructor.name});n=Te.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!n.isEqual(s))throw new re(X.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Te.min())?sn.exists(!1):sn.updateTime(n):sn.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Te.min()))throw new re(X.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return sn.updateTime(n)}return sn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(e,n,s,o,u){this.asyncQueue=e,this.datastore=n,this.options=s,this.updateFunction=o,this.deferred=u,this.zu=s.maxAttempts,this.M_=new Dg(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new kO(this.datastore),n=this.Hu(e);n&&n.then((s=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(s)})).catch((o=>{this.Yu(o)}))))})).catch((s=>{this.Yu(s)}))}))}Hu(e){try{const n=this.updateFunction(e);return!Gu(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!AA(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps="FirestoreClient";class LO{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=un.UNAUTHENTICATED,this.clientId=gg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async c=>{ue(Ps,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(ue(Ps,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new pi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Pg(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function cp(i,e){i.asyncQueue.verifyOperationInProgress(),ue(Ps,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener((async o=>{s.isEqual(o)||(await UA(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function h0(i,e){i.asyncQueue.verifyOperationInProgress();const n=await UO(i);ue(Ps,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((s=>s0(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,o)=>s0(e.remoteStore,o))),i._onlineComponents=e}async function UO(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){ue(Ps,"Using user provided OfflineComponentProvider");try{await cp(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===X.FAILED_PRECONDITION||o.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;Uo("Error using user provided cache. Falling back to memory cache: "+n),await cp(i,new gf)}}else ue(Ps,"Using default OfflineComponentProvider"),await cp(i,new VO(void 0));return i._offlineComponents}async function Fg(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(ue(Ps,"Using user provided OnlineComponentProvider"),await h0(i,i._uninitializedComponentsProvider._online)):(ue(Ps,"Using default OnlineComponentProvider"),await h0(i,new qp))),i._onlineComponents}function jO(i){return Fg(i).then((e=>e.syncEngine))}function tS(i){return Fg(i).then((e=>e.datastore))}async function yf(i){const e=await Fg(i),n=e.eventManager;return n.onListen=TO.bind(null,e.syncEngine),n.onUnlisten=SO.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=bO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=wO.bind(null,e.syncEngine),n}function zO(i,e,n={}){const s=new pi;return i.asyncQueue.enqueueAndForget((async()=>(function(u,c,m,p,g){const v=new Hg({next:A=>{v.Nu(),c.enqueueAndForget((()=>Ug(u,b)));const C=A.docs.has(m);!C&&A.fromCache?g.reject(new re(X.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&A.fromCache&&p&&p.source==="server"?g.reject(new re(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(A)},error:A=>g.reject(A)}),b=new zg(Df(m.path),v,{includeMetadataChanges:!0,qa:!0});return Lg(u,b)})(await yf(i),i.asyncQueue,e,n,s))),s.promise}function BO(i,e,n={}){const s=new pi;return i.asyncQueue.enqueueAndForget((async()=>(function(u,c,m,p,g){const v=new Hg({next:A=>{v.Nu(),c.enqueueAndForget((()=>Ug(u,b))),A.fromCache&&p.source==="server"?g.reject(new re(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(A)},error:A=>g.reject(A)}),b=new zg(m,v,{includeMetadataChanges:!0,qa:!0});return Lg(u,b)})(await yf(i),i.asyncQueue,e,n,s))),s.promise}function qO(i,e,n){const s=new pi;return i.asyncQueue.enqueueAndForget((async()=>{try{const o=await tS(i);s.resolve((async function(c,m,p){const g=Ae(c),{request:v,gt:b,parent:A}=aN(g.serializer,CD(m),p);g.connection.$o||delete v.parent;const C=(await g.Ho("RunAggregationQuery",g.serializer.databaseId,A,v,1)).filter((B=>!!B.result));Ue(C.length===1,64727);const D=C[0].result?.aggregateFields;return Object.keys(D).reduce(((B,M)=>(B[b[M]]=D[M],B)),{})})(o,e,n))}catch(o){s.reject(o)}})),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS="firestore.googleapis.com",d0=!0;class m0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new re(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=iS,this.ssl=d0}else this.host=e.host,this.ssl=e.ssl??d0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=PA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<yN)throw new re(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}eD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nS(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new re(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new re(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new re(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zf{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new m0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new m0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new F2;switch(s.type){case"firstParty":return new Y2(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new re(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=f0.get(n);s&&(ue("ComponentProvider","Removing Datastore"),f0.delete(n),s.terminate())})(this),Promise.resolve()}}function HO(i,e,n,s={}){i=cn(i,zf);const o=Us(e),u=i._getSettings(),c={...u,emulatorOptions:i._getEmulatorOptions()},m=`${e}:${n}`;o&&(eg(`https://${m}`),tg("Firestore",!0)),u.host!==iS&&u.host!==m&&Uo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...u,host:m,ssl:o,emulatorOptions:s};if(!Ra(p,c)&&(i._setSettings(p),s.mockUserToken)){let g,v;if(typeof s.mockUserToken=="string")g=s.mockUserToken,v=un.MOCK_USER;else{g=W0(s.mockUserToken,i._app?.options.projectId);const b=s.mockUserToken.sub||s.mockUserToken.user_id;if(!b)throw new re(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new un(b)}i._authCredentials=new G2(new Fb(g,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ir(this.firestore,e,this._query)}}class dt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Is(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dt(this.firestore,e,this._key)}toJSON(){return{type:dt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Fu(n,dt._jsonSchema))return new dt(e,s||null,new me(We.fromString(n.referencePath)))}}dt._jsonSchemaVersion="firestore/documentReference/1.0",dt._jsonSchema={type:Pt("string",dt._jsonSchemaVersion),referencePath:Pt("string")};class Is extends ir{constructor(e,n,s){super(e,n,Df(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dt(this.firestore,null,new me(e))}withConverter(e){return new Is(this.firestore,e,this._path)}}function it(i,e,...n){if(i=rt(i),Gb("collection","path",e),i instanceof zf){const s=We.fromString(e,...n);return IT(s),new Is(i,null,s)}{if(!(i instanceof dt||i instanceof Is))throw new re(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(We.fromString(e,...n));return IT(s),new Is(i.firestore,null,s)}}function st(i,e,...n){if(i=rt(i),arguments.length===1&&(e=gg.newId()),Gb("doc","path",e),i instanceof zf){const s=We.fromString(e,...n);return CT(s),new dt(i,null,new me(s))}{if(!(i instanceof dt||i instanceof Is))throw new re(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(We.fromString(e,...n));return CT(s),new dt(i.firestore,i instanceof Is?i.converter:null,new me(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0="AsyncQueue";class g0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Dg(this,"async_queue_retry"),this._c=()=>{const s=up();s&&ue(p0,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=up();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=up();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new pi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Jo(e))throw e;ue(p0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Mr("INTERNAL UNHANDLED ERROR: ",y0(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=kg.createAndSchedule(this,e,n,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&ye(47125,{Pc:y0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function y0(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(i){return(function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1})(i,["next","error","complete"])}class vi extends zf{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new g0,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new g0(e),this._firestoreClient=void 0,await e}}}function FO(i,e){const n=typeof i=="object"?i:rg(),s=typeof i=="string"?i:of,o=bf(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=Y0("firestore");u&&HO(o,...u)}return o}function el(i){if(i._terminated)throw new re(X.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||GO(i),i._firestoreClient}function GO(i){const e=i._freezeSettings(),n=(function(o,u,c,m){return new fD(o,u,c,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,nS(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new LO(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class QO{constructor(e,n,s){this._userDataWriter=n,this._data=s,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pn(an.fromBase64String(e))}catch(n){throw new re(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Pn(an.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Pn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Fu(e,Pn._jsonSchema))return Pn.fromBase64String(e.bytes)}}Pn._jsonSchemaVersion="firestore/bytes/1.0",Pn._jsonSchema={type:Pt("string",Pn._jsonSchemaVersion),bytes:Pt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new re(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new re(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new re(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Xi._jsonSchemaVersion}}static fromJSON(e){if(Fu(e,Xi._jsonSchema))return new Xi(e.latitude,e.longitude)}}Xi._jsonSchemaVersion="firestore/geoPoint/1.0",Xi._jsonSchema={type:Pt("string",Xi._jsonSchemaVersion),latitude:Pt("number"),longitude:Pt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Wi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Fu(e,Wi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Wi(e.vectorValues);throw new re(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Wi._jsonSchemaVersion="firestore/vectorValue/1.0",Wi._jsonSchema={type:Pt("string",Wi._jsonSchemaVersion),vectorValues:Pt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO=/^__.*__$/;class $O{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new zs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ku(e,this.data,n,this.fieldTransforms)}}class rS{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new zs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function sS(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye(40011,{Ac:i})}}class Gg{constructor(e,n,s,o,u,c){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Gg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return _f(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(sS(this.Ac)&&YO.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class XO{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Lf(e)}Cc(e,n,s,o=!1){return new Gg({Ac:e,methodName:n,Dc:s,path:rn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tl(i){const e=i._freezeSettings(),n=Lf(i._databaseId);return new XO(i._databaseId,!!e.ignoreUndefinedProperties,n)}function Kg(i,e,n,s,o,u={}){const c=i.Cc(u.merge||u.mergeFields?2:0,e,n,o);Yg("Data must be an object, but it was:",c,s);const m=uS(s,c);let p,g;if(u.merge)p=new Ln(c.fieldMask),g=c.fieldTransforms;else if(u.mergeFields){const v=[];for(const b of u.mergeFields){const A=Hp(e,b,n);if(!c.contains(A))throw new re(X.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);hS(v,A)||v.push(A)}p=new Ln(v),g=c.fieldTransforms.filter((b=>p.covers(b.field)))}else p=null,g=c.fieldTransforms;return new $O(new gn(m),p,g)}class qf extends Bf{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qf}}class Qg extends Bf{_toFieldTransform(e){return new UD(e.path,new Ou)}isEqual(e){return e instanceof Qg}}function aS(i,e,n,s){const o=i.Cc(1,e,n);Yg("Data must be an object, but it was:",o,s);const u=[],c=gn.empty();js(s,((p,g)=>{const v=$g(e,p,n);g=rt(g);const b=o.yc(v);if(g instanceof qf)u.push(v);else{const A=Wu(g,b);A!=null&&(u.push(v),c.set(v,A))}}));const m=new Ln(u);return new rS(c,m,o.fieldTransforms)}function oS(i,e,n,s,o,u){const c=i.Cc(1,e,n),m=[Hp(e,s,n)],p=[o];if(u.length%2!=0)throw new re(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<u.length;A+=2)m.push(Hp(e,u[A])),p.push(u[A+1]);const g=[],v=gn.empty();for(let A=m.length-1;A>=0;--A)if(!hS(g,m[A])){const C=m[A];let D=p[A];D=rt(D);const B=c.yc(C);if(D instanceof qf)g.push(C);else{const M=Wu(D,B);M!=null&&(g.push(C),v.set(C,M))}}const b=new Ln(g);return new rS(v,b,c.fieldTransforms)}function lS(i,e,n,s=!1){return Wu(n,i.Cc(s?4:3,e))}function Wu(i,e){if(cS(i=rt(i)))return Yg("Unsupported field value:",e,i),uS(i,e);if(i instanceof Bf)return(function(s,o){if(!sS(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const u=[];let c=0;for(const m of s){let p=Wu(m,o.wc(c));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),c++}return{arrayValue:{values:u}}})(i,e)}return(function(s,o){if((s=rt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return kD(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=lt.fromDate(s);return{timestampValue:ff(o.serializer,u)}}if(s instanceof lt){const u=new lt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:ff(o.serializer,u)}}if(s instanceof Xi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Pn)return{bytesValue:CA(o.serializer,s._byteString)};if(s instanceof dt){const u=o.databaseId,c=s.firestore._databaseId;if(!c.isEqual(u))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:wg(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Wi)return(function(c,m){return{mapValue:{fields:{[eA]:{stringValue:tA},[lf]:{arrayValue:{values:c.toArray().map((g=>{if(typeof g!="number")throw m.Sc("VectorValues must only contain numeric values.");return bg(m.serializer,g)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Rf(s)}`)})(i,e)}function uS(i,e){const n={};return Yb(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):js(i,((s,o)=>{const u=Wu(o,e.mc(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function cS(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof lt||i instanceof Xi||i instanceof Pn||i instanceof dt||i instanceof Bf||i instanceof Wi)}function Yg(i,e,n){if(!cS(n)||!Kb(n)){const s=Rf(n);throw s==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+s)}}function Hp(i,e,n){if((e=rt(e))instanceof Xu)return e._internalPath;if(typeof e=="string")return $g(i,e);throw _f("Field path arguments must be of type string or ",i,!1,void 0,n)}const WO=new RegExp("[~\\*/\\[\\]]");function $g(i,e,n){if(e.search(WO)>=0)throw _f(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Xu(...e.split("."))._internalPath}catch{throw _f(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function _f(i,e,n,s,o){const u=s&&!s.isEmpty(),c=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(u||c)&&(p+=" (found",u&&(p+=` in field ${s}`),c&&(p+=` in document ${o}`),p+=")"),new re(X.INVALID_ARGUMENT,m+i+p)}function hS(i,e){return i.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new JO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Hf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class JO extends ku{data(){return super.data()}}function Hf(i,e){return typeof e=="string"?$g(i,e):e instanceof Xu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fS(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new re(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xg{}class Ff extends Xg{}function Ji(i,e,...n){let s=[];e instanceof Xg&&s.push(e),s=s.concat(n),(function(u){const c=u.filter((p=>p instanceof Wg)).length,m=u.filter((p=>p instanceof Gf)).length;if(c>1||c>0&&m>0)throw new re(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)i=o._apply(i);return i}class Gf extends Ff{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Gf(e,n,s)}_apply(e){const n=this._parse(e);return dS(e._query,n),new ir(e.firestore,e.converter,Vp(e._query,n))}_parse(e){const n=tl(e.firestore);return(function(u,c,m,p,g,v,b){let A;if(g.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new re(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){E0(b,v);const D=[];for(const B of b)D.push(v0(p,u,B));A={arrayValue:{values:D}}}else A=v0(p,u,b)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||E0(b,v),A=lS(m,c,b,v==="in"||v==="not-in");return kt.create(g,v,A)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function xr(i,e,n){const s=e,o=Hf("where",i);return Gf._create(o,s,n)}class Wg extends Xg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Wg(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:_i.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let c=o;const m=u.getFlattenedFilters();for(const p of m)dS(c,p),c=Vp(c,p)})(e._query,n),new ir(e.firestore,e.converter,Vp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Jg extends Ff{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Jg(e,n)}_apply(e){const n=(function(o,u,c){if(o.startAt!==null)throw new re(X.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new re(X.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Nu(u,c)})(e._query,this._field,this._direction);return new ir(e.firestore,e.converter,(function(o,u){const c=o.explicitOrderBy.concat([u]);return new Va(o.path,o.collectionGroup,c,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function hp(i,e="asc"){const n=e,s=Hf("orderBy",i);return Jg._create(s,n)}class Zg extends Ff{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new Zg(e,n,s)}_apply(e){return new ir(e.firestore,e.converter,cf(e._query,this._limit,this._limitType))}}function fp(i){return Zg._create("limit",i,"F")}class ey extends Ff{constructor(e,n,s){super(),this.type=e,this._docOrFields=n,this._inclusive=s}static _create(e,n,s){return new ey(e,n,s)}_apply(e){const n=eM(e,this.type,this._docOrFields,this._inclusive);return new ir(e.firestore,e.converter,(function(o,u){return new Va(o.path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,u,o.endAt)})(e._query,n))}}function ZO(...i){return ey._create("startAfter",i,!1)}function eM(i,e,n,s){if(n[0]=rt(n[0]),n[0]instanceof ku)return(function(u,c,m,p,g){if(!p)throw new re(X.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${m}().`);const v=[];for(const b of Po(u))if(b.field.isKeyField())v.push(uf(c,p.key));else{const A=p.data.field(b.field);if(If(A))throw new re(X.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(A===null){const C=b.field.canonicalString();throw new re(X.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${C}' (used as the orderBy) does not exist.`)}v.push(A)}return new qo(v,g)})(i._query,i.firestore._databaseId,e,n[0]._document,s);{const o=tl(i.firestore);return(function(c,m,p,g,v,b){const A=c.explicitOrderBy;if(v.length>A.length)throw new re(X.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const C=[];for(let D=0;D<v.length;D++){const B=v[D];if(A[D].field.isKeyField()){if(typeof B!="string")throw new re(X.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof B}`);if(!Tg(c)&&B.indexOf("/")!==-1)throw new re(X.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${B}' contains a slash.`);const M=c.path.child(We.fromString(B));if(!me.isDocumentKey(M))throw new re(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${M}' is not because it contains an odd number of segments.`);const Y=new me(M);C.push(uf(m,Y))}else{const M=lS(p,g,B);C.push(M)}}return new qo(C,b)})(i._query,i.firestore._databaseId,o,e,n,s)}}function v0(i,e,n){if(typeof(n=rt(n))=="string"){if(n==="")throw new re(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Tg(e)&&n.indexOf("/")!==-1)throw new re(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(We.fromString(n));if(!me.isDocumentKey(s))throw new re(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return uf(i,new me(s))}if(n instanceof dt)return uf(i,n._key);throw new re(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rf(n)}.`)}function E0(i,e){if(!Array.isArray(i)||i.length===0)throw new re(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function dS(i,e){const n=(function(o,u){for(const c of o)for(const m of c.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new re(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new re(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class mS{convertValue(e,n="none"){switch(Vs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ms(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ye(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return js(e,((o,u)=>{s[o]=this.convertValue(u,n)})),s}convertVectorValue(e){const n=e.fields?.[lf].arrayValue?.values?.map((s=>At(s.doubleValue)));return new Wi(n)}convertGeoPoint(e){return new Xi(At(e.latitude),At(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=xf(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Iu(e));default:return null}}convertTimestamp(e){const n=Os(e);return new lt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=We.fromString(e);Ue(kA(s),9688,{name:e});const o=new xu(s.get(1),s.get(3)),u=new me(s.popFirst(5));return o.isEqual(n)||Mr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(i,e,n){let s;return s=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,s}class tM extends mS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new dt(this.firestore,null,n)}}function nM(){return new KO("count")}class No{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xs extends ku{constructor(e,n,s,o,u,c){super(e,n,s,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Yh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Hf("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new re(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=xs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}xs._jsonSchemaVersion="firestore/documentSnapshot/1.0",xs._jsonSchema={type:Pt("string",xs._jsonSchemaVersion),bundleSource:Pt("string","DocumentSnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class Yh extends xs{data(e={}){return super.data(e)}}class Aa{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new No(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new Yh(this._firestore,this._userDataWriter,s.key,s,new No(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new re(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((m=>{const p=new Yh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new No(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const p=new Yh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new No(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,v=-1;return m.type!==0&&(g=c.indexOf(m.doc.key),c=c.delete(m.doc.key)),m.type!==1&&(c=c.add(m.doc),v=c.indexOf(m.doc.key)),{type:iM(m.type),doc:p,oldIndex:g,newIndex:v}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new re(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Aa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=gg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function iM(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bs(i){i=cn(i,dt);const e=cn(i.firestore,vi);return zO(el(e),i._key).then((n=>yS(e,i,n)))}Aa._jsonSchemaVersion="firestore/querySnapshot/1.0",Aa._jsonSchema={type:Pt("string",Aa._jsonSchemaVersion),bundleSource:Pt("string","QuerySnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class Ju extends mS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new dt(this.firestore,null,n)}}function yn(i){i=cn(i,ir);const e=cn(i.firestore,vi),n=el(e),s=new Ju(e);return fS(i._query),BO(n,i._query).then((o=>new Aa(e,s,i,o)))}function Go(i,e,n){i=cn(i,dt);const s=cn(i.firestore,vi),o=ty(i.converter,e,n);return Kf(s,[Kg(tl(s),"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,sn.none())])}function gi(i,e,n,...s){i=cn(i,dt);const o=cn(i.firestore,vi),u=tl(o);let c;return c=typeof(e=rt(e))=="string"||e instanceof Xu?oS(u,"updateDoc",i._key,e,n,s):aS(u,"updateDoc",i._key,e),Kf(o,[c.toMutation(i._key,sn.exists(!0))])}function pS(i){return Kf(cn(i.firestore,vi),[new kf(i._key,sn.none())])}function gS(i,e){const n=cn(i.firestore,vi),s=st(i),o=ty(i.converter,e);return Kf(n,[Kg(tl(i.firestore),"addDoc",s._key,o,i.converter!==null,{}).toMutation(s._key,sn.exists(!1))]).then((()=>s))}function ny(i,...e){i=rt(i);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||_0(e[s])||(n=e[s++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(_0(e[s])){const p=e[s];e[s]=p.next?.bind(p),e[s+1]=p.error?.bind(p),e[s+2]=p.complete?.bind(p)}let u,c,m;if(i instanceof dt)c=cn(i.firestore,vi),m=Df(i._key.path),u={next:p=>{e[s]&&e[s](yS(c,i,p))},error:e[s+1],complete:e[s+2]};else{const p=cn(i,ir);c=cn(p.firestore,vi),m=p._query;const g=new Ju(c);u={next:v=>{e[s]&&e[s](new Aa(c,g,p,v))},error:e[s+1],complete:e[s+2]},fS(i._query)}return(function(g,v,b,A){const C=new Hg(A),D=new zg(v,C,b);return g.asyncQueue.enqueueAndForget((async()=>Lg(await yf(g),D))),()=>{C.Nu(),g.asyncQueue.enqueueAndForget((async()=>Ug(await yf(g),D)))}})(el(c),m,o,u)}function Kf(i,e){return(function(s,o){const u=new pi;return s.asyncQueue.enqueueAndForget((async()=>RO(await jO(s),o,u))),u.promise})(el(i),e)}function yS(i,e,n){const s=n.docs.get(e._key),o=new Ju(i);return new xs(i,o,e._key,s,new No(n.hasPendingWrites,n.fromCache),e.converter)}function Oo(i){return rM(i,{count:nM()})}function rM(i,e){const n=cn(i.firestore,vi),s=el(n),o=cD(e,((u,c)=>new GD(c,u.aggregateType,u._internalFieldPath)));return qO(s,i._query,o).then((u=>(function(m,p,g){const v=new Ju(m);return new QO(p,v,g)})(n,i,u)))}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sM={maxAttempts:5};function pu(i,e){if((i=rt(i)).firestore!==e)throw new re(X.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=tl(e)}get(e){const n=pu(e,this._firestore),s=new tM(this._firestore);return this._transaction.lookup([n._key]).then((o=>{if(!o||o.length!==1)return ye(24041);const u=o[0];if(u.isFoundDocument())return new ku(this._firestore,s,u.key,u,n.converter);if(u.isNoDocument())return new ku(this._firestore,s,n._key,null,n.converter);throw ye(18433,{doc:u})}))}set(e,n,s){const o=pu(e,this._firestore),u=ty(o.converter,n,s),c=Kg(this._dataReader,"Transaction.set",o._key,u,o.converter!==null,s);return this._transaction.set(o._key,c),this}update(e,n,s,...o){const u=pu(e,this._firestore);let c;return c=typeof(n=rt(n))=="string"||n instanceof Xu?oS(this._dataReader,"Transaction.update",u._key,n,s,o):aS(this._dataReader,"Transaction.update",u._key,n),this._transaction.update(u._key,c),this}delete(e){const n=pu(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM extends aM{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=pu(e,this._firestore),s=new Ju(this._firestore);return super.get(e).then((o=>new xs(this._firestore,s,n._key,o._document,new No(!1,!1),n.converter)))}}function lM(i,e,n){i=cn(i,vi);const s={...sM,...n};return(function(u){if(u.maxAttempts<1)throw new re(X.INVALID_ARGUMENT,"Max attempts must be at least 1")})(s),(function(u,c,m){const p=new pi;return u.asyncQueue.enqueueAndForget((async()=>{const g=await tS(u);new PO(u.asyncQueue,g,m,c,p).ju()})),p.promise})(el(i),(o=>e(new oM(i,o))),s)}function Zi(){return new Qg("serverTimestamp")}(function(e,n=!0){(function(o){Xo=o})(Ma),Ca(new Ds("firestore",((s,{instanceIdentifier:o,options:u})=>{const c=s.getProvider("app").getImmediate(),m=new vi(new K2(s.getProvider("auth-internal")),new $2(c,s.getProvider("app-check-internal")),(function(g,v){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new re(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xu(g.options.projectId,v)})(c,o),c);return u={useFetchStreams:n,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),Qi(AT,ST,e),Qi(AT,ST,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S="firebasestorage.googleapis.com",vS="storageBucket",uM=120*1e3,cM=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t extends nr{constructor(e,n,s=0){super(dp(e),`Firebase Storage: ${n} (${dp(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,_t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return dp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var yt;(function(i){i.UNKNOWN="unknown",i.OBJECT_NOT_FOUND="object-not-found",i.BUCKET_NOT_FOUND="bucket-not-found",i.PROJECT_NOT_FOUND="project-not-found",i.QUOTA_EXCEEDED="quota-exceeded",i.UNAUTHENTICATED="unauthenticated",i.UNAUTHORIZED="unauthorized",i.UNAUTHORIZED_APP="unauthorized-app",i.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",i.INVALID_CHECKSUM="invalid-checksum",i.CANCELED="canceled",i.INVALID_EVENT_NAME="invalid-event-name",i.INVALID_URL="invalid-url",i.INVALID_DEFAULT_BUCKET="invalid-default-bucket",i.NO_DEFAULT_BUCKET="no-default-bucket",i.CANNOT_SLICE_BLOB="cannot-slice-blob",i.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",i.NO_DOWNLOAD_URL="no-download-url",i.INVALID_ARGUMENT="invalid-argument",i.INVALID_ARGUMENT_COUNT="invalid-argument-count",i.APP_DELETED="app-deleted",i.INVALID_ROOT_OPERATION="invalid-root-operation",i.INVALID_FORMAT="invalid-format",i.INTERNAL_ERROR="internal-error",i.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(yt||(yt={}));function dp(i){return"storage/"+i}function iy(){const i="An unknown error occurred, please check the error payload for server response.";return new _t(yt.UNKNOWN,i)}function hM(i){return new _t(yt.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")}function fM(i){return new _t(yt.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function dM(){const i="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new _t(yt.UNAUTHENTICATED,i)}function mM(){return new _t(yt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function pM(i){return new _t(yt.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")}function gM(){return new _t(yt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function yM(){return new _t(yt.CANCELED,"User canceled the upload/download.")}function _M(i){return new _t(yt.INVALID_URL,"Invalid URL '"+i+"'.")}function vM(i){return new _t(yt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}function EM(){return new _t(yt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+vS+"' property when initializing the app?")}function TM(){return new _t(yt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function bM(){return new _t(yt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function AM(i){return new _t(yt.UNSUPPORTED_ENVIRONMENT,`${i} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Fp(i){return new _t(yt.INVALID_ARGUMENT,i)}function ES(){return new _t(yt.APP_DELETED,"The Firebase app was deleted.")}function SM(i){return new _t(yt.INVALID_ROOT_OPERATION,"The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function bu(i,e){return new _t(yt.INVALID_FORMAT,"String does not match format '"+i+"': "+e)}function uu(i){throw new _t(yt.INTERNAL_ERROR,"Internal error: "+i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=Un.makeFromUrl(e,n)}catch{return new Un(e,"")}if(s.path==="")return s;throw vM(e)}static makeFromUrl(e,n){let s=null;const o="([A-Za-z0-9.\\-_]+)";function u(he){he.path.charAt(he.path.length-1)==="/"&&(he.path_=he.path_.slice(0,-1))}const c="(/(.*))?$",m=new RegExp("^gs://"+o+c,"i"),p={bucket:1,path:3};function g(he){he.path_=decodeURIComponent(he.path)}const v="v[A-Za-z0-9_]+",b=n.replace(/[.]/g,"\\."),A="(/([^?#]*).*)?$",C=new RegExp(`^https?://${b}/${v}/b/${o}/o${A}`,"i"),D={bucket:1,path:3},B=n===_S?"(?:storage.googleapis.com|storage.cloud.google.com)":n,M="([^?#]*)",Y=new RegExp(`^https?://${B}/${o}/${M}`,"i"),ie=[{regex:m,indices:p,postModify:u},{regex:C,indices:D,postModify:g},{regex:Y,indices:{bucket:1,path:2},postModify:g}];for(let he=0;he<ie.length;he++){const Ee=ie[he],ae=Ee.regex.exec(e);if(ae){const I=ae[Ee.indices.bucket];let R=ae[Ee.indices.path];R||(R=""),s=new Un(I,R),Ee.postModify(s);break}}if(s==null)throw _M(e);return s}}class wM{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RM(i,e,n){let s=1,o=null,u=null,c=!1,m=0;function p(){return m===2}let g=!1;function v(...M){g||(g=!0,e.apply(null,M))}function b(M){o=setTimeout(()=>{o=null,i(C,p())},M)}function A(){u&&clearTimeout(u)}function C(M,...Y){if(g){A();return}if(M){A(),v.call(null,M,...Y);return}if(p()||c){A(),v.call(null,M,...Y);return}s<64&&(s*=2);let ie;m===1?(m=2,ie=0):ie=(s+Math.random())*1e3,b(ie)}let D=!1;function B(M){D||(D=!0,A(),!g&&(o!==null?(M||(m=2),clearTimeout(o),b(0)):M||(m=1)))}return b(0),u=setTimeout(()=>{c=!0,B(!0)},n),B}function CM(i){i(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IM(i){return i!==void 0}function xM(i){return typeof i=="object"&&!Array.isArray(i)}function ry(i){return typeof i=="string"||i instanceof String}function T0(i){return sy()&&i instanceof Blob}function sy(){return typeof Blob<"u"}function b0(i,e,n,s){if(s<e)throw Fp(`Invalid value for '${i}'. Expected ${e} or greater.`);if(s>n)throw Fp(`Invalid value for '${i}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(i,e,n){let s=e;return n==null&&(s=`https://${e}`),`${n}://${s}/v0${i}`}function TS(i){const e=encodeURIComponent;let n="?";for(const s in i)if(i.hasOwnProperty(s)){const o=e(s)+"="+e(i[s]);n=n+o+"&"}return n=n.slice(0,-1),n}var Sa;(function(i){i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT"})(Sa||(Sa={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DM(i,e){const n=i>=500&&i<600,o=[408,429].indexOf(i)!==-1,u=e.indexOf(i)!==-1;return n||o||u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(e,n,s,o,u,c,m,p,g,v,b,A=!0,C=!1){this.url_=e,this.method_=n,this.headers_=s,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=c,this.callback_=m,this.errorCallback_=p,this.timeout_=g,this.progressCallback_=v,this.connectionFactory_=b,this.retry=A,this.isUsingEmulator=C,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((D,B)=>{this.resolve_=D,this.reject_=B,this.start_()})}start_(){const e=(s,o)=>{if(o){s(!1,new kh(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const c=m=>{const p=m.loaded,g=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,g)};this.progressCallback_!==null&&u.addUploadProgressListener(c),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(c),this.pendingConnection_=null;const m=u.getErrorCode()===Sa.NO_ERROR,p=u.getStatus();if(!m||DM(p,this.additionalRetryCodes_)&&this.retry){const v=u.getErrorCode()===Sa.ABORT;s(!1,new kh(!1,null,v));return}const g=this.successCodes_.indexOf(p)!==-1;s(!0,new kh(g,u))})},n=(s,o)=>{const u=this.resolve_,c=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const p=this.callback_(m,m.getResponse());IM(p)?u(p):u()}catch(p){c(p)}else if(m!==null){const p=iy();p.serverResponse=m.getErrorText(),this.errorCallback_?c(this.errorCallback_(m,p)):c(p)}else if(o.canceled){const p=this.appDelete_?ES():yM();c(p)}else{const p=gM();c(p)}};this.canceled_?n(!1,new kh(!1,null,!0)):this.backoffId_=RM(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&CM(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class kh{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function OM(i,e){e!==null&&e.length>0&&(i.Authorization="Firebase "+e)}function MM(i,e){i["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function VM(i,e){e&&(i["X-Firebase-GMPID"]=e)}function kM(i,e){e!==null&&(i["X-Firebase-AppCheck"]=e)}function PM(i,e,n,s,o,u,c=!0,m=!1){const p=TS(i.urlParams),g=i.url+p,v=Object.assign({},i.headers);return VM(v,e),OM(v,n),MM(v,u),kM(v,s),new NM(g,i.method,v,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,o,c,m)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LM(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function UM(...i){const e=LM();if(e!==void 0){const n=new e;for(let s=0;s<i.length;s++)n.append(i[s]);return n.getBlob()}else{if(sy())return new Blob(i);throw new _t(yt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function jM(i,e,n){return i.webkitSlice?i.webkitSlice(e,n):i.mozSlice?i.mozSlice(e,n):i.slice?i.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zM(i){if(typeof atob>"u")throw AM("base-64");return atob(i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class mp{constructor(e,n){this.data=e,this.contentType=n||null}}function BM(i,e){switch(i){case Ki.RAW:return new mp(bS(e));case Ki.BASE64:case Ki.BASE64URL:return new mp(AS(i,e));case Ki.DATA_URL:return new mp(HM(e),FM(e))}throw iy()}function bS(i){const e=[];for(let n=0;n<i.length;n++){let s=i.charCodeAt(n);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<i.length-1&&(i.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const u=s,c=i.charCodeAt(++n);s=65536|(u&1023)<<10|c&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function qM(i){let e;try{e=decodeURIComponent(i)}catch{throw bu(Ki.DATA_URL,"Malformed data URL.")}return bS(e)}function AS(i,e){switch(i){case Ki.BASE64:{const o=e.indexOf("-")!==-1,u=e.indexOf("_")!==-1;if(o||u)throw bu(i,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Ki.BASE64URL:{const o=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(o||u)throw bu(i,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=zM(e)}catch(o){throw o.message.includes("polyfill")?o:bu(i,"Invalid character found")}const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s}class SS{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw bu(Ki.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=GM(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function HM(i){const e=new SS(i);return e.base64?AS(Ki.BASE64,e.rest):qM(e.rest)}function FM(i){return new SS(i).contentType}function GM(i,e){return i.length>=e.length?i.substring(i.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,n){let s=0,o="";T0(e)?(this.data_=e,s=e.size,o=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,n){if(T0(this.data_)){const s=this.data_,o=jM(s,e,n);return o===null?null:new As(o)}else{const s=new Uint8Array(this.data_.buffer,e,n-e);return new As(s,!0)}}static getBlob(...e){if(sy()){const n=e.map(s=>s instanceof As?s.data_:s);return new As(UM.apply(null,n))}else{const n=e.map(c=>ry(c)?BM(Ki.RAW,c).data:c.data_);let s=0;n.forEach(c=>{s+=c.byteLength});const o=new Uint8Array(s);let u=0;return n.forEach(c=>{for(let m=0;m<c.length;m++)o[u++]=c[m]}),new As(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wS(i){let e;try{e=JSON.parse(i)}catch{return null}return xM(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KM(i){if(i.length===0)return null;const e=i.lastIndexOf("/");return e===-1?"":i.slice(0,e)}function QM(i,e){const n=e.split("/").filter(s=>s.length>0).join("/");return i.length===0?n:i+"/"+n}function RS(i){const e=i.lastIndexOf("/",i.length-2);return e===-1?i:i.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YM(i,e){return e}class pn{constructor(e,n,s,o){this.server=e,this.local=n||e,this.writable=!!s,this.xform=o||YM}}let Ph=null;function $M(i){return!ry(i)||i.length<2?i:RS(i)}function CS(){if(Ph)return Ph;const i=[];i.push(new pn("bucket")),i.push(new pn("generation")),i.push(new pn("metageneration")),i.push(new pn("name","fullPath",!0));function e(u,c){return $M(c)}const n=new pn("name");n.xform=e,i.push(n);function s(u,c){return c!==void 0?Number(c):c}const o=new pn("size");return o.xform=s,i.push(o),i.push(new pn("timeCreated")),i.push(new pn("updated")),i.push(new pn("md5Hash",null,!0)),i.push(new pn("cacheControl",null,!0)),i.push(new pn("contentDisposition",null,!0)),i.push(new pn("contentEncoding",null,!0)),i.push(new pn("contentLanguage",null,!0)),i.push(new pn("contentType",null,!0)),i.push(new pn("metadata","customMetadata",!0)),Ph=i,Ph}function XM(i,e){function n(){const s=i.bucket,o=i.fullPath,u=new Un(s,o);return e._makeStorageReference(u)}Object.defineProperty(i,"ref",{get:n})}function WM(i,e,n){const s={};s.type="file";const o=n.length;for(let u=0;u<o;u++){const c=n[u];s[c.local]=c.xform(s,e[c.server])}return XM(s,i),s}function IS(i,e,n){const s=wS(e);return s===null?null:WM(i,s,n)}function JM(i,e,n,s){const o=wS(e);if(o===null||!ry(o.downloadTokens))return null;const u=o.downloadTokens;if(u.length===0)return null;const c=encodeURIComponent;return u.split(",").map(g=>{const v=i.bucket,b=i.fullPath,A="/b/"+c(v)+"/o/"+c(b),C=Qf(A,n,s),D=TS({alt:"media",token:g});return C+D})[0]}function ZM(i,e){const n={},s=e.length;for(let o=0;o<s;o++){const u=e[o];u.writable&&(n[u.server]=i[u.local])}return JSON.stringify(n)}class ay{constructor(e,n,s,o){this.url=e,this.method=n,this.handler=s,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(i){if(!i)throw iy()}function eV(i,e){function n(s,o){const u=IS(i,o,e);return xS(u!==null),u}return n}function tV(i,e){function n(s,o){const u=IS(i,o,e);return xS(u!==null),JM(u,o,i.host,i._protocol)}return n}function DS(i){function e(n,s){let o;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?o=mM():o=dM():n.getStatus()===402?o=fM(i.bucket):n.getStatus()===403?o=pM(i.path):o=s,o.status=n.getStatus(),o.serverResponse=s.serverResponse,o}return e}function NS(i){const e=DS(i);function n(s,o){let u=e(s,o);return s.getStatus()===404&&(u=hM(i.path)),u.serverResponse=o.serverResponse,u}return n}function nV(i,e,n){const s=e.fullServerUrl(),o=Qf(s,i.host,i._protocol),u="GET",c=i.maxOperationRetryTime,m=new ay(o,u,tV(i,n),c);return m.errorHandler=NS(e),m}function iV(i,e){const n=e.fullServerUrl(),s=Qf(n,i.host,i._protocol),o="DELETE",u=i.maxOperationRetryTime;function c(p,g){}const m=new ay(s,o,c,u);return m.successCodes=[200,204],m.errorHandler=NS(e),m}function rV(i,e){return i&&i.contentType||e&&e.type()||"application/octet-stream"}function sV(i,e,n){const s=Object.assign({},n);return s.fullPath=i.path,s.size=e.size(),s.contentType||(s.contentType=rV(null,e)),s}function aV(i,e,n,s,o){const u=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function m(){let ie="";for(let he=0;he<2;he++)ie=ie+Math.random().toString().slice(2);return ie}const p=m();c["Content-Type"]="multipart/related; boundary="+p;const g=sV(e,s,o),v=ZM(g,n),b="--"+p+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+v+`\r
--`+p+`\r
Content-Type: `+g.contentType+`\r
\r
`,A=`\r
--`+p+"--",C=As.getBlob(b,s,A);if(C===null)throw TM();const D={name:g.fullPath},B=Qf(u,i.host,i._protocol),M="POST",Y=i.maxUploadRetryTime,$=new ay(B,M,eV(i,n),Y);return $.urlParams=D,$.headers=c,$.body=C.uploadData(),$.errorHandler=DS(e),$}class oV{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Sa.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Sa.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Sa.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,s,o,u){if(this.sent_)throw uu("cannot .send() more than once");if(Us(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),u!==void 0)for(const c in u)u.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,u[c].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw uu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw uu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw uu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw uu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class lV extends oV{initXhr(){this.xhr_.responseType="text"}}function oy(){return new lV}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,n){this._service=e,n instanceof Un?this._location=n:this._location=Un.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Oa(e,n)}get root(){const e=new Un(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return RS(this._location.path)}get storage(){return this._service}get parent(){const e=KM(this._location.path);if(e===null)return null;const n=new Un(this._location.bucket,e);return new Oa(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw SM(e)}}function uV(i,e,n){i._throwIfRoot("uploadBytes");const s=aV(i.storage,i._location,CS(),new As(e,!0),n);return i.storage.makeRequestWithTokens(s,oy).then(o=>({metadata:o,ref:i}))}function cV(i){i._throwIfRoot("getDownloadURL");const e=nV(i.storage,i._location,CS());return i.storage.makeRequestWithTokens(e,oy).then(n=>{if(n===null)throw bM();return n})}function hV(i){i._throwIfRoot("deleteObject");const e=iV(i.storage,i._location);return i.storage.makeRequestWithTokens(e,oy)}function fV(i,e){const n=QM(i._location.path,e),s=new Un(i._location.bucket,n);return new Oa(i.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dV(i){return/^[A-Za-z]+:\/\//.test(i)}function mV(i,e){return new Oa(i,e)}function OS(i,e){if(i instanceof ly){const n=i;if(n._bucket==null)throw EM();const s=new Oa(n,n._bucket);return e!=null?OS(s,e):s}else return e!==void 0?fV(i,e):i}function pV(i,e){if(e&&dV(e)){if(i instanceof ly)return mV(i,e);throw Fp("To use ref(service, url), the first argument must be a Storage instance.")}else return OS(i,e)}function A0(i,e){const n=e?.[vS];return n==null?null:Un.makeFromBucketSpec(n,i)}function gV(i,e,n,s={}){i.host=`${e}:${n}`;const o=Us(e);o&&(eg(`https://${i.host}/b`),tg("Storage",!0)),i._isUsingEmulator=!0,i._protocol=o?"https":"http";const{mockUserToken:u}=s;u&&(i._overrideAuthToken=typeof u=="string"?u:W0(u,i.app.options.projectId))}class ly{constructor(e,n,s,o,u,c=!1){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=o,this._firebaseVersion=u,this._isUsingEmulator=c,this._bucket=null,this._host=_S,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=uM,this._maxUploadRetryTime=cM,this._requests=new Set,o!=null?this._bucket=Un.makeFromBucketSpec(o,this._host):this._bucket=A0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Un.makeFromBucketSpec(this._url,e):this._bucket=A0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){b0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){b0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Rn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Oa(this,e)}_makeRequest(e,n,s,o,u=!0){if(this._deleted)return new wM(ES());{const c=PM(e,this._appId,s,o,n,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,n){const[s,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,o).getPromise()}}const S0="@firebase/storage",w0="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS="storage";function yV(i,e,n){return i=rt(i),uV(i,e,n)}function _V(i){return i=rt(i),cV(i)}function vV(i){return i=rt(i),hV(i)}function R0(i,e){return i=rt(i),pV(i,e)}function EV(i=rg(),e){i=rt(i);const s=bf(i,MS).getImmediate({identifier:e}),o=Y0("storage");return o&&TV(s,...o),s}function TV(i,e,n,s={}){gV(i,e,n,s)}function bV(i,{instanceIdentifier:e}){const n=i.getProvider("app").getImmediate(),s=i.getProvider("auth-internal"),o=i.getProvider("app-check-internal");return new ly(n,s,o,e,Ma)}function AV(){Ca(new Ds(MS,bV,"PUBLIC").setMultipleInstances(!0)),Qi(S0,w0,""),Qi(S0,w0,"esm2020")}AV();const SV={apiKey:"AIzaSyAjxmYzmbSbfUneXaxEKmewWoSfwF8Ld30",authDomain:"mijnfegon.firebaseapp.com",projectId:"mijnfegon",storageBucket:"mijnfegon.firebasestorage.app",messagingSenderId:"415529097955",appId:"1:415529097955:web:da03af79ae2888a58a83d6"},uy=eb(SV),_e=FO(uy),wa=z2(uy),wV=new Gi,C0=EV(uy);wV.setCustomParameters({prompt:"select_account"});function RV({user:i,role:e}){const[n,s]=L.useState(0),[o,u]=L.useState(0),[c,m]=L.useState(0),[p,g]=L.useState(""),[v,b]=L.useState(""),A=$p();L.useEffect(()=>{if(!i)return;const D=st(_e,"users",i.uid),B=ny(D,$=>{if($.exists()){const ie=$.data();s(ie.points_total||0),g(ie.company||"Onbekend bedrijf")}},$=>console.error("Gebruiker error:",$));async function M(){try{const $=Ji(it(_e,"registrations"),xr("installer_uid","==",i.uid)),ie=await Oo($);u(ie.data().count)}catch($){console.warn("Registraties tellen mislukt:",$)}}async function Y(){try{const $=Ji(it(_e,"registrations"),xr("installer_uid","==",i.uid),xr("status","==","pending")),ie=await Oo($);m(ie.data().count)}catch($){console.warn("In afwachting tellen mislukt:",$)}}return M(),Y(),()=>{B()}},[i]);const C=async()=>{await wb(wa),A("/")};return E.jsx("div",{style:Mt.page,children:E.jsxs("div",{style:Mt.container,children:[E.jsxs("header",{style:Mt.header,children:[E.jsxs("div",{children:[E.jsxs("h1",{style:Mt.titel,children:["Welkom terug, ",i.displayName||i.email," "]}),E.jsxs("p",{style:Mt.subtitel,children:["Laatste inlog: ",new Date().toLocaleString()]})]}),E.jsx("button",{onClick:C,style:Mt.logoutBtn,children:"Uitloggen"})]}),E.jsxs("section",{style:Mt.cards,children:[E.jsxs("div",{style:Mt.card,children:[E.jsx("h2",{children:" Beschikbare punten"}),E.jsx("p",{style:Mt.bigText,children:n})]}),E.jsxs("div",{style:Mt.card,children:[E.jsx("h2",{children:" Registraties totaal"}),E.jsx("p",{style:Mt.bigText,children:o})]}),E.jsxs("div",{style:Mt.card,children:[E.jsx("h2",{children:" In afwachting"}),E.jsx("p",{style:Mt.bigText,children:c})]}),E.jsxs("div",{style:Mt.card,children:[E.jsx("h2",{children:" Bedrijf"}),E.jsx("p",{children:p})]})]}),E.jsxs("section",{style:Mt.actions,children:[E.jsx(tn,{to:"/registratie",style:Mt.button,children:" Nieuw apparaat registreren"}),E.jsx(tn,{to:"/shop",style:Mt.buttonOutline,children:" Naar shop"}),E.jsx(tn,{to:"/instellingen",style:Mt.buttonOutline,children:" Instellingen"}),e==="admin"&&E.jsx(tn,{to:"/admin",style:Mt.adminBtn,children:" Adminpaneel"})]}),v&&E.jsx("p",{style:Mt.melding,children:v})]})})}const Mt={page:{fontFamily:"Inter, system-ui, sans-serif",background:"linear-gradient(180deg, #f7f9fc 0%, #eef3fb 100%)",minHeight:"100vh",display:"flex",justifyContent:"center",padding:"2rem"},container:{width:"100%",maxWidth:"1100px",background:"white",borderRadius:"20px",boxShadow:"0 4px 16px rgba(0,0,0,0.08)",padding:"2.5rem"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",background:"#fdfdfd",padding:"1.5rem 2rem",borderRadius:"14px",boxShadow:"0 2px 8px rgba(0,0,0,0.05)",marginBottom:"2rem"},titel:{margin:0,fontSize:"1.8rem",color:"#003366",fontWeight:700},subtitel:{margin:0,color:"#666",fontSize:"0.9rem"},logoutBtn:{background:"#e53935",color:"#fff",border:"none",borderRadius:8,padding:"0.7rem 1.4rem",cursor:"pointer",fontWeight:"bold"},cards:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},card:{background:"#fff",borderRadius:14,padding:"1.6rem",textAlign:"center",boxShadow:"0 2px 8px rgba(0,0,0,0.06)"},bigText:{fontSize:"2.2rem",fontWeight:700,color:"#004aad",marginTop:"0.6rem"},actions:{display:"flex",flexWrap:"wrap",justifyContent:"center",gap:"1rem"},button:{background:"#004aad",color:"#fff",borderRadius:8,padding:"0.9rem 1.6rem",textDecoration:"none",fontWeight:600},buttonOutline:{border:"2px solid #004aad",color:"#004aad",borderRadius:8,padding:"0.9rem 1.6rem",textDecoration:"none",fontWeight:600,background:"transparent"},adminBtn:{background:"#ff9800",color:"#fff",borderRadius:8,padding:"0.9rem 1.6rem",textDecoration:"none",fontWeight:600},melding:{marginTop:"1.5rem",textAlign:"center",color:"#004aad"}};function CV({user:i}){const[e,n]=L.useState([]),[s,o]=L.useState(0),[u,c]=L.useState({}),[m,p]=L.useState(!0),[g,v]=L.useState(!1),[b,A]=L.useState(""),[C,D]=L.useState("");L.useEffect(()=>{if(!i)return;async function ae(){try{p(!0),A("");const I=st(_e,"users",i.uid),R=await Bs(I);if(R.exists()){const j=R.data();o(j.points_total||0)}else o(0);const x=it(_e,"products"),V=(await yn(x)).docs.map(j=>({id:j.id,...j.data()})).filter(j=>j.active!==!1);n(V)}catch(I){console.error("Fout bij laden shop:",I),A("Er ging iets mis bij het laden van de shop.")}finally{p(!1)}}ae()},[i]);const B=ae=>{c(I=>({...I,[ae]:(I[ae]||0)+1}))},M=ae=>{c(I=>{const R={...I};return delete R[ae],R})},Y=(ae,I)=>{const R=Number(I);if(isNaN(R)||R<=0)return M(ae);c(x=>({...x,[ae]:R}))},$=L.useMemo(()=>Object.entries(u).map(([ae,I])=>{const R=e.find(x=>x.id===ae);return R?{...R,quantity:I,lineTotal:R.priceDrops*I}:null}).filter(Boolean),[u,e]),ie=L.useMemo(()=>$.reduce((ae,I)=>ae+I.lineTotal,0),[$]),he=s>=ie,Ee=async()=>{if($.length===0){A("Je winkelwagen is leeg.");return}if(!he){A("Onvoldoende Fegon Drops.");return}A(""),D(""),v(!0);try{const ae=st(_e,"users",i.uid),I=it(_e,"orders");await lM(_e,async R=>{const x=await R.get(ae);if(!x.exists())throw new Error("Gebruiker niet gevonden.");const V=x.data().points_total||0;if(V<ie)throw new Error("Onvoldoende Fegon Drops. Je saldo is tussentijds gewijzigd.");const j=V-ie;R.update(ae,{points_total:j});const N=st(I);R.set(N,{userId:i.uid,items:$.map(Ke=>({productId:Ke.id,name:Ke.name,priceDrops:Ke.priceDrops,quantity:Ke.quantity})),totalDrops:ie,createdAt:Zi(),status:"completed"}),o(j)}),c({}),D("Bestelling succesvol geplaatst! ")}catch(ae){console.error("Checkout fout:",ae),A(ae.message||"Er ging iets mis bij het afrekenen.")}finally{v(!1)}};return m?E.jsx("p",{style:{padding:20},children:" Shop wordt geladen..."}):E.jsxs("div",{style:{padding:"20px",maxWidth:900,margin:"0 auto"},children:[E.jsxs("header",{style:{marginBottom:20},children:[E.jsx("h1",{children:"Fegon Shop"}),E.jsxs("p",{children:["Saldo:"," ",E.jsxs("strong",{children:[s.toLocaleString()," Fegon Drops"]})]})]}),b&&E.jsx("div",{style:{marginBottom:16,padding:10,borderRadius:4,backgroundColor:"#ffe5e5",color:"#a00"},children:b}),C&&E.jsx("div",{style:{marginBottom:16,padding:10,borderRadius:4,backgroundColor:"#e5ffe8",color:"#0a7a26"},children:C}),E.jsxs("section",{style:{marginBottom:40},children:[E.jsx("h2",{children:"Producten"}),e.length===0&&E.jsx("p",{children:"Er zijn nog geen producten beschikbaar."}),E.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:16,marginTop:16},children:e.map(ae=>E.jsxs("div",{style:{border:"1px solid #ddd",borderRadius:8,padding:12,display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:180},children:[E.jsxs("div",{children:[E.jsx("h3",{style:{margin:"0 0 8px"},children:ae.name}),ae.description&&E.jsx("p",{style:{margin:"0 0 8px",fontSize:14},children:ae.description}),E.jsxs("p",{style:{margin:0},children:[E.jsx("strong",{children:ae.priceDrops})," Fegon Drops"]})]}),E.jsx("button",{onClick:()=>B(ae.id),style:{marginTop:10,padding:"6px 10px",borderRadius:4,border:"none",cursor:"pointer",fontWeight:"bold"},children:"In winkelwagen"})]},ae.id))})]}),E.jsxs("section",{children:[E.jsx("h2",{children:"Winkelwagen"}),$.length===0?E.jsx("p",{children:"Je winkelwagen is leeg."}):E.jsxs(E.Fragment,{children:[E.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",marginBottom:16},children:[E.jsx("thead",{children:E.jsxs("tr",{children:[E.jsx("th",{style:{textAlign:"left",padding:8},children:"Product"}),E.jsx("th",{style:{textAlign:"right",padding:8},children:"Prijs"}),E.jsx("th",{style:{textAlign:"right",padding:8},children:"Aantal"}),E.jsx("th",{style:{textAlign:"right",padding:8},children:"Totaal"}),E.jsx("th",{style:{padding:8}})]})}),E.jsx("tbody",{children:$.map(ae=>E.jsxs("tr",{children:[E.jsx("td",{style:{padding:8},children:ae.name}),E.jsxs("td",{style:{padding:8,textAlign:"right"},children:[ae.priceDrops," Drops"]}),E.jsx("td",{style:{padding:8,textAlign:"right"},children:E.jsx("input",{type:"number",min:"1",value:ae.quantity,onChange:I=>Y(ae.id,I.target.value),style:{width:60,textAlign:"right"}})}),E.jsxs("td",{style:{padding:8,textAlign:"right"},children:[ae.lineTotal," Drops"]}),E.jsx("td",{style:{padding:8,textAlign:"center"},children:E.jsx("button",{onClick:()=>M(ae.id),style:{border:"none",background:"transparent",cursor:"pointer",color:"#a00"},children:""})})]},ae.id))})]}),E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:16,flexWrap:"wrap"},children:[E.jsxs("p",{style:{margin:0},children:["Totaal:"," ",E.jsxs("strong",{children:[ie.toLocaleString()," Fegon Drops"]}),!he&&E.jsx("span",{style:{color:"#a00",marginLeft:8},children:"(Onvoldoende saldo)"})]}),E.jsx("button",{onClick:Ee,disabled:!he||g,style:{padding:"8px 16px",borderRadius:4,border:"none",fontWeight:"bold",cursor:he&&!g?"pointer":"not-allowed",opacity:he&&!g?1:.6},children:g?"Bezig met afrekenen...":"Afrekenen"})]})]})]})]})}function IV({user:i}){const[e,n]=L.useState({full_name:"",company:"",phone:"",kvk:"",address:""}),[s,o]=L.useState(!0),[u,c]=L.useState(!1),[m,p]=L.useState("");L.useEffect(()=>{async function b(){if(!i)return;const A=st(_e,"users",i.uid),C=await Bs(A);if(C.exists()){const D=C.data();n({full_name:D.full_name||"",company:D.company||"",phone:D.phone||"",kvk:D.kvk||"",address:D.address||""})}o(!1)}b()},[i]);function g(b){const{name:A,value:C}=b.target;n(D=>({...D,[A]:C}))}async function v(b){b.preventDefault(),c(!0),p("");try{const A=st(_e,"users",i.uid);await gi(A,{...e,updatedAt:new Date}),p(" Gegevens succesvol opgeslagen!")}catch(A){console.error(A),p(" Opslaan mislukt.")}finally{c(!1)}}return s?E.jsx("div",{style:{textAlign:"center"},children:" Laden..."}):E.jsx("div",{style:en.page,children:E.jsxs("div",{style:en.container,children:[E.jsx("h1",{style:en.title,children:" Instellingen"}),E.jsx("p",{style:en.subtitle,children:"Beheer hier je persoonlijke en bedrijfsgegevens."}),E.jsxs("form",{onSubmit:v,style:en.form,children:[E.jsx("label",{style:en.label,children:"Volledige naam *"}),E.jsx("input",{name:"full_name",type:"text",value:e.full_name,onChange:g,required:!0,style:en.input}),E.jsx("label",{style:en.label,children:"Bedrijfsnaam *"}),E.jsx("input",{name:"company",type:"text",value:e.company,onChange:g,required:!0,style:en.input}),E.jsx("label",{style:en.label,children:"Telefoonnummer"}),E.jsx("input",{name:"phone",type:"text",value:e.phone,onChange:g,style:en.input}),E.jsx("label",{style:en.label,children:"KvK-nummer"}),E.jsx("input",{name:"kvk",type:"text",value:e.kvk,onChange:g,style:en.input}),E.jsx("label",{style:en.label,children:"Adres"}),E.jsx("input",{name:"address",type:"text",value:e.address,onChange:g,style:en.input}),E.jsx("button",{type:"submit",style:en.button,disabled:u,children:u?"Opslaan...":"Opslaan"})]}),m&&E.jsx("p",{style:en.message,children:m})]})})}const en={page:{fontFamily:"Inter, system-ui, sans-serif",background:"linear-gradient(180deg, #f7f9fc 0%, #eef3fb 100%)",minHeight:"100vh",display:"flex",justifyContent:"center",alignItems:"flex-start",padding:"3rem 1rem"},container:{width:"100%",maxWidth:"650px",background:"#fff",padding:"2rem",borderRadius:16,boxShadow:"0 4px 16px rgba(0,0,0,0.08)"},title:{margin:0,fontSize:"1.7rem",color:"#003366",fontWeight:700},subtitle:{margin:"0.5rem 0 1.5rem",color:"#666"},form:{display:"flex",flexDirection:"column",gap:"1rem"},label:{fontWeight:600,color:"#003366"},input:{padding:"0.8rem",borderRadius:8,border:"1px solid #ccc",fontSize:"1rem"},button:{background:"#004aad",color:"#fff",border:"none",padding:"0.9rem",borderRadius:8,fontWeight:"bold",cursor:"pointer",marginTop:"1rem"},message:{marginTop:"1.2rem",textAlign:"center",fontWeight:"bold",color:"#004aad"}};function xV({user:i}){const[e,n]=L.useState({installer_full_name:"",installer_company:"",installer_phone:"",installer_kvk:"",installer_address:""}),[s,o]=L.useState(!1),[u,c]=L.useState(!1),[m,p]=L.useState("");function g(b){const{name:A,value:C}=b.target;n(D=>({...D,[A]:C}))}async function v(b){b.preventDefault(),o(!0),p(""),c(!1);try{const A=st(_e,"users",i.uid);(await Bs(A)).exists()?await gi(A,{installer_full_name:e.installer_full_name,installer_company:e.installer_company,installer_phone:e.installer_phone,installer_kvk:e.installer_kvk,installer_address:e.installer_address,profile_completed:!0,updatedAt:Zi()}):await Go(A,{uid:i.uid,email:i.email,role:"user",points_total:0,points_pending:0,createdAt:Zi(),installer_full_name:e.installer_full_name,installer_company:e.installer_company,installer_phone:e.installer_phone,installer_kvk:e.installer_kvk,installer_address:e.installer_address,profile_completed:!0}),c(!0)}catch(A){console.error(" Profiel opslaan mislukt:",A),p("Er is iets misgegaan bij het opslaan van je gegevens. Probeer het opnieuw.")}finally{o(!1)}}return E.jsx("div",{className:"container",style:Ar.page,children:E.jsxs("div",{className:"card",style:Ar.card,children:[E.jsx("h1",{children:"Welkom bij MijnFegon "}),E.jsx("p",{className:"text-muted",style:{marginBottom:"1rem"},children:"Vul onderstaande bedrijfsgegevens aan om toegang te krijgen tot het portaal."}),E.jsxs("form",{onSubmit:v,style:Ar.form,children:[E.jsx("label",{children:"Volledige naam*"}),E.jsx("input",{type:"text",name:"installer_full_name",placeholder:"Bijv. Jan Jansen",value:e.installer_full_name,onChange:g,required:!0,style:Ar.input}),E.jsx("label",{children:"Bedrijfsnaam*"}),E.jsx("input",{type:"text",name:"installer_company",placeholder:"Bijv. Installatiebedrijf Jansen BV",value:e.installer_company,onChange:g,required:!0,style:Ar.input}),E.jsx("label",{children:"Telefoonnummer"}),E.jsx("input",{type:"text",name:"installer_phone",placeholder:"Bijv. 0612345678",value:e.installer_phone,onChange:g,style:Ar.input}),E.jsx("label",{children:"KvK-nummer (optioneel)"}),E.jsx("input",{type:"text",name:"installer_kvk",placeholder:"Bijv. 12345678",value:e.installer_kvk,onChange:g,style:Ar.input}),E.jsx("label",{children:"Adres (optioneel)"}),E.jsx("input",{type:"text",name:"installer_address",placeholder:"Bijv. Dorpsstraat 12, 1234 AB Amsterdam",value:e.installer_address,onChange:g,style:Ar.input}),E.jsx("button",{type:"submit",className:"btn btn-primary",style:Ar.button,disabled:s,children:s?"Opslaan...":"Opslaan en doorgaan"})]}),u&&E.jsx("p",{style:{color:"green",marginTop:"1rem",textAlign:"center"},children:" Gegevens opgeslagen! Je kunt nu verder naar het dashboard."}),m&&E.jsx("p",{style:{color:"red",marginTop:"1rem",textAlign:"center"},children:m})]})})}const Ar={page:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",background:"linear-gradient(180deg, #f7f9fc 0%, #eef3fb 100%)",fontFamily:"Inter, system-ui, sans-serif"},card:{maxWidth:500,width:"100%",background:"#fff",borderRadius:12,padding:"2rem",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},form:{display:"flex",flexDirection:"column",gap:"0.8rem"},input:{padding:"0.8rem",borderRadius:8,border:"1px solid #ccc",fontSize:"1rem"},button:{marginTop:"1rem",background:"#004aad",color:"#fff",border:"none",borderRadius:8,padding:"0.8rem 1.2rem",cursor:"pointer",fontWeight:"bold"}};function DV({user:i}){const[e,n]=L.useState({brand:"",model:"",serial:"",customer_name:"",customer_address:"",customer_postal:"",customer_city:"",customer_email:""}),[s,o]=L.useState(""),[u,c]=L.useState(""),m={Aquastar:["S-500","800 SHE Plus","1000 Duo","1400 SHE Plus","2000 SHE Plus","3010 HE","6010 HE"],Digisofter:["DS-500","DS-900 HE","DS-1200 HE Plus","DS-2000 HE Plus","DS-2820 HE","DS-5220 HE"],Lavigo:["GS-1100 HE Plus","GS-1900 HE Plus"],Kalkfri:["Kalkfri 750","Kalkfri 1100","Kalkfri 1600"],Descale:["Descale 10","Descale 15"],Softy:["Wave"],Talent:["Talent 100BS","Talent 100B","Talent 100M","Talent 200B","Talent 200BL"],Anders:["Anders (handmatig)"]};function p(v){const{name:b,value:A}=v.target;n(C=>({...C,[b]:A}))}async function g(v){v.preventDefault(),o(""),c("");try{await gS(it(_e,"registrations"),{installer_uid:i.uid,installer_email:i.email,...e,status:"pending",points:50,createdAt:Zi()}),o(" Registratie opgeslagen. Wacht op beoordeling door admin."),n({brand:"",model:"",serial:"",customer_name:"",customer_address:"",customer_postal:"",customer_city:"",customer_email:""})}catch(b){c(" Opslaan mislukt: "+b.message)}}return E.jsxs("div",{style:pp.wrap,children:[E.jsx("h1",{children:" Nieuw apparaat registreren"}),E.jsxs("form",{onSubmit:g,style:pp.form,children:[E.jsx("label",{children:"Merk"}),E.jsxs("select",{name:"brand",value:e.brand,onChange:v=>{n(b=>({...b,brand:v.target.value,model:""}))},required:!0,children:[E.jsx("option",{value:"",children:"Kies merk"}),Object.keys(m).map(v=>E.jsx("option",{value:v,children:v},v))]}),e.brand&&E.jsxs(E.Fragment,{children:[E.jsx("label",{children:"Type"}),E.jsxs("select",{name:"model",value:e.model,onChange:p,required:!0,children:[E.jsx("option",{value:"",children:"Kies type"}),m[e.brand].map(v=>E.jsx("option",{value:v,children:v},v))]})]}),E.jsx("label",{children:"Serienummer"}),E.jsx("input",{name:"serial",value:e.serial,onChange:p,required:!0,placeholder:"Bijv. AS123456"}),E.jsx("h3",{children:"Eindklant"}),E.jsx("input",{name:"customer_name",value:e.customer_name,onChange:p,placeholder:"Naam",required:!0}),E.jsx("input",{name:"customer_address",value:e.customer_address,onChange:p,placeholder:"Adres",required:!0}),E.jsx("input",{name:"customer_postal",value:e.customer_postal,onChange:p,placeholder:"Postcode",required:!0}),E.jsx("input",{name:"customer_city",value:e.customer_city,onChange:p,placeholder:"Plaats",required:!0}),E.jsx("input",{name:"customer_email",type:"email",value:e.customer_email,onChange:p,placeholder:"E-mail (optioneel)"}),E.jsx("button",{style:pp.btn,children:" Registreren"})]}),s&&E.jsx("p",{style:{color:"#0a7",marginTop:12},children:s}),u&&E.jsx("p",{style:{color:"#d33",marginTop:12},children:u})]})}const pp={wrap:{maxWidth:640,margin:"2rem auto",background:"#fff",padding:"1.5rem",borderRadius:12,boxShadow:"0 2px 10px rgba(0,0,0,.07)",fontFamily:"system-ui, sans-serif"},form:{display:"grid",gap:"0.6rem"},btn:{marginTop:"0.6rem",background:"#004aad",color:"#fff",border:"none",borderRadius:8,padding:"0.8rem 1.2rem",cursor:"pointer",fontWeight:600}};function NV(){const[i,e]=L.useState(""),[n,s]=L.useState(""),[o,u]=L.useState(""),[c,m]=L.useState(!1),p=new Gi;async function g(C){const D=st(_e,"users",C.uid),B=await Bs(D);B.exists()?await Go(D,{uid:C.uid,email:C.email,name:C.displayName||B.data().name||"",updatedAt:Zi()},{merge:!0}):await Go(D,{uid:C.uid,email:C.email,name:C.displayName||"",role:"user",company:"",points_total:0,points_pending:0,profile_completed:!1,createdAt:Zi(),updatedAt:Zi()})}async function v(){m(!0),u("");try{const C=await $x(wa,p);await g(C.user)}catch(C){console.error(C),u(" "+C.message)}finally{m(!1)}}async function b(){m(!0),u("");try{const C=await Rx(wa,i,n);await g(C.user)}catch(C){let D=" Inloggen mislukt.";C.code==="auth/user-not-found"&&(D=" Geen gebruiker gevonden."),C.code==="auth/wrong-password"&&(D=" Incorrect wachtwoord."),C.code==="auth/invalid-email"&&(D=" Ongeldig e-mailadres."),u(D)}finally{m(!1)}}async function A(){if(!i){u(" Vul eerst je e-mail in.");return}try{await Sx(wa,i),u(" Reset e-mail verzonden!")}catch(C){u(" "+C.message)}}return E.jsx("div",{style:fi.wrapper,children:E.jsxs("div",{style:fi.card,children:[E.jsx("h1",{style:fi.title,children:"Inloggen"}),o&&E.jsx("div",{style:fi.alert,children:o}),E.jsx("input",{style:fi.input,placeholder:"E-mail",type:"email",value:i,onChange:C=>e(C.target.value)}),E.jsx("input",{style:fi.input,placeholder:"Wachtwoord",type:"password",value:n,onChange:C=>s(C.target.value)}),E.jsx("button",{style:fi.btnPrimary,onClick:b,disabled:c,children:c?"Bezig...":"Inloggen"}),E.jsx("button",{style:fi.btnLink,onClick:A,children:"Wachtwoord vergeten?"}),E.jsx("hr",{style:fi.hr}),E.jsx("button",{style:fi.btnGoogle,onClick:v,disabled:c,children:" Log in met Google"}),E.jsxs("p",{style:{marginTop:"1rem",textAlign:"center"},children:["Nog geen account?"," ",E.jsx("a",{href:"/register",style:fi.link,children:"Registreren"})]})]})})}const fi={wrapper:{minHeight:"100vh",display:"flex",justifyContent:"center",alignItems:"center",background:"linear-gradient(180deg,#eef2ff,#dbe4ff)",padding:20},card:{width:"100%",maxWidth:380,background:"white",padding:"2rem",borderRadius:14,boxShadow:"0 4px 14px rgba(0,0,0,0.12)"},title:{textAlign:"center",marginBottom:"1.4rem"},input:{width:"100%",padding:"0.8rem",borderRadius:8,border:"1px solid #ccc",marginBottom:"1rem"},btnPrimary:{width:"100%",padding:"0.8rem",background:"#004aad",color:"white",border:"none",borderRadius:8,fontWeight:"bold",cursor:"pointer"},btnGoogle:{width:"100%",padding:"0.8rem",background:"#ffffff",border:"1px solid #ccc",borderRadius:8,cursor:"pointer"},btnLink:{marginTop:"0.6rem",background:"transparent",border:"none",color:"#004aad",cursor:"pointer",textDecoration:"underline"},hr:{margin:"1.4rem 0"},alert:{background:"#ffe6e6",padding:"0.8rem",borderRadius:8,border:"1px solid #ffbcbc",marginBottom:"1rem",color:"#aa0000"},link:{color:"#004aad",fontWeight:"bold"}};function OV(){const[i,e]=L.useState({name:"",company:"",email:"",password:"",password2:""}),[n,s]=L.useState(""),[o,u]=L.useState(!1);function c(g){e({...i,[g.target.name]:g.target.value})}function m(){return i.name?i.company?i.email?!i.password||!i.password2?"Vul een wachtwoord in.":i.password!==i.password2?"Wachtwoorden komen niet overeen.":i.password.length<6?"Wachtwoord moet minimaal 6 tekens zijn.":null:"Vul een e-mailadres in.":"Vul een bedrijfsnaam in.":"Vul een naam in."}async function p(g){g.preventDefault(),s("");const v=m();if(v)return s(" "+v);try{u(!0);const b=await wx(wa,i.email,i.password);await Go(st(_e,"users",b.user.uid),{uid:b.user.uid,email:i.email,name:i.name,company:i.company,role:"user",points_total:0,points_pending:0,profile_completed:!1,createdAt:Zi(),updatedAt:Zi()}),s(" Account aangemaakt! Je wordt doorgestuurd..."),setTimeout(()=>{window.location.href="/"},1200)}catch(b){console.error(b),s(" Er ging iets mis: "+b.message)}finally{u(!1)}}return E.jsx("div",{style:Hi.wrapper,children:E.jsxs("form",{onSubmit:p,style:Hi.card,children:[E.jsx("h1",{style:Hi.title,children:"Account Registreren"}),n&&E.jsx("p",{style:Hi.alert,children:n}),E.jsx("input",{style:Hi.input,placeholder:"Volledige naam",name:"name",value:i.name,onChange:c}),E.jsx("input",{style:Hi.input,placeholder:"Bedrijfsnaam",name:"company",value:i.company,onChange:c}),E.jsx("input",{style:Hi.input,placeholder:"E-mail",type:"email",name:"email",value:i.email,onChange:c}),E.jsx("input",{style:Hi.input,placeholder:"Wachtwoord",type:"password",name:"password",value:i.password,onChange:c}),E.jsx("input",{style:Hi.input,placeholder:"Herhaal wachtwoord",type:"password",name:"password2",value:i.password2,onChange:c}),E.jsx("button",{disabled:o,style:Hi.btnPrimary,children:o?"Bezig...":"Account aanmaken"}),E.jsxs("p",{style:{marginTop:"1rem"},children:["Al een account? ",E.jsx("a",{href:"/login",children:"Inloggen"})]})]})})}const Hi={wrapper:{minHeight:"100vh",display:"flex",justifyContent:"center",alignItems:"center",background:"linear-gradient(180deg,#eef2ff,#dbe4ff)",padding:"1rem"},card:{width:"100%",maxWidth:400,background:"white",padding:"2rem",borderRadius:14,boxShadow:"0 4px 14px rgba(0,0,0,0.15)"},title:{marginBottom:"1.4rem",textAlign:"center",fontSize:"1.6rem"},input:{width:"100%",padding:"0.8rem",marginBottom:"1rem",borderRadius:8,border:"1px solid #ccc"},btnPrimary:{width:"100%",padding:"0.9rem",borderRadius:8,background:"#004aad",color:"white",border:"none",fontSize:"1rem",cursor:"pointer"},alert:{background:"#ffeded",padding:"0.8rem",borderRadius:8,border:"1px solid #ffb0b0",color:"#b00000",marginBottom:"1rem"}};function Ur(){return E.jsxs("div",{className:"admin-menu",children:[E.jsx("h2",{style:{marginBottom:"1rem"},children:" Admin"}),E.jsxs("nav",{className:"admin-nav",children:[E.jsx(tn,{to:"/admin",children:" Dashboard"}),E.jsx(tn,{to:"/admin/users",children:" Gebruikers"}),E.jsx(tn,{to:"/admin/registraties",children:" Registraties"}),E.jsx(tn,{to:"/admin/producten",children:" Producten"}),E.jsx(tn,{to:"/admin/punten",children:" Punten"}),E.jsx(tn,{to:"/admin/koppelingen",children:" Koppelingen"}),E.jsx(tn,{to:"/admin/importexport",children:" Import / Export"}),E.jsx(tn,{to:"/admin/logboek",children:" Logboek"}),E.jsx(tn,{to:"/admin/instellingen",children:" Instellingen"})]})]})}async function MV(){const i=it(_e,"users"),e=await yn(i);for(const n of e.docs){const s=n.data(),o=[];s.email&&o.push(s.email.toLowerCase()),s.installer_full_name&&o.push(s.installer_full_name.toLowerCase()),console.log("Indexing:",s.email),await gi(st(_e,"users",n.id),{keywords:o})}alert(" Alle gebruikers opnieuw gendexeerd!")}function VV({user:i}){const[e,n]=L.useState({totalUsers:0,totalRegistrations:0,newUsersThisMonth:0,totalLogins:0}),[s,o]=L.useState(null);L.useEffect(()=>{c(),u()},[]);async function u(){const m=st(_e,"users",i.uid),p=await Bs(m);p.exists()&&o(p.data())}async function c(){const m=new Date,p=new Date(m.getFullYear(),m.getMonth(),1),g=it(_e,"users"),v=await Oo(g),b=Ji(it(_e,"users"),xr("createdAt",">=",p)),A=await Oo(b),C=it(_e,"registrations"),D=await Oo(C),B=it(_e,"logs_login"),M=await Oo(B);n({totalUsers:v.data().count,newUsersThisMonth:A.data().count,totalRegistrations:D.data().count,totalLogins:M.data().count})}return E.jsxs("div",{className:"admin-layout",children:[E.jsx(Ur,{}),E.jsxs("div",{className:"admin-content",children:[E.jsx("h1",{className:"admin-title",children:" Admin Dashboard"}),E.jsx("button",{onClick:MV,style:{padding:"0.7rem 1.2rem",background:"#0055ff",color:"white",cursor:"pointer",borderRadius:6,border:"none",marginBottom:"1.5rem",fontWeight:"bold"},children:" Gebruikers opnieuw indexeren"}),E.jsxs("div",{className:"stats-grid",children:[E.jsxs("div",{className:"stat-card",children:[E.jsx("h3",{children:" Gebruikers totaal"}),E.jsx("p",{children:e.totalUsers})]}),E.jsxs("div",{className:"stat-card",children:[E.jsx("h3",{children:" Nieuwe aanmeldingen (deze maand)"}),E.jsx("p",{children:e.newUsersThisMonth})]}),E.jsxs("div",{className:"stat-card",children:[E.jsx("h3",{children:" Registraties totaal"}),E.jsx("p",{children:e.totalRegistrations})]}),E.jsxs("div",{className:"stat-card",children:[E.jsx("h3",{children:" Totaal aantal logins"}),E.jsx("p",{children:e.totalLogins})]}),E.jsxs("div",{className:"stat-card",children:[E.jsx("h3",{children:" Ingelogde admin"}),s?E.jsxs("div",{children:[E.jsxs("p",{children:[E.jsx("strong",{children:"Naam:"})," ",s.name||"Onbekend"]}),E.jsxs("p",{children:[E.jsx("strong",{children:"Email:"})," ",s.email]}),E.jsxs("p",{children:[E.jsx("strong",{children:"Rol:"})," ",s.role]})]}):E.jsx("p",{children:"Data laden..."})]})]})]})]})}function kV(){const[i,e]=L.useState([]),[n,s]=L.useState({}),[o,u]=L.useState(""),[c,m]=L.useState(1),p=25;L.useEffect(()=>{async function D(){const M=(await yn(it(_e,"users"))).docs.map(Y=>({id:Y.id,...Y.data()}));e(M)}D()},[]),L.useEffect(()=>{async function D(){const B={};for(let M of i){const Y=Ji(it(_e,"registrations"),xr("installer_uid","==",M.id)),$=await yn(Y);B[M.id]=$.size}s(B)}i.length>0&&D()},[i]);const g=i.filter(D=>(D.email||"").toLowerCase().includes(o.toLowerCase())),v=Math.ceil(g.length/p),b=(c-1)*p,A=g.slice(b,b+p);async function C(D,B){await gi(st(_e,"users",D),{role:B}),e(M=>M.map(Y=>Y.id===D?{...Y,role:B}:Y))}return E.jsxs("div",{className:"admin-layout",children:[E.jsx(Ur,{}),E.jsxs("div",{className:"admin-content",children:[E.jsx("h1",{children:" Gebruikersbeheer"}),E.jsx("input",{className:"admin-search",placeholder:"Zoek op e-mail",value:o,onChange:D=>{u(D.target.value),m(1)}}),E.jsxs("table",{className:"admin-table",children:[E.jsx("thead",{children:E.jsxs("tr",{children:[E.jsx("th",{children:"Email"}),E.jsx("th",{children:"Bedrijf"}),E.jsx("th",{children:"Rol"}),E.jsx("th",{children:"Registraties"}),E.jsx("th",{children:"Acties"})]})}),E.jsxs("tbody",{children:[A.map(D=>E.jsxs("tr",{children:[E.jsx("td",{children:D.email}),E.jsx("td",{children:D.company||"-"}),E.jsx("td",{children:E.jsxs("select",{className:"admin-select",value:D.role,onChange:B=>C(D.id,B.target.value),children:[E.jsx("option",{value:"user",children:"user"}),E.jsx("option",{value:"admin",children:"admin"})]})}),E.jsx("td",{children:n[D.id]??""}),E.jsx("td",{children:E.jsx(tn,{className:"admin-btn",to:`/admin/registraties?user=${D.id}`,children:"Bekijk registraties"})})]},D.id)),A.length===0&&E.jsx("tr",{children:E.jsx("td",{colSpan:"5",className:"admin-empty",children:"Geen gebruikers gevonden."})})]})]}),E.jsxs("div",{className:"admin-pagination",children:[E.jsx("button",{disabled:c<=1,onClick:()=>m(D=>D-1),className:"admin-page-btn",children:" Vorige"}),E.jsxs("span",{children:["Pagina ",c," van ",v]}),E.jsx("button",{disabled:c>=v,onClick:()=>m(D=>D+1),className:"admin-page-btn",children:"Volgende "})]})]})]})}function I0(i,e){return i.replace(/\{\{(.*?)\}\}/g,(n,s)=>e[s.trim()]||"")}async function PV(i){const e=st(_e,"mailTemplates",i),n=await Bs(e);return n.exists()?n.data():(console.error(` Template ${i} niet gevonden`),null)}async function gp(i,e,n={}){const s=await PV(i);if(!s)return!1;const o=I0(s.subject,n),u=I0(s.body,n),c={to:e,subject:o,html:u};try{const m=await fetch("https://europe-west1-mijnfegon.cloudfunctions.net/sendMail",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!m.ok)throw new Error(await m.text());return console.log(" Mail verzonden:",i),!0}catch(m){return console.error(" Fout bij versturen mail:",m),!1}}function LV(){const[i,e]=L.useState([]),[n,s]=L.useState(!0),[o,u]=L.useState("pending"),[c,m]=L.useState("");L.useEffect(()=>{const A=it(_e,"registrations"),C=ny(A,D=>{const B=D.docs.map(M=>({id:M.id,...M.data()}));e(B),s(!1)});return()=>C()},[]);function p(){return i.filter(A=>o?A.status===o:!0).filter(A=>(A.customer_email||"").toLowerCase().includes(c.toLowerCase()))}async function g(A){try{if(await gi(st(_e,"registrations",A.id),{status:"approved",reviewedAt:new Date}),A.installer_uid&&A.points>0){const C=st(_e,"users",A.installer_uid),D=await Bs(C);if(D.exists()){const B=D.data().points_total??0;await gi(C,{points_total:B+A.points})}}await gp("customer_approved",A.customer_email,{customer_name:A.customer_name,product_name:A.product_name}),A.installer_email&&await gp("installer_approved",A.installer_email,{installer_name:A.installer_name||"",product_name:A.product_name,customer_name:A.customer_name}),alert("Registratie goedgekeurd!")}catch(C){console.error(C),alert("Fout bij goedkeuren.")}}async function v(A){const C=prompt("Reden van afkeuren:");if(!C){alert("Je moet een reden invullen.");return}try{await gi(st(_e,"registrations",A.id),{status:"rejected",rejected_reason:C,reviewedAt:new Date}),await gp("installer_rejected",A.installer_email,{installer_name:A.installer_name||"",product_name:A.product_name,reason:C}),alert("Registratie afgekeurd.")}catch(D){console.error(D),alert("Fout bij afkeuren.")}}async function b(A){window.confirm("Weet je zeker dat je deze registratie wilt verwijderen?")&&await pS(st(_e,"registrations",A.id))}return E.jsxs("div",{className:"admin-layout",children:[E.jsx(Ur,{}),E.jsxs("div",{className:"admin-content",children:[E.jsx("h1",{children:" Registratiebeheer"}),E.jsxs("div",{className:"admin-filters",style:{marginBottom:"1rem"},children:[E.jsxs("select",{value:o,onChange:A=>u(A.target.value),children:[E.jsx("option",{value:"pending",children:" Wachtend"}),E.jsx("option",{value:"approved",children:" Goedgekeurd"}),E.jsx("option",{value:"rejected",children:" Afgekeurd"}),E.jsx("option",{value:"",children:"Alle"})]}),E.jsx("input",{className:"admin-search",placeholder:"Zoek op klant-email...",value:c,onChange:A=>m(A.target.value)})]}),n?E.jsx("p",{children:"Registraties laden..."}):E.jsxs("table",{className:"admin-table",children:[E.jsx("thead",{children:E.jsxs("tr",{children:[E.jsx("th",{children:"Klant"}),E.jsx("th",{children:"Installateur"}),E.jsx("th",{children:"Product"}),E.jsx("th",{children:"Datum"}),E.jsx("th",{children:"Status"}),E.jsx("th",{children:"Punten"}),E.jsx("th",{children:"Acties"})]})}),E.jsxs("tbody",{children:[p().map(A=>E.jsxs("tr",{children:[E.jsxs("td",{children:[A.customer_name,E.jsx("br",{}),E.jsx("small",{children:A.customer_email})]}),E.jsxs("td",{children:[A.installer_name||"-",E.jsx("br",{}),E.jsx("small",{children:A.installer_email||""})]}),E.jsx("td",{children:A.product_name}),E.jsx("td",{children:A.createdAt?.toDate?A.createdAt.toDate().toLocaleDateString():"-"}),E.jsxs("td",{children:[A.status==="pending"&&E.jsx("span",{children:""}),A.status==="approved"&&E.jsx("span",{style:{color:"green"},children:""}),A.status==="rejected"&&E.jsx("span",{style:{color:"red"},children:""})]}),E.jsx("td",{children:A.points??0}),E.jsxs("td",{children:[A.status==="pending"&&E.jsxs(E.Fragment,{children:[E.jsx("button",{className:"admin-btn",onClick:()=>g(A),children:" Goedkeuren"}),E.jsx("button",{className:"admin-btn",style:{background:"#c62828"},onClick:()=>v(A),children:" Afkeuren"})]}),E.jsx("button",{className:"admin-btn",style:{background:"#444"},onClick:()=>b(A),children:" Verwijderen"})]})]},A.id)),p().length===0&&E.jsx("tr",{children:E.jsx("td",{colSpan:"7",className:"admin-empty",children:"Geen registraties gevonden."})})]})]})]})]})}function UV(){const[i,e]=L.useState([]),[n,s]=L.useState(""),[o,u]=L.useState({name:"",description:"",points:""}),[c,m]=L.useState(null),[p,g]=L.useState("");L.useEffect(()=>{const D=ny(it(_e,"products"),B=>{const M=B.docs.map(Y=>({id:Y.id,...Y.data()}));e(M)});return()=>D()},[]);function v(D){m(D.target.files[0])}async function b(D){if(D.preventDefault(),g(""),!o.name||!o.points){g(" Vul alle verplichte velden in.");return}if(!c){g(" Je moet een productafbeelding toevoegen.");return}try{const B=`productImages/${Date.now()}_${c.name}`,M=R0(C0,B);await yV(M,c);const Y=await _V(M);await gS(it(_e,"products"),{name:o.name,description:o.description||"",points:Number(o.points),imageUrl:Y,imagePath:B,createdAt:Zi()}),g(" Product toegevoegd!"),u({name:"",description:"",points:""}),m(null)}catch(B){console.error(B),g(" Fout bij opslaan van product.")}}async function A(D){try{await pS(st(_e,"products",D.id)),D.imagePath&&await vV(R0(C0,D.imagePath))}catch(B){console.error(B),alert(" Kon product niet verwijderen.")}}const C=i.filter(D=>D.name.toLowerCase().includes(n.toLowerCase()));return E.jsxs("div",{className:"admin-layout",children:[E.jsx(Ur,{}),E.jsxs("div",{className:"admin-content",children:[E.jsx("h1",{children:" Productbeheer"}),E.jsx("input",{className:"admin-search",placeholder:"Zoek productnaam...",value:n,onChange:D=>s(D.target.value)}),E.jsxs("form",{className:"admin-form",onSubmit:b,children:[E.jsx("h2",{children:" Nieuw product"}),E.jsx("input",{type:"text",placeholder:"Productnaam",value:o.name,required:!0,onChange:D=>u({...o,name:D.target.value})}),E.jsx("textarea",{placeholder:"Omschrijving (optioneel)",value:o.description,onChange:D=>u({...o,description:D.target.value})}),E.jsx("input",{type:"number",placeholder:"Aantal punten",value:o.points,required:!0,onChange:D=>u({...o,points:D.target.value})}),E.jsx("input",{type:"file",accept:"image/*",onChange:v}),E.jsx("button",{type:"submit",className:"admin-btn",children:" Opslaan"}),p&&E.jsx("p",{style:{marginTop:10},children:p})]}),E.jsx("h2",{style:{marginTop:"2rem"},children:" Alle producten"}),E.jsxs("div",{className:"admin-grid",children:[C.map(D=>E.jsxs("div",{className:"admin-card",children:[E.jsx("img",{src:D.imageUrl,className:"admin-card-img",alt:D.name}),E.jsx("h3",{children:D.name}),E.jsxs("p",{style:{color:"#004aad",fontWeight:"bold"},children:[D.points," punten"]}),E.jsx("button",{className:"admin-btn-danger",onClick:()=>A(D),children:" Verwijderen"})]},D.id)),C.length===0&&E.jsx("p",{className:"admin-empty",children:"Geen producten gevonden."})]})]})]})}function jV(){const[i,e]=L.useState([]),[n,s]=L.useState(""),[o,u]=L.useState(1),[c,m]=L.useState({}),[p,g]=L.useState({}),v=25;L.useEffect(()=>{async function M(){const $=(await yn(it(_e,"users"))).docs.map(ie=>({id:ie.id,...ie.data()}));e($)}M()},[]),L.useEffect(()=>{async function M(){const Y={};for(let $ of i){const ie=Ji(it(_e,"registrations"),xr("installer_uid","==",$.id),xr("status","==","pending")),he=await yn(ie);Y[$.id]=he.docs.map(Ee=>({id:Ee.id,...Ee.data()}))}g(Y)}i.length>0&&M()},[i]);const b=i.filter(M=>(M.email||"").toLowerCase().includes(n.toLowerCase())),A=Math.ceil(b.length/v),C=(o-1)*v,D=b.slice(C,C+v);async function B(M,Y){const $=st(_e,"users",M),he=(await yn(Ji(it(_e,"users"),xr("__name__","==",M)))).docs[0].data().points_total||0;await gi($,{points_total:he+Y}),e(Ee=>Ee.map(ae=>ae.id===M?{...ae,points_total:he+Y}:ae)),m({...c,[M]:""})}return E.jsxs("div",{className:"admin-layout",children:[E.jsx(Ur,{}),E.jsxs("div",{className:"admin-content",children:[E.jsx("h1",{children:" Puntenbeheer"}),E.jsx("input",{className:"admin-search",placeholder:"Zoek op e-mail...",value:n,onChange:M=>{s(M.target.value),u(1)}}),E.jsxs("table",{className:"admin-table",children:[E.jsx("thead",{children:E.jsxs("tr",{children:[E.jsx("th",{children:"Email"}),E.jsx("th",{children:"Huidige punten"}),E.jsx("th",{children:"Pas punten aan"}),E.jsx("th",{children:"Openstaande registraties"}),E.jsx("th",{children:"Acties"})]})}),E.jsxs("tbody",{children:[D.map(M=>E.jsxs("tr",{children:[E.jsx("td",{children:M.email}),E.jsx("td",{children:M.points_total||0}),E.jsxs("td",{children:[E.jsx("input",{type:"number",style:{width:"80px",padding:"6px",borderRadius:"6px",border:"1px solid #ccc"},value:c[M.id]||"",onChange:Y=>m({...c,[M.id]:Y.target.value})}),E.jsx("button",{className:"admin-btn",style:{marginLeft:"6px"},onClick:()=>B(M.id,Number(c[M.id]||0)),children:" Opslaan"})]}),E.jsx("td",{children:(p[M.id]?.length||0)>0?E.jsxs("span",{style:{color:"#d33",fontWeight:"bold"},children:[p[M.id].length," open"]}):E.jsx("span",{style:{color:"green"},children:"Geen"})}),E.jsx("td",{children:E.jsx(tn,{className:"admin-btn",to:`/admin/registraties?user=${M.id}`,children:"Bekijk registraties"})})]},M.id)),D.length===0&&E.jsx("tr",{children:E.jsx("td",{className:"admin-empty",colSpan:"5",children:"Geen gebruikers gevonden."})})]})]}),E.jsxs("div",{className:"admin-pagination",children:[E.jsx("button",{disabled:o<=1,onClick:()=>u(M=>M-1),className:"admin-page-btn",children:" Vorige"}),E.jsxs("span",{children:["Pagina ",o," van ",A]}),E.jsx("button",{disabled:o>=A,onClick:()=>u(M=>M+1),className:"admin-page-btn",children:"Volgende "})]})]})]})}function zV(){const[i,e]=L.useState([]),[n,s]=L.useState([]),[o,u]=L.useState(!0),[c,m]=L.useState("");L.useEffect(()=>{async function g(){u(!0);const b=(await yn(it(_e,"users"))).docs.map(M=>({id:M.id,...M.data()}));s(b);const A=Ji(it(_e,"registrations"),xr("installer_uid","==",null)),B=(await yn(A)).docs.map(M=>({id:M.id,...M.data()})).map(M=>{const Y=b.find($=>M.installer_email&&$.email?.toLowerCase()===M.installer_email.toLowerCase());return{...M,autoMatch:Y?Y.id:""}});e(B),u(!1)}g()},[]);async function p(g,v){try{const b=st(_e,"registrations",g);await gi(b,{installer_uid:v,status:"pending"}),m(" Koppeling opgeslagen!"),e(A=>A.filter(C=>C.id!==g))}catch(b){console.error(b),m(" Fout bij opslaan koppeling.")}}return o?E.jsx("p",{style:{padding:20},children:" Laden..."}):E.jsxs("div",{className:"admin-layout",children:[E.jsx(Ur,{})," ",E.jsxs("div",{className:"admin-content",children:[E.jsx("h1",{children:" Registraties koppelen"}),c&&E.jsx("p",{children:c}),i.length===0&&E.jsx("p",{children:" Geen openstaande registraties om te koppelen."}),i.map(g=>E.jsxs("div",{className:"stat-card",style:{marginBottom:20},children:[E.jsxs("h3",{children:["Registratie: ",g.serial||"(geen serienummer)"]}),E.jsxs("p",{children:[E.jsx("strong",{children:"Email installateur:"})," ",g.installer_email||"Onbekend"]}),E.jsx("label",{style:{fontWeight:"bold"},children:"Koppel aan installateur:"}),E.jsxs("select",{className:"admin-select",defaultValue:g.autoMatch||"",onChange:v=>p(g.id,v.target.value),children:[E.jsx("option",{value:"",children:"-- Kies installateur --"}),n.map(v=>E.jsxs("option",{value:v.id,children:[v.email," (",v.company||"Geen bedrijf",")"]},v.id))]}),g.autoMatch&&E.jsx("p",{style:{color:"green",marginTop:6},children:" Automatische match gevonden!"})]},g.id))]})]})}function BV(){const[i,e]=L.useState("");async function n(){const c=(await yn(it(_e,"users"))).docs.map(p=>({id:p.id,...p.data()})),m=[["id","email","name","company","role","points"],...c.map(p=>[p.id,p.email||"",p.name||"",p.company||"",p.role||"user",p.points||0])].map(p=>p.join(",")).join(`
`);o("users_export.csv",m)}async function s(u){const c=u.target.files[0];if(!c)return;const p=(await c.text()).split(`
`).slice(1);for(let g of p){if(!g.trim())continue;const[v,b,A,C,D,B]=g.split(",");await Go(st(_e,"users",v),{email:b,name:A,company:C,role:D,points:Number(B||0)},{merge:!0})}e(" Gebruikers succesvol gemporteerd!")}function o(u,c){const m=document.createElement("a");m.href=URL.createObjectURL(new Blob([c],{type:"text/csv"})),m.download=u,m.click()}return E.jsxs("div",{children:[E.jsx("h2",{children:" Gebruikers import/export"}),E.jsx("button",{onClick:n,className:"admin-btn",children:" Exporteer gebruikers"}),E.jsx("br",{}),E.jsx("br",{}),E.jsx("input",{type:"file",accept:".csv",onChange:s}),i&&E.jsx("p",{children:i})]})}function qV(){const[i,e]=L.useState("");async function n(){const c=(await yn(it(_e,"registrations"))).docs.map(p=>({id:p.id,...p.data()})),m=[["id","serial","installer_email","installer_uid","status"],...c.map(p=>[p.id,p.serial||"",p.installer_email||"",p.installer_uid||"",p.status||"pending"])].map(p=>p.join(",")).join(`
`);o("registrations_export.csv",m)}async function s(u){const c=u.target.files[0];if(!c)return;const p=(await c.text()).split(`
`).slice(1);for(let g of p){if(!g.trim())continue;const[v,b,A,C,D]=g.split(",");await Go(st(_e,"registrations",v),{serial:b,installer_email:A,installer_uid:C||null,status:D||"pending"},{merge:!0})}e(" Registraties gemporteerd!")}function o(u,c){const m=document.createElement("a");m.href=URL.createObjectURL(new Blob([c],{type:"text/csv"})),m.download=u,m.click()}return E.jsxs("div",{children:[E.jsx("h2",{children:" Registraties import/export"}),E.jsx("button",{onClick:n,className:"admin-btn",children:" Exporteer registraties"}),E.jsx("br",{}),E.jsx("br",{}),E.jsx("input",{type:"file",accept:".csv",onChange:s}),i&&E.jsx("p",{children:i})]})}function HV(){const[i,e]=L.useState("");async function n(){const c=(await yn(it(_e,"users"))).docs.map(p=>({id:p.id,...p.data()})),m=[["id","email","points"],...c.map(p=>[p.id,p.email,p.points||0])].map(p=>p.join(",")).join(`
`);o("points_export.csv",m)}async function s(u){const c=u.target.files[0];if(!c)return;const p=(await c.text()).split(`
`).slice(1);for(let g of p){if(!g.trim())continue;const[v,b,A]=g.split(",");await gi(st(_e,"users",v),{points:Number(A)})}e(" Punten gepdatet!")}function o(u,c){const m=document.createElement("a");m.href=URL.createObjectURL(new Blob([c],{type:"text/csv"})),m.download=u,m.click()}return E.jsxs("div",{children:[E.jsx("h2",{children:" Punten import/export"}),E.jsx("button",{onClick:n,className:"admin-btn",children:" Exporteer punten"}),E.jsx("br",{}),E.jsx("br",{}),E.jsx("input",{type:"file",accept:".csv",onChange:s}),i&&E.jsx("p",{children:i})]})}function FV(){const[i,e]=L.useState("users");return E.jsxs("div",{className:"admin-layout",children:[E.jsx(Ur,{}),E.jsxs("div",{className:"admin-content",children:[E.jsx("h1",{children:" Import & Export"}),E.jsx("p",{children:"Kies een categorie om te importeren of exporteren."}),E.jsxs("div",{style:va.tabs,children:[E.jsx("button",{onClick:()=>e("users"),style:i==="users"?va.active:va.tab,children:" Gebruikers"}),E.jsx("button",{onClick:()=>e("registrations"),style:i==="registrations"?va.active:va.tab,children:" Registraties"}),E.jsx("button",{onClick:()=>e("points"),style:i==="points"?va.active:va.tab,children:" Punten"})]}),i==="users"&&E.jsx(BV,{}),i==="registrations"&&E.jsx(qV,{}),i==="points"&&E.jsx(HV,{})]})]})}const va={tabs:{display:"flex",gap:"1rem",marginBottom:"2rem"},tab:{padding:"0.7rem 1.2rem",background:"#e6eaff",border:"1px solid #ccd5ff",borderRadius:8,cursor:"pointer"},active:{padding:"0.7rem 1.2rem",background:"#004aad",border:"1px solid #00357a",borderRadius:8,color:"white",cursor:"pointer"}};function GV(){const[i,e]=L.useState([]),[n,s]=L.useState(null),[o,u]=L.useState("all"),c=25;L.useEffect(()=>{m(!0)},[o]);async function m(g=!1){let v=Ji(it(_e,"logs"),hp("timestamp","desc"),fp(c));o!=="all"&&(v=Ji(it(_e,"logs"),hp("timestamp","desc"),fp(c)));const b=await yn(v);e(g?b.docs.map(A=>({id:A.id,...A.data()})):A=>[...A,...b.docs.map(C=>({id:C.id,...C.data()}))]),s(b.docs[b.docs.length-1]||null)}async function p(){if(!n)return;const g=Ji(it(_e,"logs"),hp("timestamp","desc"),ZO(n),fp(c)),v=await yn(g);e(b=>[...b,...v.docs.map(A=>({id:A.id,...A.data()}))]),s(v.docs[v.docs.length-1]||null)}return E.jsxs("div",{className:"admin-layout",children:[E.jsx(Ur,{}),E.jsxs("div",{className:"admin-content",children:[E.jsx("h1",{className:"admin-title",children:" Logboek"}),E.jsx("div",{className:"admin-filters",children:E.jsxs("select",{className:"admin-select",value:o,onChange:g=>u(g.target.value),children:[E.jsx("option",{value:"all",children:"Alle gebeurtenissen"}),E.jsx("option",{value:"login",children:"Logins"}),E.jsx("option",{value:"admin_action",children:"Admin acties"}),E.jsx("option",{value:"registration_update",children:"Registratie wijzigingen"}),E.jsx("option",{value:"points_change",children:"Puntentransacties"})]})}),E.jsxs("table",{className:"admin-table",children:[E.jsx("thead",{children:E.jsxs("tr",{children:[E.jsx("th",{children:"Tijd"}),E.jsx("th",{children:"Type"}),E.jsx("th",{children:"Actie"}),E.jsx("th",{children:"Gebruiker"}),E.jsx("th",{children:"Details"})]})}),E.jsxs("tbody",{children:[i.map(g=>E.jsxs("tr",{children:[E.jsx("td",{children:g.timestamp?.toDate?g.timestamp.toDate().toLocaleString():"-"}),E.jsx("td",{children:g.type}),E.jsx("td",{children:g.action}),E.jsx("td",{children:g.email?E.jsxs(E.Fragment,{children:[E.jsx("strong",{children:g.email}),E.jsx("br",{}),E.jsx("small",{children:g.uid})]}):"System"}),E.jsx("td",{children:g.details&&Object.keys(g.details).length>0?E.jsx("pre",{style:{fontSize:"0.75rem"},children:JSON.stringify(g.details,null,2)}):"-"})]},g.id)),i.length===0&&E.jsx("tr",{children:E.jsx("td",{colSpan:"5",className:"admin-empty",children:"Geen logitems gevonden."})})]})]}),n&&E.jsx("div",{className:"pagination",children:E.jsx("button",{onClick:p,children:"Meer laden "})})]})]})}function KV(){const[i,e]=L.useState([]),[n,s]=L.useState(!0);async function o(){const c=await yn(it(_e,"mailTemplates"));e(c.docs.map(m=>({id:m.id,...m.data()}))),s(!1)}async function u(c,m,p){const g=st(_e,"mailTemplates",c);await gi(g,{subject:m,body:p,updatedAt:new Date}),alert("Template opgeslagen!")}return L.useEffect(()=>{o()},[]),n?E.jsx("p",{children:"Templates laden..."}):E.jsxs("div",{className:"admin-layout",children:[E.jsx(Ur,{}),E.jsxs("div",{className:"admin-content",children:[E.jsx("h1",{children:" Mail Templates"}),i.map(c=>E.jsxs("div",{className:"template-card",children:[E.jsx("h2",{children:c.id}),E.jsx("label",{children:"Onderwerp"}),E.jsx("input",{defaultValue:c.subject,id:`subject_${c.id}`}),E.jsx("label",{children:"Body (HTML toegestaan)"}),E.jsx("textarea",{rows:"6",defaultValue:c.body,id:`body_${c.id}`}),E.jsx("button",{onClick:()=>{const m=document.getElementById(`subject_${c.id}`).value,p=document.getElementById(`body_${c.id}`).value;u(c.id,m,p)},children:"Opslaan"})]},c.id))]})]})}function Sr({role:i,children:e}){return i==="admin"?e:E.jsx(_p,{to:"/",replace:!0})}function QV(){const[i,e]=L.useState(null),[n,s]=L.useState(""),[o,u]=L.useState(!1),[c,m]=L.useState(!0),p=7.5*30*500;return L.useEffect(()=>{const g=xx(wa,async v=>{if(v){e(v);const b=st(_e,"users",v.uid),A=await Bs(b);if(A.exists()){const C=A.data();s(C.role||"user"),u(C.profile_completed||!1)}else s("user"),u(!1)}else e(null),s(""),u(!1);m(!1)});return()=>g()},[]),L.useEffect(()=>{if(!i)return;let g;const v=()=>{g&&clearTimeout(g),g=setTimeout(()=>{console.log("Geen activiteit, gebruiker wordt automatisch uitgelogd."),wb(wa)},p)},b=["mousemove","keydown","click","scroll","touchstart"];return b.forEach(A=>{window.addEventListener(A,v)}),v(),()=>{g&&clearTimeout(g),b.forEach(A=>{window.removeEventListener(A,v)})}},[i,p]),c?E.jsx("p",{style:{padding:20},children:" Laden..."}):i?o?E.jsxs(FE,{children:[E.jsx(Gt,{path:"/",element:E.jsx(RV,{user:i,role:n})}),E.jsx(Gt,{path:"/shop",element:E.jsx(CV,{user:i})}),E.jsx(Gt,{path:"/instellingen",element:E.jsx(IV,{user:i})}),E.jsx(Gt,{path:"/registratie",element:E.jsx(DV,{user:i})}),E.jsx(Gt,{path:"/admin",element:E.jsx(Sr,{role:n,children:E.jsx(VV,{user:i})})}),E.jsx(Gt,{path:"/admin/users",element:E.jsx(Sr,{role:n,children:E.jsx(kV,{user:i})})}),E.jsx(Gt,{path:"/admin/registraties",element:E.jsx(Sr,{role:n,children:E.jsx(LV,{user:i})})}),E.jsx(Gt,{path:"/admin/producten",element:E.jsx(Sr,{role:n,children:E.jsx(UV,{user:i})})}),E.jsx(Gt,{path:"/admin/punten",element:E.jsx(Sr,{role:n,children:E.jsx(jV,{user:i})})}),E.jsx(Gt,{path:"/admin/koppelingen",element:E.jsx(Sr,{role:n,children:E.jsx(zV,{user:i})})}),E.jsx(Gt,{path:"/admin/importexport",element:E.jsx(Sr,{role:n,children:E.jsx(FV,{user:i})})}),E.jsx(Gt,{path:"/admin/logboek",element:E.jsx(Sr,{role:n,children:E.jsx(GV,{user:i})})}),E.jsx(Gt,{path:"/admin/instellingen",element:E.jsx(Sr,{role:n,children:E.jsx(KV,{user:i})})}),E.jsx(Gt,{path:"*",element:E.jsx(_p,{to:"/",replace:!0})})]}):E.jsx(xV,{user:i}):E.jsxs(FE,{children:[E.jsx(Gt,{path:"/login",element:E.jsx(NV,{})}),E.jsx(Gt,{path:"/register",element:E.jsx(OV,{})}),E.jsx(Gt,{path:"*",element:E.jsx(_p,{to:"/login",replace:!0})})]})}TR.createRoot(document.getElementById("root")).render(E.jsx(dR.StrictMode,{children:E.jsx(M1,{children:E.jsx(QV,{})})}));
